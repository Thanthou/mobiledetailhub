Database Schema: MobileDetailHub
Exported: 2025-08-26T15:39:50.783Z
Total Tables: 21

=== ADDRESSES ===
Rows: 0

Columns:
  id: integer NOT NULL DEFAULT nextval('addresses_id_seq'::regclass)
  line1: character varying(255) NULL
  city: character varying(100) NOT NULL
  state_code: character(2) NOT NULL
  postal_code: character varying(20) NULL
  lat: double precision NULL
  lng: double precision NULL
  created_at: timestamp with time zone NOT NULL DEFAULT now()
  updated_at: timestamp with time zone NOT NULL DEFAULT now()

Primary Key: id

Foreign Keys:
  state_code -> states.state_code


=== AFFILIATE_SERVICE_AREAS ===
Rows: 0

Columns:
  id: integer NOT NULL DEFAULT nextval('affiliate_service_areas_id_seq'::regclass)
  affiliate_id: integer NOT NULL
  city: character varying(100) NOT NULL
  state_code: character(2) NOT NULL
  zip: character varying(20) NULL
  created_at: timestamp with time zone NULL DEFAULT now()

Primary Key: id

Foreign Keys:
  affiliate_id -> affiliates.id
  state_code -> states.state_code


=== AFFILIATES ===
Rows: 0

Columns:
  id: integer NOT NULL DEFAULT nextval('affiliates_id_seq'::regclass)
  slug: character varying(100) NOT NULL
  business_name: character varying(255) NOT NULL
  owner: character varying(255) NOT NULL
  phone: character varying(20) NOT NULL
  sms_phone: character varying(20) NULL
  email: character varying(255) NOT NULL
  base_address_id: integer NULL
  services: jsonb NOT NULL DEFAULT '{"rv": false, "ppf": false, "auto": false, "boat": false, "ceramic": false, "paint_correction": false}'::jsonb
  website_url: character varying(500) NULL
  gbp_url: character varying(500) NULL
  facebook_url: character varying(500) NULL
  instagram_url: character varying(500) NULL
  youtube_url: character varying(500) NULL
  tiktok_url: character varying(500) NULL
  application_status: character varying(20) NOT NULL DEFAULT 'pending'::character varying
  has_insurance: boolean NULL DEFAULT false
  source: character varying(100) NULL
  notes: text NULL
  uploads: ARRAY NULL
  business_license: character varying(100) NULL
  insurance_provider: character varying(255) NULL
  insurance_expiry: date NULL
  service_radius_miles: integer NULL DEFAULT 25
  operating_hours: jsonb NULL
  emergency_contact: jsonb NULL
  total_jobs: integer NULL DEFAULT 0
  rating: numeric NULL
  review_count: integer NULL DEFAULT 0
  created_at: timestamp with time zone NOT NULL DEFAULT now()
  updated_at: timestamp with time zone NOT NULL DEFAULT now()
  application_date: timestamp with time zone NOT NULL DEFAULT now()
  approved_date: timestamp with time zone NULL
  last_activity: timestamp with time zone NOT NULL DEFAULT now()

Primary Key: id

Foreign Keys:
  base_address_id -> addresses.id


=== AVAILABILITY ===
Rows: 0

Columns:
  id: integer NOT NULL DEFAULT nextval('availability_id_seq'::regclass)
  affiliate_id: integer NOT NULL
  date: date NOT NULL
  start_time: time without time zone NOT NULL
  end_time: time without time zone NOT NULL
  capacity: integer NOT NULL DEFAULT 1

Primary Key: id

Foreign Keys:
  affiliate_id -> affiliates.id


=== BOOKINGS ===
Rows: 0

Columns:
  id: integer NOT NULL DEFAULT nextval('bookings_id_seq'::regclass)
  affiliate_id: integer NOT NULL
  customer_id: integer NULL
  service_id: integer NULL
  tier_id: integer NULL
  appointment_start: timestamp with time zone NOT NULL
  appointment_end: timestamp with time zone NOT NULL
  address_json: jsonb NOT NULL DEFAULT '{}'::jsonb
  status: USER-DEFINED NOT NULL DEFAULT 'pending'::booking_status
  total_cents: integer NOT NULL DEFAULT 0
  stripe_payment_intent_id: text NULL
  created_at: timestamp with time zone NOT NULL DEFAULT now()
  updated_at: timestamp with time zone NOT NULL DEFAULT now()

Primary Key: id

Foreign Keys:
  affiliate_id -> affiliates.id
  customer_id -> customers.id
  service_id -> services.id
  tier_id -> service_tiers.id


=== CITIES ===
Rows: 0

Columns:
  id: bigint NOT NULL DEFAULT nextval('cities_id_seq'::regclass)
  name: text NOT NULL
  city_slug: text NOT NULL
  state_code: character(2) NOT NULL
  lat: double precision NULL
  lng: double precision NULL

Primary Key: id

Foreign Keys:
  state_code -> states.state_code


=== CUSTOMERS ===
Rows: 0

Columns:
  id: integer NOT NULL DEFAULT nextval('customers_id_seq'::regclass)
  user_id: integer NULL
  name: character varying(255) NOT NULL
  email: character varying(255) NULL
  phone: character varying(50) NULL
  address: character varying(255) NULL
  preferences: jsonb NULL
  created_at: timestamp with time zone NOT NULL DEFAULT now()
  updated_at: timestamp with time zone NOT NULL DEFAULT now()

Primary Key: id

Foreign Keys:
  user_id -> users.id


=== LOCATION ===
Rows: 0

Columns:
  location_id: bigint NOT NULL DEFAULT nextval('location_location_id_seq'::regclass)
  affiliate_id: bigint NULL
  source_platform: USER-DEFINED NOT NULL
  source_account_id: text NOT NULL
  source_location_id: text NOT NULL
  display_name: text NULL
  timezone: text NULL
  created_at: timestamp with time zone NOT NULL DEFAULT now()

Primary Key: location_id

Foreign Keys:
  affiliate_id -> affiliates.id


=== MDH_CONFIG ===
Rows: 1

Columns:
  id: integer NOT NULL DEFAULT nextval('mdh_config_id_seq'::regclass)
  email: character varying(255) NULL
  phone: character varying(50) NULL
  sms_phone: character varying(50) NULL
  logo_url: character varying(255) NULL
  favicon_url: character varying(255) NULL
  facebook: character varying(255) NULL
  instagram: character varying(255) NULL
  tiktok: character varying(255) NULL
  youtube: character varying(255) NULL
  header_display: character varying(255) NULL
  location: character varying(255) NULL
  name: character varying(255) NULL
  tagline: text NULL
  services_description: text NULL DEFAULT 'Auto, boat & RV detailing, paint correction, ceramic coating, and PPF'::text
  created_at: timestamp with time zone NOT NULL DEFAULT now()
  updated_at: timestamp with time zone NOT NULL DEFAULT now()

Primary Key: id

Sample Data:
  Row 1: {"id":1,"email":"service@mobiledetailhub.com","phone":"(888) 555-1234","sms_phone":"+17024206066","logo_url":"/assets/logo.webp","favicon_url":"/assets/favicon.ico","facebook":"https://facebook.com/mobiledetailhub","instagram":"https://instagram.com/mobiledetailhub","tiktok":"https://tiktok.com/@mobiledetailhub","youtube":"https://youtube.com/mobiledetailhub","header_display":"Mobile Detail Hub","location":"Anywhere, USA","name":"Mobile Detail Hub","tagline":null,"services_description":"Auto, boat & RV detailing, paint correction, ceramic coating, and PPF","created_at":"2025-08-26T15:39:02.956Z","updated_at":"2025-08-26T15:39:02.956Z"}


=== QUOTES ===
Rows: 0

Columns:
  id: integer NOT NULL DEFAULT nextval('quotes_id_seq'::regclass)
  affiliate_id: integer NOT NULL
  customer_id: integer NULL
  address_json: jsonb NOT NULL DEFAULT '{}'::jsonb
  requested_start: timestamp with time zone NULL
  status: USER-DEFINED NOT NULL DEFAULT 'new'::quote_status
  details_json: jsonb NOT NULL DEFAULT '{}'::jsonb
  estimated_total_cents: integer NULL
  created_at: timestamp with time zone NOT NULL DEFAULT now()
  updated_at: timestamp with time zone NOT NULL DEFAULT now()

Primary Key: id

Foreign Keys:
  affiliate_id -> affiliates.id
  customer_id -> customers.id


=== REVIEW_REPLY ===
Rows: 0

Columns:
  id: bigint NOT NULL DEFAULT nextval('review_reply_id_seq'::regclass)
  review_id: bigint NOT NULL
  text: text NULL
  reply_update_time: timestamp with time zone NULL

Primary Key: id

Foreign Keys:
  review_id -> reviews.id


=== REVIEW_SYNC_STATE ===
Rows: 0

Columns:
  location_id: bigint NOT NULL
  last_seen_update: timestamp with time zone NULL

Primary Key: location_id

Foreign Keys:
  location_id -> location.location_id


=== REVIEWS ===
Rows: 0

Columns:
  id: bigint NOT NULL DEFAULT nextval('reviews_id_seq'::regclass)
  external_id: text NULL
  affiliate_id: integer NOT NULL
  location_id: bigint NULL
  rating: smallint NULL
  text: text NULL
  author_name: text NULL
  author_profile_url: text NULL
  create_time: timestamp with time zone NULL
  update_time: timestamp with time zone NULL
  is_deleted: boolean NOT NULL DEFAULT false
  source_platform: USER-DEFINED NOT NULL
  raw: jsonb NULL

Primary Key: id

Foreign Keys:
  affiliate_id -> affiliates.id
  location_id -> location.location_id


=== SERVICE_AREA_SLUGS ===
Rows: 0

Columns:
  id: integer NOT NULL DEFAULT nextval('service_area_slugs_id_seq'::regclass)
  slug: character varying(255) NOT NULL
  city: character varying(100) NOT NULL
  state_code: character(2) NOT NULL
  zip: character varying(20) NULL
  created_at: timestamp with time zone NULL DEFAULT now()

Primary Key: id

Foreign Keys:
  state_code -> states.state_code


=== SERVICE_TIERS ===
Rows: 0

Columns:
  id: integer NOT NULL DEFAULT nextval('service_tiers_id_seq'::regclass)
  service_id: integer NOT NULL
  name: character varying(100) NOT NULL
  price_delta_cents: integer NOT NULL DEFAULT 0
  description: text NULL

Primary Key: id

Foreign Keys:
  service_id -> services.id


=== SERVICES ===
Rows: 0

Columns:
  id: integer NOT NULL DEFAULT nextval('services_id_seq'::regclass)
  affiliate_id: integer NULL
  category: USER-DEFINED NOT NULL
  name: character varying(200) NOT NULL
  description: text NULL
  base_price_cents: integer NOT NULL DEFAULT 0
  pricing_unit: USER-DEFINED NOT NULL DEFAULT 'flat'::pricing_unit
  min_duration_min: integer NOT NULL DEFAULT 60
  active: boolean NOT NULL DEFAULT true

Primary Key: id

Foreign Keys:
  affiliate_id -> affiliates.id


=== STATES ===
Rows: 56

Columns:
  state_code: character(2) NOT NULL
  name: text NOT NULL
  country_code: character(2) NOT NULL DEFAULT 'US'::bpchar

Primary Key: state_code

Sample Data:
  Row 1: {"state_code":"AL","name":"Alabama","country_code":"US"}
  Row 2: {"state_code":"AK","name":"Alaska","country_code":"US"}


=== USERS ===
Rows: 1

Columns:
  id: integer NOT NULL DEFAULT nextval('users_id_seq'::regclass)
  email: USER-DEFINED NOT NULL
  name: character varying(255) NULL
  role: USER-DEFINED NOT NULL
  is_admin: boolean NULL DEFAULT false
  password_hash: character varying(255) NULL
  phone: character varying(50) NULL
  created_at: timestamp with time zone NOT NULL DEFAULT now()
  updated_at: timestamp with time zone NOT NULL DEFAULT now()

Primary Key: id

Sample Data:
  Row 1: {"id":1,"email":"admin@mobiledetailhub.com","name":"Brandan Coleman","role":"admin","is_admin":true,"password_hash":"$2a$10$EAY3D9OdVXpYgby.ATOmheJwqrlTZ423Yg2a.qLzN1Ku1/oj2/LzS","phone":"","created_at":"2025-08-26T15:39:02.956Z","updated_at":"2025-08-26T15:39:02.956Z"}


=== V_AFFILIATE_BASE_LOCATION ===
Rows: 0

Columns:
  affiliate_id: integer NULL
  slug: character varying(100) NULL
  business_name: character varying(255) NULL
  city: character varying(100) NULL
  state_code: character(2) NULL
  zip: character varying(20) NULL


=== V_SERVED_CITIES ===
Rows: 0

Columns:
  state_code: character(2) NULL
  city: character varying(100) NULL
  affiliates: bigint NULL


=== V_SERVED_STATES ===
Rows: 0

Columns:
  state_code: character(2) NULL
  name: text NULL



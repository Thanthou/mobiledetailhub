Database Schema: MobileDetailHub
Exported: 2025-08-25T20:56:55.226Z
Total Tables: 19

=== AFFILIATE_SERVICE_AREAS ===
Rows: 0

Columns:
  id: integer NOT NULL DEFAULT nextval('affiliate_service_areas_id_seq'::regclass)
  affiliate_id: integer NULL
  state: character varying(50) NOT NULL
  city: character varying(100) NOT NULL
  zip: character varying(20) NULL
  created_at: timestamp without time zone NULL DEFAULT now()

Primary Key: id


=== AFFILIATES ===
Rows: 2

Columns:
  id: integer NOT NULL DEFAULT nextval('affiliates_id_seq'::regclass)
  slug: character varying(100) NOT NULL
  business_name: character varying(255) NOT NULL
  owner: character varying(255) NOT NULL
  phone: character varying(20) NOT NULL
  sms_phone: character varying(20) NULL
  email: character varying(255) NOT NULL
  base_location: jsonb NOT NULL DEFAULT '{"zip": "", "city": "", "state": ""}'::jsonb
  services: jsonb NOT NULL DEFAULT '{"rv": false, "ppf": false, "auto": false, "boat": false, "ceramic": false, "paint_correction": false}'::jsonb
  website_url: character varying(500) NULL
  gbp_url: character varying(500) NULL
  facebook_url: character varying(500) NULL
  instagram_url: character varying(500) NULL
  youtube_url: character varying(500) NULL
  tiktok_url: character varying(500) NULL
  application_status: character varying(20) NOT NULL DEFAULT 'pending'::character varying
  has_insurance: boolean NULL DEFAULT false
  source: character varying(100) NULL
  notes: text NULL
  uploads: ARRAY NULL
  business_license: character varying(100) NULL
  insurance_provider: character varying(255) NULL
  insurance_expiry: date NULL
  service_radius_miles: integer NULL DEFAULT 25
  operating_hours: jsonb NULL
  emergency_contact: jsonb NULL
  total_jobs: integer NULL DEFAULT 0
  rating: numeric NULL
  review_count: integer NULL DEFAULT 0
  created_at: timestamp without time zone NULL DEFAULT CURRENT_TIMESTAMP
  updated_at: timestamp without time zone NULL DEFAULT CURRENT_TIMESTAMP
  application_date: timestamp without time zone NULL DEFAULT CURRENT_TIMESTAMP
  approved_date: timestamp without time zone NULL
  last_activity: timestamp without time zone NULL DEFAULT CURRENT_TIMESTAMP

Primary Key: id

Sample Data:
  Row 1: {"id":4,"slug":"jps-mobile-detailing-ceramic-coating","business_name":"JP's Mobile Detailing & Ceramic Coating","owner":"Jess Brister","phone":"7024203151","sms_phone":"+17024203151","email":"jpsmobiledetailing@hotmail.com","base_location":{"zip":"86442","city":"Bullhead City","state":"AZ"},"services":{"rv":true,"ppf":false,"auto":true,"boat":true,"ceramic":true,"paint_correction":true},"website_url":null,"gbp_url":"https://share.google/n5LFRsfL1Z46tVETr","facebook_url":null,"instagram_url":null,"youtube_url":null,"tiktok_url":null,"application_status":"pending","has_insurance":false,"source":"Referral","notes":null,"uploads":null,"business_license":null,"insurance_provider":null,"insurance_expiry":null,"service_radius_miles":25,"operating_hours":null,"emergency_contact":null,"total_jobs":0,"rating":null,"review_count":0,"created_at":"2025-08-23T02:36:12.779Z","updated_at":"2025-08-23T02:36:12.779Z","application_date":"2025-08-23T02:36:12.779Z","approved_date":null,"last_activity":"2025-08-23T02:36:12.779Z"}
  Row 2: {"id":10,"slug":"temp-1756061068969-zet561gly","business_name":"JP's Mobile Detailing & Ceramic Coatings","owner":"Jess Brister","phone":"5551231234","sms_phone":"+15551231234","email":"jpsmobiledetailing@hotmail.com","base_location":{"zip":"86442","city":"Bullhead City","state":"AZ"},"services":{"rv":true,"ppf":false,"auto":true,"boat":true,"ceramic":true,"paint_correction":true},"website_url":null,"gbp_url":"https://share.google/mPqBEkONXkntNxtlz","facebook_url":null,"instagram_url":null,"youtube_url":null,"tiktok_url":null,"application_status":"pending","has_insurance":false,"source":"Referral","notes":null,"uploads":["rv.png|2556518|image/png"],"business_license":null,"insurance_provider":null,"insurance_expiry":null,"service_radius_miles":25,"operating_hours":null,"emergency_contact":null,"total_jobs":0,"rating":null,"review_count":0,"created_at":"2025-08-24T18:44:28.971Z","updated_at":"2025-08-24T18:44:28.971Z","application_date":"2025-08-24T18:44:28.971Z","approved_date":null,"last_activity":"2025-08-24T18:44:28.971Z"}


=== AVAILABILITY ===
Rows: 0

Columns:
  id: integer NOT NULL DEFAULT nextval('availability_id_seq'::regclass)
  affiliate_id: integer NOT NULL
  date: date NOT NULL
  start_time: time without time zone NOT NULL
  end_time: time without time zone NOT NULL
  capacity: integer NOT NULL DEFAULT 1

Primary Key: id


=== BOOKINGS ===
Rows: 0

Columns:
  id: integer NOT NULL DEFAULT nextval('bookings_id_seq'::regclass)
  affiliate_id: integer NOT NULL
  customer_id: integer NULL
  service_id: integer NULL
  tier_id: integer NULL
  appointment_start: timestamp with time zone NOT NULL
  appointment_end: timestamp with time zone NOT NULL
  address_json: jsonb NOT NULL DEFAULT '{}'::jsonb
  status: character varying(20) NOT NULL DEFAULT 'pending'::character varying
  total_cents: integer NOT NULL DEFAULT 0
  stripe_payment_intent_id: text NULL
  created_at: timestamp with time zone NOT NULL DEFAULT now()
  updated_at: timestamp with time zone NOT NULL DEFAULT now()

Primary Key: id

Foreign Keys:
  customer_id -> clients.id
  service_id -> services.id
  tier_id -> service_tiers.id


=== BUSINESS_AREA ===
Rows: 2

Columns:
  id: integer NOT NULL DEFAULT nextval('business_area_id_seq'::regclass)
  slug: character varying NOT NULL
  city: character varying(100) NOT NULL
  state: character varying(2) NOT NULL
  zip: character varying(10) NULL

Primary Key: id

Sample Data:
  Row 1: {"id":1,"slug":"jps","city":"Bullhead City","state":"AZ","zip":"86442"}
  Row 2: {"id":2,"slug":"jps","city":"Laughlin","state":"NV","zip":"89029"}


=== CITIES ===
Rows: 1

Columns:
  id: bigint NOT NULL DEFAULT nextval('cities_id_seq'::regclass)
  name: text NOT NULL
  city_slug: text NOT NULL
  state_code: character(2) NOT NULL
  lat: double precision NULL
  lng: double precision NULL

Primary Key: id

Foreign Keys:
  state_code -> states.state_code

Sample Data:
  Row 1: {"id":"1","name":"Phoenix","city_slug":"phoenix","state_code":"AZ","lat":null,"lng":null}


=== CLIENTS ===
Rows: 0

Columns:
  id: integer NOT NULL DEFAULT nextval('clients_id_seq'::regclass)
  user_id: integer NOT NULL
  address: character varying(255) NULL
  preferences: jsonb NULL
  created_at: timestamp without time zone NULL DEFAULT CURRENT_TIMESTAMP
  updated_at: timestamp without time zone NULL DEFAULT CURRENT_TIMESTAMP

Primary Key: id

Foreign Keys:
  user_id -> users.id


=== LOCATION ===
Rows: 0

Columns:
  location_id: bigint NOT NULL DEFAULT nextval('location_location_id_seq'::regclass)
  affiliate_id: bigint NULL
  source_platform: text NOT NULL
  source_account_id: text NOT NULL
  source_location_id: text NOT NULL
  display_name: text NULL
  timezone: text NULL
  created_at: timestamp with time zone NULL DEFAULT now()

Primary Key: location_id


=== MDH_CONFIG ===
Rows: 1

Columns:
  id: integer NOT NULL DEFAULT nextval('mdh_config_id_seq'::regclass)
  email: character varying(255) NULL
  phone: character varying(50) NULL
  sms_phone: character varying(50) NULL
  logo_url: character varying(255) NULL
  favicon_url: character varying(255) NULL
  facebook: character varying(255) NULL
  instagram: character varying(255) NULL
  tiktok: character varying(255) NULL
  youtube: character varying(255) NULL
  created_at: timestamp without time zone NULL DEFAULT CURRENT_TIMESTAMP
  updated_at: timestamp without time zone NULL DEFAULT CURRENT_TIMESTAMP
  header_display: character varying(255) NULL
  location: character varying(255) NULL
  name: character varying(255) NULL
  tagline: text NULL
  services_description: text NULL DEFAULT 'auto detailing, boat & RV detailing, ceramic coating, and PPF'::text

Primary Key: id

Sample Data:
  Row 1: {"id":1,"email":"service@mobiledetailhub.com","phone":"(888) 555-1234","sms_phone":"+17024206066","logo_url":"/assets/logo.webp","favicon_url":"/assets/favicon.ico","facebook":"https://facebook.com/mobiledetailhub","instagram":"https://instagram.com/mobiledetailhub","tiktok":"https://tiktok.com/@mobiledetailhub","youtube":"https://youtube.com/mobiledetailhub","created_at":"2025-08-18T20:48:31.675Z","updated_at":"2025-08-18T20:48:31.675Z","header_display":"Mobile Detail Hub","location":"Anywhere, USA","name":"Mobile Detail Hub","tagline":null,"services_description":"auto detailing, boat & RV detailing, ceramic coating, and PPF"}


=== QUOTES ===
Rows: 0

Columns:
  id: integer NOT NULL DEFAULT nextval('quotes_id_seq'::regclass)
  affiliate_id: integer NOT NULL
  customer_id: integer NULL
  status: character varying(20) NOT NULL DEFAULT 'new'::character varying
  details_json: jsonb NOT NULL DEFAULT '{}'::jsonb
  estimated_total_cents: integer NULL
  created_at: timestamp with time zone NOT NULL DEFAULT now()
  updated_at: timestamp with time zone NOT NULL DEFAULT now()

Primary Key: id

Foreign Keys:
  customer_id -> clients.id


=== REVIEW ===
Rows: 0

Columns:
  review_pk: bigint NOT NULL DEFAULT nextval('review_review_pk_seq'::regclass)
  review_id: text NOT NULL
  location_id: bigint NULL
  rating: smallint NULL
  comment: text NULL
  reviewer_name: text NULL
  reviewer_profile: text NULL
  create_time: timestamp with time zone NULL
  update_time: timestamp with time zone NULL
  is_deleted: boolean NULL DEFAULT false
  source_platform: text NOT NULL
  raw: jsonb NULL

Primary Key: review_pk

Foreign Keys:
  location_id -> location.location_id


=== REVIEW_REPLY ===
Rows: 0

Columns:
  reply_pk: bigint NOT NULL DEFAULT nextval('review_reply_reply_pk_seq'::regclass)
  review_pk: bigint NULL
  reply_text: text NULL
  reply_update_time: timestamp with time zone NULL

Primary Key: reply_pk

Foreign Keys:
  review_pk -> review.review_pk


=== REVIEW_SYNC_STATE ===
Rows: 0

Columns:
  location_id: bigint NOT NULL
  last_seen_update: timestamp with time zone NULL

Primary Key: location_id

Foreign Keys:
  location_id -> location.location_id


=== REVIEWS ===
Rows: 0

Columns:
  id: integer NOT NULL DEFAULT nextval('reviews_id_seq'::regclass)
  affiliate_id: integer NOT NULL
  source: character varying(30) NOT NULL DEFAULT 'manual'::character varying
  rating: integer NULL
  text: text NULL
  author_name: text NULL
  created_at: timestamp with time zone NOT NULL DEFAULT now()

Primary Key: id


=== SERVICE_AREAS ===
Rows: 8

Columns:
  id: integer NOT NULL DEFAULT nextval('service_areas_id_seq'::regclass)
  state: character varying(50) NULL
  city: character varying(100) NULL
  zip: character varying(20) NULL
  created_at: timestamp without time zone NULL DEFAULT now()

Primary Key: id

Sample Data:
  Row 1: {"id":1,"state":"California","city":"Los Angeles","zip":"90210","created_at":"2025-08-22T01:59:48.137Z"}
  Row 2: {"id":2,"state":"California","city":"San Francisco","zip":"94102","created_at":"2025-08-22T01:59:48.138Z"}


=== SERVICE_TIERS ===
Rows: 0

Columns:
  id: integer NOT NULL DEFAULT nextval('service_tiers_id_seq'::regclass)
  service_id: integer NOT NULL
  tier_name: character varying(100) NOT NULL
  price_delta_cents: integer NOT NULL DEFAULT 0
  description: text NULL

Primary Key: id

Foreign Keys:
  service_id -> services.id


=== SERVICES ===
Rows: 0

Columns:
  id: integer NOT NULL DEFAULT nextval('services_id_seq'::regclass)
  affiliate_id: integer NULL
  category: character varying(50) NOT NULL
  name: character varying(200) NOT NULL
  description: text NULL
  base_price_cents: integer NOT NULL DEFAULT 0
  pricing_unit: character varying(20) NOT NULL DEFAULT 'flat'::character varying
  min_duration_min: integer NOT NULL DEFAULT 60
  active: boolean NOT NULL DEFAULT true

Primary Key: id


=== STATES ===
Rows: 3

Columns:
  state_code: character(2) NOT NULL
  name: text NOT NULL
  country_code: character(2) NOT NULL DEFAULT 'US'::bpchar

Primary Key: state_code

Sample Data:
  Row 1: {"state_code":"AZ","name":"Arizona","country_code":"US"}
  Row 2: {"state_code":"NV","name":"Nevada","country_code":"US"}


=== USERS ===
Rows: 1

Columns:
  id: integer NOT NULL DEFAULT nextval('users_id_seq'::regclass)
  email: character varying(255) NOT NULL
  name: character varying(255) NULL
  role: character varying(50) NOT NULL
  created_at: timestamp without time zone NULL DEFAULT CURRENT_TIMESTAMP
  updated_at: timestamp without time zone NULL DEFAULT CURRENT_TIMESTAMP
  is_admin: boolean NULL DEFAULT false
  password_hash: character varying(255) NULL
  phone: character varying(50) NULL

Primary Key: id

Sample Data:
  Row 1: {"id":4,"email":"admin@mobiledetailhub.com","name":"Brandan Coleman","role":"admin","created_at":"2025-08-21T16:13:43.692Z","updated_at":"2025-08-21T16:13:43.692Z","is_admin":true,"password_hash":"$2a$10$EAY3D9OdVXpYgby.ATOmheJwqrlTZ423Yg2a.qLzN1Ku1/oj2/LzS","phone":""}



{"version":3,"mappings":"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","names":["jsx","jsxs","useAutoSave","useState","useRef","useEffect","Fragment","Router","WebsiteContentProvider","useCallback","error","useMemo","API_BASE","makeRequest","startTransition","CAR_SERVICE_OPTIONS","createPortal","service","Edit2","Boat","createContext","useContext","value","ServicesTab","Link","z.object","z.string","z.email","z.enum","z.number","z.boolean","lazy","Suspense"],"ignoreList":[],"sources":["../../src/shared/ui/forms/AutoSaveInput.tsx","../../src/shared/utils/useAutoSave.ts","../../src/shared/utils/dateFormatter.ts","../../src/shared/utils/siteUtils.ts","../../src/shared/hooks/useMetaTags.ts","../../src/shared/hooks/useSEO.ts","../../src/features/services/components/BeforeAfterSlider.tsx","../../src/features/services/components/Process.tsx","../../src/features/services/utils/protectionComparison.ts","../../src/features/services/components/ProtectionComparisonChart.tsx","../../src/features/services/components/Results.tsx","../../src/features/services/components/ServiceCTA.tsx","../../src/features/services/components/ServiceHero.tsx","../../src/features/services/components/WhatItIs.tsx","../../src/app/pages/HomePage.tsx","../../src/features/header/pages/TenantPage.tsx","../../src/app/providers.tsx","../../src/features/tenantDashboard/components/DashboardHeader.tsx","../../src/features/tenantDashboard/components/DashboardLayout.tsx","../../src/features/tenantDashboard/utils/constants.ts","../../src/features/tenantDashboard/config/tabConfig.ts","../../src/features/tenantDashboard/components/DashboardTabs.tsx","../../src/features/tenantDashboard/tabs/customers/CustomersTab.tsx","../../src/features/tenantDashboard/api/locationsApi.ts","../../src/features/tenantDashboard/hooks/useTenantBusinessData.ts","../../src/shared/api/apiClient.ts","../../src/shared/data/states.ts","../../src/shared/utils/googleMaps.helpers.ts","../../src/features/tenantDashboard/tabs/locations/components/AddLocationModal.tsx","../../src/features/tenantDashboard/tabs/locations/components/DeleteLocationModal.tsx","../../src/features/tenantDashboard/tabs/locations/components/PrimaryServiceArea.tsx","../../src/features/tenantDashboard/tabs/locations/components/ServiceAreasList.tsx","../../src/features/tenantDashboard/tabs/locations/hooks/useGoogleMaps.ts","../../src/features/tenantDashboard/tabs/locations/hooks/useLocationState.ts","../../src/features/tenantDashboard/tabs/locations/LocationsTab.tsx","../../src/features/tenantDashboard/tabs/overview/components/QuickActions.tsx","../../src/features/tenantDashboard/tabs/overview/OverviewTab.tsx","../../src/features/tenantDashboard/tabs/profile/hooks/useProfileData.ts","../../src/features/tenantDashboard/tabs/profile/hooks/useAutoSaveField.ts","../../src/features/tenantDashboard/tabs/profile/components/AutoSaveField.tsx","../../src/features/tenantDashboard/tabs/profile/components/ProfileForm.tsx","../../src/features/tenantDashboard/tabs/profile/ProfileTab.tsx","../../src/features/tenantDashboard/tabs/schedule/api/appointments.ts","../../src/features/tenantDashboard/tabs/schedule/api/blockedDays.ts","../../src/features/tenantDashboard/tabs/schedule/api/timeBlocks.ts","../../src/features/tenantDashboard/tabs/schedule/components/modals/AppointmentModal.tsx","../../src/features/tenantDashboard/tabs/schedule/components/scheduleUtils.ts","../../src/features/tenantDashboard/tabs/schedule/components/DayView.tsx","../../src/features/tenantDashboard/tabs/schedule/components/AppointmentCard.tsx","../../src/features/tenantDashboard/tabs/schedule/components/MonthView.tsx","../../src/features/tenantDashboard/tabs/schedule/components/ScheduleLoadingState.tsx","../../src/features/tenantDashboard/tabs/schedule/components/ScheduleNavigationHeader.tsx","../../src/features/tenantDashboard/tabs/schedule/components/WeekView.tsx","../../src/features/tenantDashboard/tabs/schedule/components/ScheduleGrid.tsx","../../src/features/tenantDashboard/tabs/schedule/components/ScheduleHeader.tsx","../../src/features/tenantDashboard/tabs/schedule/components/ScheduleSidebar.tsx","../../src/features/tenantDashboard/tabs/schedule/hooks/useScheduleData.ts","../../src/features/tenantDashboard/tabs/schedule/ScheduleTab.tsx","../../src/features/tenantDashboard/tabs/services/components/CategorySelector.tsx","../../src/features/tenantDashboard/tabs/services/components/DeleteServiceModal.tsx","../../src/features/tenantDashboard/tabs/services/components/FeatureDropdown.tsx","../../src/features/tenantDashboard/tabs/services/types/ServiceClasses.ts","../../src/features/tenantDashboard/tabs/services/components/MultiTierPricingModal.tsx","../../src/features/tenantDashboard/tabs/services/components/ServiceSelector.tsx","../../src/features/tenantDashboard/tabs/services/components/VehicleSelector.tsx","../../src/features/tenantDashboard/tabs/services/hooks/useServicesData.ts","../../src/features/tenantDashboard/tabs/services/SimpleFixedServicesTab.tsx","../../src/features/tenantDashboard/api/websiteContentApi.ts","../../src/features/tenantDashboard/api/reviewsApi.ts","../../src/features/tenantDashboard/tabs/website/components/AddReviewForm.tsx","../../src/features/tenantDashboard/tabs/website/hooks/useWebsiteContentData.ts","../../src/features/tenantDashboard/tabs/website/contexts/WebsiteContentContext.tsx","../../src/features/tenantDashboard/tabs/website/components/FAQItemAutoSaveField.tsx","../../src/features/tenantDashboard/tabs/website/hooks/useWebsiteContentField.ts","../../src/features/tenantDashboard/tabs/website/components/WebsiteAutoSaveField.tsx","../../src/features/tenantDashboard/tabs/website/components/FAQSection.tsx","../../src/features/tenantDashboard/tabs/website/components/GallerySection.tsx","../../src/features/tenantDashboard/api/healthApi.ts","../../src/features/tenantDashboard/tabs/website/components/HealthTab.tsx","../../src/features/tenantDashboard/tabs/website/components/HeroSection.tsx","../../src/features/tenantDashboard/tabs/website/components/RemoveReviewTab.tsx","../../src/features/tenantDashboard/tabs/website/components/ReviewsContent.tsx","../../src/features/tenantDashboard/tabs/website/components/ReviewsSection.tsx","../../src/features/tenantDashboard/tabs/website/components/ServicesSection.tsx","../../src/features/tenantDashboard/tabs/website/WebsiteContentTab.tsx","../../src/features/tenantDashboard/tabs/website/WebsiteDomainTab.tsx","../../src/features/tenantDashboard/tabs/website/WebsiteHealthTab.tsx","../../src/features/tenantDashboard/api/analytics.ts","../../src/features/tenantDashboard/tabs/services/hooks/useTenantId.ts","../../src/features/tenantDashboard/tabs/website/WebsitePerformanceTab.tsx","../../src/features/tenantDashboard/tabs/website/WebsiteTab.tsx","../../src/features/tenantDashboard/components/TabContent.tsx","../../src/features/tenantDashboard/api/dashboard.api.ts","../../src/features/tenantDashboard/components/DashboardPage.tsx","../../src/features/tenantOnboarding/components/ApplicationHeader.tsx","../../src/features/tenantOnboarding/components/BusinessInformationSection.tsx","../../src/features/tenantOnboarding/components/PersonalInformationSection.tsx","../../src/features/tenantOnboarding/types/index.ts","../../src/features/tenantOnboarding/components/PlanSelectionSection.tsx","../../src/features/tenantOnboarding/components/StepProgress.tsx","../../src/features/tenantOnboarding/components/SuccessPage.tsx","../../src/shared/utils/loadDefaults.ts","../../src/features/tenantOnboarding/hooks/useAutoSave.ts","../../src/features/tenantOnboarding/utils/validation.ts","../../src/features/tenantOnboarding/api/payments.api.ts","../../src/features/tenantOnboarding/components/PaymentSection.tsx","../../src/features/tenantOnboarding/components/TenantApplicationPage.tsx","../../src/features/services/hooks/useServicePage.ts","../../src/app/pages/ServicePage.tsx","../../src/tenant-app/TenantApp.tsx","../../src/tenant-app/main.tsx"],"sourcesContent":["import React from 'react';\r\nimport { AlertCircle, CheckCircle, Loader2 } from 'lucide-react';\r\n\r\n/**\r\n * Generic auto-save input component with visual feedback\r\n * \r\n * Features:\r\n * - Green checkmark when value is saved\r\n * - Blue spinning loader while saving\r\n * - Red alert icon on error\r\n * - \"Saving...\" text below field during save\r\n * - Error message display\r\n */\r\n\r\ninterface AutoSaveInputProps {\r\n  label: string;\r\n  type?: 'text' | 'email' | 'tel' | 'url' | 'date';\r\n  value: string;\r\n  onChange: (value: string) => void;\r\n  isSaving: boolean;\r\n  error: string | null;\r\n  placeholder?: string;\r\n  className?: string;\r\n  disabled?: boolean;\r\n}\r\n\r\nexport const AutoSaveInput: React.FC<AutoSaveInputProps> = ({\r\n  label,\r\n  type = 'text',\r\n  value,\r\n  onChange,\r\n  isSaving,\r\n  error,\r\n  placeholder,\r\n  className = '',\r\n  disabled = false,\r\n}) => {\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    onChange(e.target.value);\r\n  };\r\n\r\n  const getStatusIcon = () => {\r\n    if (isSaving) {\r\n      return <Loader2 className=\"h-4 w-4 text-blue-500 animate-spin\" />;\r\n    }\r\n    if (error) {\r\n      return <AlertCircle className=\"h-4 w-4 text-red-500\" />;\r\n    }\r\n    if (value && value.trim() !== '') {\r\n      return <CheckCircle className=\"h-4 w-4 text-green-500\" />;\r\n    }\r\n    return null;\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      <label className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n        {label}\r\n      </label>\r\n      <div className=\"relative\">\r\n        <input\r\n          type={type}\r\n          value={value}\r\n          onChange={handleChange}\r\n          placeholder={placeholder}\r\n          disabled={disabled}\r\n          className={`w-full px-3 py-2 pr-10 border rounded-md bg-stone-700 text-white focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent ${\r\n            error ? 'border-red-500' : 'border-stone-600'\r\n          } ${disabled ? 'opacity-50 cursor-not-allowed' : ''} ${className}`}\r\n        />\r\n        <div className=\"absolute inset-y-0 right-0 flex items-center pr-3\">\r\n          {getStatusIcon()}\r\n        </div>\r\n      </div>\r\n      {error && (\r\n        <p className=\"mt-1 text-sm text-red-400\">{error}</p>\r\n      )}\r\n      {isSaving && (\r\n        <p className=\"mt-1 text-sm text-blue-400\">Saving...</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n","import { useEffect, useRef, useState } from 'react';\r\n\r\ninterface UseAutoSaveOptions {\r\n  debounce?: number;\r\n}\r\n\r\nexport function useAutoSave<T>(\r\n  initialValue: T,\r\n  saveFn: (value: T) => Promise<unknown>,\r\n  options: UseAutoSaveOptions = {}\r\n) {\r\n  const { debounce = 800 } = options;\r\n  const [value, setValue] = useState<T>(initialValue);\r\n  const [isSaving, setIsSaving] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const timeoutRef = useRef<number | null>(null);\r\n  const isFirstRender = useRef(true);\r\n  const previousInitialValue = useRef<T>(initialValue);\r\n\r\n  // Reset value and first run flag if initialValue changes (e.g., after async load)\r\n  // Only reset if the initialValue is actually different to prevent infinite loops\r\n  useEffect(() => {\r\n    if (previousInitialValue.current !== initialValue) {\r\n      setValue(initialValue);\r\n      isFirstRender.current = true;\r\n      previousInitialValue.current = initialValue;\r\n    }\r\n  }, [initialValue]);\r\n\r\n  useEffect(() => {\r\n    // Only trigger saveFn if this is not the initial mount or after initialValue changes.\r\n    if (isFirstRender.current) {\r\n      isFirstRender.current = false;\r\n      return;\r\n    }\r\n    setIsSaving(true);\r\n    setError(null);\r\n    if (timeoutRef.current) clearTimeout(timeoutRef.current);\r\n    timeoutRef.current = window.setTimeout(() => {\r\n      void (async () => {\r\n        try {\r\n          await saveFn(value);\r\n          setIsSaving(false);\r\n        } catch (err: unknown) {\r\n          const errorMessage = err instanceof Error ? err.message : 'Failed to save';\r\n          setError(errorMessage);\r\n          setIsSaving(false);\r\n        }\r\n      })();\r\n    }, debounce);\r\n    return () => {\r\n      if (timeoutRef.current) clearTimeout(timeoutRef.current);\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps -- Only re-run when value changes, not when saveFunction changes\r\n  }, [value]);\r\n\r\n  return { value, setValue, isSaving, error };\r\n}\r\n","/**\r\n * Date Formatting Utilities\r\n * Centralized date formatting functions to ensure consistency across the app\r\n */\r\n\r\n/**\r\n * Get today's date as YYYY-MM-DD string (local timezone)\r\n */\r\nexport function getToday(): string {\r\n  const now = new Date();\r\n  return formatDateToYYYYMMDD(now);\r\n}\r\n\r\n/**\r\n * Parse YYYY-MM-DD string as local date (avoids timezone issues)\r\n * @param dateString - Date string in YYYY-MM-DD format\r\n * @returns Date object in local timezone\r\n */\r\nexport function parseLocalDate(dateString: string): Date {\r\n  const [year = 0, month = 1, day = 1] = dateString.split('-').map(Number);\r\n  return new Date(year, month - 1, day);\r\n}\r\n\r\n/**\r\n * Format Date object as YYYY-MM-DD string\r\n * @param date - Date object\r\n * @returns Date string in YYYY-MM-DD format\r\n */\r\nexport function formatDateToYYYYMMDD(date: Date): string {\r\n  const year = date.getFullYear();\r\n  const month = String(date.getMonth() + 1).padStart(2, '0');\r\n  const day = String(date.getDate()).padStart(2, '0');\r\n  return `${year}-${month}-${day}`;\r\n}\r\n\r\n/**\r\n * Format date for display (e.g., \"January 15, 2025\")\r\n * @param date - Date object or YYYY-MM-DD string\r\n * @param options - Intl.DateTimeFormatOptions\r\n * @returns Formatted date string\r\n */\r\nexport function formatDateForDisplay(\r\n  date: Date | string,\r\n  options: Intl.DateTimeFormatOptions = {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric'\r\n  }\r\n): string {\r\n  const dateObj = typeof date === 'string' ? parseLocalDate(date) : date;\r\n  return dateObj.toLocaleDateString('en-US', options);\r\n}\r\n\r\n/**\r\n * Format date for short display (e.g., \"Jan 15, 2025\")\r\n * @param date - Date object or YYYY-MM-DD string\r\n * @returns Short formatted date string\r\n */\r\nexport function formatDateShort(date: Date | string): string {\r\n  return formatDateForDisplay(date, {\r\n    year: 'numeric',\r\n    month: 'short',\r\n    day: 'numeric'\r\n  });\r\n}\r\n\r\n/**\r\n * Format date for compact display (e.g., \"1/15/25\")\r\n * @param date - Date object or YYYY-MM-DD string\r\n * @returns Compact formatted date string\r\n */\r\nexport function formatDateCompact(date: Date | string): string {\r\n  return formatDateForDisplay(date, {\r\n    year: '2-digit',\r\n    month: 'numeric',\r\n    day: 'numeric'\r\n  });\r\n}\r\n\r\n/**\r\n * Get month and year display (e.g., \"January 2025\")\r\n * @param date - Date object or YYYY-MM-DD string\r\n * @returns Month and year string\r\n */\r\nexport function formatMonthYear(date: Date | string): string {\r\n  return formatDateForDisplay(date, {\r\n    year: 'numeric',\r\n    month: 'long'\r\n  });\r\n}\r\n\r\n/**\r\n * Get week dates (Monday to Sunday) for a given date\r\n * @param dateString - Date string in YYYY-MM-DD format\r\n * @returns Array of 7 date strings (Monday to Sunday)\r\n */\r\nexport function getWeekDates(dateString: string): string[] {\r\n  const parts = dateString.split('-').map(Number);\r\n  const year = parts[0] ?? 0;\r\n  const month = parts[1] ?? 1;\r\n  const day = parts[2] ?? 1;\r\n  \r\n  const selectedDate = new Date(year, month - 1, day);\r\n  const dayOfWeek = selectedDate.getDay();\r\n  \r\n  // Calculate offset to Monday (0=Sunday, 1=Monday, etc.)\r\n  const mondayOffset = dayOfWeek === 0 ? -6 : 1 - dayOfWeek;\r\n  \r\n  const weekDates: string[] = [];\r\n  for (let i = 0; i < 7; i++) {\r\n    const weekDate = new Date(year, month - 1, day + mondayOffset + i);\r\n    weekDates.push(formatDateToYYYYMMDD(weekDate));\r\n  }\r\n  \r\n  return weekDates;\r\n}\r\n\r\n/**\r\n * Get week range display (e.g., \"Jan 15 - Jan 21, 2025\")\r\n * @param dateString - Date string in YYYY-MM-DD format\r\n * @returns Week range string\r\n */\r\nexport function formatWeekRange(dateString: string): string {\r\n  const weekDates = getWeekDates(dateString);\r\n  \r\n  // getWeekDates always returns 7 dates (Monday-Sunday)\r\n  const firstDate = weekDates[0];\r\n  const lastDate = weekDates[6];\r\n  \r\n  if (!firstDate || !lastDate) {\r\n    return '';\r\n  }\r\n  \r\n  const startDate = parseLocalDate(firstDate);\r\n  const endDate = parseLocalDate(lastDate);\r\n  \r\n  const startFormatted = startDate.toLocaleDateString('en-US', { \r\n    month: 'short', \r\n    day: 'numeric' \r\n  });\r\n  \r\n  const endFormatted = endDate.toLocaleDateString('en-US', { \r\n    month: 'short', \r\n    day: 'numeric',\r\n    year: 'numeric' \r\n  });\r\n  \r\n  return `${startFormatted} - ${endFormatted}`;\r\n}\r\n\r\n/**\r\n * Check if a date is today\r\n * @param date - Date object or YYYY-MM-DD string\r\n * @returns True if date is today\r\n */\r\nexport function isToday(date: Date | string): boolean {\r\n  const dateString = typeof date === 'string' ? date : formatDateToYYYYMMDD(date);\r\n  return dateString === getToday();\r\n}\r\n\r\n/**\r\n * Check if a date is in the past\r\n * @param date - Date object or YYYY-MM-DD string\r\n * @returns True if date is before today\r\n */\r\nexport function isPast(date: Date | string): boolean {\r\n  const dateString = typeof date === 'string' ? date : formatDateToYYYYMMDD(date);\r\n  return dateString < getToday();\r\n}\r\n\r\n/**\r\n * Check if a date is in the future\r\n * @param date - Date object or YYYY-MM-DD string\r\n * @returns True if date is after today\r\n */\r\nexport function isFuture(date: Date | string): boolean {\r\n  const dateString = typeof date === 'string' ? date : formatDateToYYYYMMDD(date);\r\n  return dateString > getToday();\r\n}\r\n\r\n/**\r\n * Get the day name from a date (e.g., \"Monday\")\r\n * @param date - Date object or YYYY-MM-DD string\r\n * @returns Day name\r\n */\r\nexport function getDayName(date: Date | string): string {\r\n  const dateObj = typeof date === 'string' ? parseLocalDate(date) : date;\r\n  return dateObj.toLocaleDateString('en-US', { weekday: 'long' });\r\n}\r\n\r\n/**\r\n * Get the short day name from a date (e.g., \"Mon\")\r\n * @param date - Date object or YYYY-MM-DD string\r\n * @returns Short day name\r\n */\r\nexport function getDayNameShort(date: Date | string): string {\r\n  const dateObj = typeof date === 'string' ? parseLocalDate(date) : date;\r\n  return dateObj.toLocaleDateString('en-US', { weekday: 'short' });\r\n}\r\n\r\n/**\r\n * Add days to a date\r\n * @param date - Date object or YYYY-MM-DD string\r\n * @param days - Number of days to add (can be negative)\r\n * @returns New date string in YYYY-MM-DD format\r\n */\r\nexport function addDays(date: Date | string, days: number): string {\r\n  const dateObj = typeof date === 'string' ? parseLocalDate(date) : new Date(date);\r\n  dateObj.setDate(dateObj.getDate() + days);\r\n  return formatDateToYYYYMMDD(dateObj);\r\n}\r\n\r\n/**\r\n * Add months to a date\r\n * @param date - Date object or YYYY-MM-DD string\r\n * @param months - Number of months to add (can be negative)\r\n * @returns New date string in YYYY-MM-DD format\r\n */\r\nexport function addMonths(date: Date | string, months: number): string {\r\n  const dateObj = typeof date === 'string' ? parseLocalDate(date) : new Date(date);\r\n  dateObj.setMonth(dateObj.getMonth() + months);\r\n  return formatDateToYYYYMMDD(dateObj);\r\n}\r\n\r\n","/**\r\n * Site Data Utilities\r\n * Industry-agnostic functions to transform and format data from site.json for display purposes\r\n * All functions accept MainSiteConfig to support multi-industry architecture\r\n */\r\n\r\nimport type { MainSiteConfig } from '@/shared/types/location';\r\n\r\nimport { formatPhoneNumber } from './phoneFormatter';\r\n\r\n/**\r\n * Formats contact information from site.json for display\r\n */\r\nexport function formatContactInfo(siteConfig: MainSiteConfig) {\r\n  return {\r\n    phone: siteConfig.contact?.phone ? formatPhoneNumber(siteConfig.contact.phone) : '',\r\n    email: siteConfig.contact?.email || '',\r\n    phoneRaw: siteConfig.contact?.phone || '', // Raw phone for tel: links\r\n  };\r\n}\r\n\r\n/**\r\n * Formats social media links for display\r\n */\r\nexport function formatSocialMedia(siteConfig: MainSiteConfig) {\r\n  return {\r\n    facebook: siteConfig.socials?.facebook || '',\r\n    instagram: siteConfig.socials?.instagram || '',\r\n    tiktok: siteConfig.socials?.tiktok || '',\r\n    youtube: siteConfig.socials?.youtube || '',\r\n  };\r\n}\r\n\r\n/**\r\n * Converts relative URLs to absolute URLs for SEO\r\n * Uses current window location to determine the domain (works for any industry/subdomain)\r\n */\r\nexport function getAbsoluteUrl(relativeUrl: string): string {\r\n  if (!relativeUrl) return '';\r\n  \r\n  // If it's already an absolute URL, return as is\r\n  if (relativeUrl.startsWith('http://') || relativeUrl.startsWith('https://')) {\r\n    return relativeUrl;\r\n  }\r\n  \r\n  // Use current window location (works for all industries/subdomains)\r\n  if (typeof window !== 'undefined') {\r\n    return `${window.location.protocol}//${window.location.host}${relativeUrl}`;\r\n  }\r\n  \r\n  // Fallback for SSR (should rarely be hit)\r\n  return relativeUrl;\r\n}\r\n\r\n/**\r\n * Formats SEO data for display\r\n */\r\nexport function formatSEO(siteConfig: MainSiteConfig) {\r\n  return {\r\n    title: siteConfig.seo.title || siteConfig.brand || '',\r\n    description: siteConfig.seo.description || '',\r\n    keywords: siteConfig.seo.keywords || [],\r\n    canonical: getAbsoluteUrl(siteConfig.seo.canonicalPath || '/'),\r\n    ogImage: getAbsoluteUrl(siteConfig.seo.ogImage || ''),\r\n  };\r\n}\r\n\r\n/**\r\n * Formats hero section data for display\r\n */\r\nexport function formatHero(siteConfig: MainSiteConfig) {\r\n  return {\r\n    h1: siteConfig.hero.h1 || '',\r\n    images: siteConfig.hero.images || [],\r\n    finder: {\r\n      placeholder: siteConfig.finder?.placeholder || '',\r\n      sub: siteConfig.finder?.sub || '',\r\n    },\r\n  };\r\n}\r\n\r\n/**\r\n * Formats services grid data for display\r\n */\r\nexport function formatServices(siteConfig: MainSiteConfig) {\r\n  return siteConfig.servicesGrid || [];\r\n}\r\n\r\n/**\r\n * Formats reviews data for display\r\n */\r\nexport function formatReviews(siteConfig: MainSiteConfig) {\r\n  return {\r\n    title: siteConfig.reviews?.title || '',\r\n    subtitle: siteConfig.reviews?.subtitle || '',\r\n    ratingValue: siteConfig.reviews?.ratingValue || '',\r\n    reviewCount: siteConfig.reviews?.reviewCount || 0,\r\n    source: siteConfig.reviews?.source || '',\r\n  };\r\n}\r\n\r\n/**\r\n * Formats FAQ data for display\r\n */\r\nexport function formatFAQ(siteConfig: MainSiteConfig) {\r\n  return {\r\n    title: siteConfig.faq?.title || '',\r\n    subtitle: siteConfig.faq?.subtitle || '',\r\n  };\r\n}\r\n\r\n/**\r\n * Gets formatted business information\r\n */\r\nexport function getBusinessInfo(siteConfig: MainSiteConfig) {\r\n  return {\r\n    name: siteConfig.brand || '',\r\n    logo: siteConfig.logo.url || '',\r\n    logoAlt: siteConfig.logo.alt || '',\r\n    slug: siteConfig.slug || '',\r\n    urlPath: siteConfig.urlPath || '/',\r\n  };\r\n}\r\n\r\n/**\r\n * Comprehensive site data formatter - formats all site data at once\r\n */\r\nexport function formatSiteData(siteConfig: MainSiteConfig) {\r\n  return {\r\n    business: getBusinessInfo(siteConfig),\r\n    contact: formatContactInfo(siteConfig),\r\n    socials: formatSocialMedia(siteConfig),\r\n    seo: formatSEO(siteConfig),\r\n    hero: formatHero(siteConfig),\r\n    services: formatServices(siteConfig),\r\n    reviews: formatReviews(siteConfig),\r\n    faq: formatFAQ(siteConfig),\r\n  };\r\n}\r\n","import { useEffect } from 'react';\r\n\r\nimport { useData } from '@/shared/hooks/useData';\r\nimport { useIndustrySiteData } from '@/shared/hooks/useIndustrySiteData';\r\nimport { getAbsoluteUrl } from '@/shared/utils';\r\n\r\nexport interface UseMetaTagsOptions {\r\n  /** Custom page title (for OG/Twitter tags) */\r\n  title?: string;\r\n  /** Custom meta description */\r\n  description?: string;\r\n  /** Custom meta keywords */\r\n  keywords?: string[];\r\n  /** Custom Open Graph image */\r\n  ogImage?: string;\r\n  /** Custom Twitter image (defaults to ogImage if not provided) */\r\n  twitterImage?: string;\r\n  /** Custom canonical path */\r\n  canonicalPath?: string;\r\n}\r\n\r\n/**\r\n * Hook to manage SEO meta tags\r\n * \r\n * Automatically sets:\r\n * - Meta description\r\n * - Meta keywords\r\n * - Open Graph tags (title, description, image)\r\n * - Twitter Card tags (title, description, image)\r\n * - Canonical URL\r\n * \r\n * @example\r\n * // Use defaults from site config\r\n * useMetaTags();\r\n * \r\n * @example\r\n * // Custom description\r\n * useMetaTags({ \r\n *   description: 'Custom page description for this specific page' \r\n * });\r\n * \r\n * @example\r\n * // Full customization for a specific page\r\n * useMetaTags({\r\n *   title: 'Contact Us - Business Name',\r\n *   description: 'Get in touch with our team',\r\n *   ogImage: '/images/contact-hero.jpg',\r\n *   canonicalPath: '/contact'\r\n * });\r\n */\r\nexport const useMetaTags = (options: UseMetaTagsOptions = {}) => {\r\n  const { siteData } = useIndustrySiteData();\r\n  const { businessName } = useData();\r\n\r\n  const {\r\n    title: customTitle,\r\n    description: customDescription,\r\n    keywords: customKeywords,\r\n    ogImage: customOgImage,\r\n    twitterImage: customTwitterImage,\r\n    canonicalPath: customCanonicalPath,\r\n  } = options;\r\n\r\n  useEffect(() => {\r\n    if (!siteData) return;\r\n\r\n    // Determine the page title (for OG/Twitter, not browser tab)\r\n    const pageTitle = customTitle || businessName || siteData.seo.title;\r\n    const description = customDescription || siteData.seo.description;\r\n    const keywords = customKeywords || siteData.seo.keywords;\r\n    const ogImage = customOgImage || siteData.seo.ogImage;\r\n    const twitterImage = customTwitterImage || siteData.seo.twitterImage || ogImage;\r\n    const canonicalPath = customCanonicalPath || siteData.seo.canonicalPath;\r\n\r\n    // Update meta description\r\n    updateMetaTag('meta-desc', 'content', description);\r\n\r\n    // Update meta keywords\r\n    if (keywords && keywords.length > 0) {\r\n      updateMetaTag('meta-keywords', 'content', keywords.join(', '));\r\n    }\r\n\r\n    // Update Open Graph tags\r\n    updateMetaTag('og-title', 'content', pageTitle);\r\n    updateMetaTag('og-desc', 'content', description);\r\n    \r\n    if (ogImage) {\r\n      const absoluteImageUrl = getAbsoluteUrl(ogImage);\r\n      updateMetaTag('og-image', 'content', absoluteImageUrl);\r\n    }\r\n\r\n    // Update Twitter Card tags\r\n    updateMetaTag('tw-title', 'content', pageTitle);\r\n    updateMetaTag('tw-desc', 'content', description);\r\n    \r\n    if (twitterImage) {\r\n      const absoluteImageUrl = getAbsoluteUrl(twitterImage);\r\n      updateMetaTag('tw-image', 'content', absoluteImageUrl);\r\n    }\r\n\r\n    // Update canonical URL\r\n    if (canonicalPath) {\r\n      const canonicalElement = document.getElementById('canonical-link');\r\n      if (canonicalElement) {\r\n        const domain = window.location.host;\r\n        canonicalElement.setAttribute('href', `https://${domain}${canonicalPath}`);\r\n      }\r\n    }\r\n\r\n  }, [\r\n    siteData,\r\n    businessName,\r\n    customTitle,\r\n    customDescription,\r\n    customKeywords,\r\n    customOgImage,\r\n    customTwitterImage,\r\n    customCanonicalPath,\r\n  ]);\r\n\r\n  return {\r\n    title: customTitle || businessName || siteData?.seo.title,\r\n    description: customDescription || siteData?.seo.description,\r\n    keywords: customKeywords || siteData?.seo.keywords,\r\n  };\r\n};\r\n\r\n/**\r\n * Update a meta tag by element ID\r\n */\r\nfunction updateMetaTag(elementId: string, attribute: string, value: string): void {\r\n  const element = document.getElementById(elementId);\r\n  if (element) {\r\n    element.setAttribute(attribute, value);\r\n  }\r\n}\r\n\r\n/**\r\n * Utility function to manually update meta description\r\n * Use this for one-off updates outside of React components\r\n */\r\nexport const setMetaDescription = (description: string): void => {\r\n  updateMetaTag('meta-desc', 'content', description);\r\n};\r\n\r\n/**\r\n * Utility function to manually update Open Graph image\r\n * Use this for one-off updates outside of React components\r\n */\r\nexport const setOgImage = (imageUrl: string): void => {\r\n  const absoluteUrl = getAbsoluteUrl(imageUrl);\r\n  updateMetaTag('og-image', 'content', absoluteUrl);\r\n};\r\n\r\n","import { useBrowserTab } from './useBrowserTab';\r\nimport { useMetaTags } from './useMetaTags';\r\n\r\nexport interface UseSEOOptions {\r\n  /** Custom page title (overrides business name) */\r\n  title?: string;\r\n  /** Custom favicon URL */\r\n  favicon?: string;\r\n  /** Custom meta description */\r\n  description?: string;\r\n  /** Custom meta keywords */\r\n  keywords?: string[];\r\n  /** Custom Open Graph image */\r\n  ogImage?: string;\r\n  /** Custom Twitter image */\r\n  twitterImage?: string;\r\n  /** Custom canonical path */\r\n  canonicalPath?: string;\r\n  /** Skip browser tab updates (title + favicon) */\r\n  skipBrowserTab?: boolean;\r\n  /** Skip meta tag updates */\r\n  skipMetaTags?: boolean;\r\n}\r\n\r\n/**\r\n * Convenience hook that manages all SEO metadata\r\n * \r\n * This is a wrapper around useBrowserTab + useMetaTags for convenience.\r\n * For more granular control, use those hooks directly.\r\n * \r\n * Manages:\r\n * - Browser tab title and favicon\r\n * - Meta description, keywords\r\n * - Open Graph tags\r\n * - Twitter Card tags\r\n * - Canonical URL\r\n * \r\n * @example\r\n * // Use defaults (loads from site config + tenant data)\r\n * useSEO();\r\n * \r\n * @example\r\n * // Custom title and description\r\n * useSEO({\r\n *   title: 'Contact Us - Business Name',\r\n *   description: 'Get in touch with our team'\r\n * });\r\n * \r\n * @example\r\n * // Only update meta tags, skip browser tab\r\n * useSEO({\r\n *   description: 'Custom description',\r\n *   skipBrowserTab: true\r\n * });\r\n */\r\nexport const useSEO = (options: UseSEOOptions = {}) => {\r\n  const {\r\n    title,\r\n    favicon,\r\n    description,\r\n    keywords,\r\n    ogImage,\r\n    twitterImage,\r\n    canonicalPath,\r\n    skipBrowserTab = false,\r\n    skipMetaTags = false,\r\n  } = options;\r\n\r\n  // Update browser tab (title + favicon)\r\n  const browserTab = useBrowserTab(\r\n    skipBrowserTab\r\n      ? { useBusinessName: false }\r\n      : { title, favicon }\r\n  );\r\n\r\n  // Update meta tags (description, OG, Twitter, etc.)\r\n  const metaTags = useMetaTags(\r\n    skipMetaTags\r\n      ? {}\r\n      : {\r\n          title,\r\n          description,\r\n          keywords,\r\n          ogImage,\r\n          twitterImage,\r\n          canonicalPath,\r\n        }\r\n  );\r\n\r\n  return {\r\n    ...browserTab,\r\n    ...metaTags,\r\n  };\r\n};\r\n","import React, { useEffect, useRef, useState } from 'react';\r\n\r\ninterface BeforeAfterSliderProps {\r\n  beforeImage: string;\r\n  afterImage: string;\r\n  beforeLabel?: string;\r\n  afterLabel?: string;\r\n  className?: string;\r\n}\r\n\r\nconst BeforeAfterSlider: React.FC<BeforeAfterSliderProps> = ({\r\n  beforeImage,\r\n  afterImage,\r\n  beforeLabel = \"BEFORE\",\r\n  afterLabel = \"AFTER\",\r\n  className = \"\"\r\n}) => {\r\n  const [sliderPosition, setSliderPosition] = useState(50);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n\r\n  const handleMouseMove = (e: React.MouseEvent) => {\r\n    if (!isDragging || !containerRef.current) return;\r\n    \r\n    const rect = containerRef.current.getBoundingClientRect();\r\n    const x = e.clientX - rect.left;\r\n    const percentage = (x / rect.width) * 100;\r\n    setSliderPosition(Math.max(0, Math.min(100, percentage)));\r\n  };\r\n\r\n  const handleMouseDown = () => {\r\n    setIsDragging(true);\r\n  };\r\n\r\n  const handleMouseUp = () => {\r\n    setIsDragging(false);\r\n  };\r\n\r\n  const handleTouchMove = (e: React.TouchEvent) => {\r\n    if (!containerRef.current || !e.touches[0]) return;\r\n    \r\n    const rect = containerRef.current.getBoundingClientRect();\r\n    const x = e.touches[0].clientX - rect.left;\r\n    const percentage = (x / rect.width) * 100;\r\n    setSliderPosition(Math.max(0, Math.min(100, percentage)));\r\n  };\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent) => {\r\n    switch (e.key) {\r\n      case 'ArrowLeft':\r\n        e.preventDefault();\r\n        setSliderPosition(Math.max(0, sliderPosition - 1));\r\n        break;\r\n      case 'ArrowRight':\r\n        e.preventDefault();\r\n        setSliderPosition(Math.min(100, sliderPosition + 1));\r\n        break;\r\n      case 'Home':\r\n        e.preventDefault();\r\n        setSliderPosition(0);\r\n        break;\r\n      case 'End':\r\n        e.preventDefault();\r\n        setSliderPosition(100);\r\n        break;\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const handleGlobalMouseUp = () => { setIsDragging(false); };\r\n    const handleGlobalMouseMove = (e: MouseEvent) => {\r\n      if (!isDragging || !containerRef.current) return;\r\n      \r\n      const rect = containerRef.current.getBoundingClientRect();\r\n      const x = e.clientX - rect.left;\r\n      const percentage = (x / rect.width) * 100;\r\n      setSliderPosition(Math.max(0, Math.min(100, percentage)));\r\n    };\r\n\r\n    if (isDragging) {\r\n      document.addEventListener('mousemove', handleGlobalMouseMove);\r\n      document.addEventListener('mouseup', handleGlobalMouseUp);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener('mousemove', handleGlobalMouseMove);\r\n      document.removeEventListener('mouseup', handleGlobalMouseUp);\r\n    };\r\n  }, [isDragging]);\r\n\r\n  return (\r\n    <div className={`relative w-full aspect-[3/2] rounded-2xl overflow-hidden bg-stone-700 ring-1 ring-white/10 ${className}`}>\r\n      <div \r\n        ref={containerRef}\r\n        className=\"relative w-full h-full cursor-col-resize select-none\"\r\n        role=\"slider\"\r\n        tabIndex={0}\r\n        aria-label=\"Before and after image slider\"\r\n        aria-valuenow={sliderPosition}\r\n        aria-valuemin={0}\r\n        aria-valuemax={100}\r\n        aria-valuetext={`${Math.round(sliderPosition)}% - showing ${sliderPosition < 50 ? 'before' : 'after'} image`}\r\n        aria-orientation=\"horizontal\"\r\n        onMouseMove={handleMouseMove}\r\n        onMouseDown={handleMouseDown}\r\n        onMouseUp={handleMouseUp}\r\n        onTouchMove={handleTouchMove}\r\n        onTouchStart={() => { setIsDragging(true); }}\r\n        onTouchEnd={() => { setIsDragging(false); }}\r\n        onKeyDown={handleKeyDown}\r\n      >\r\n        {/* Before Image (Background) */}\r\n        <div className=\"absolute inset-0\">\r\n          <img \r\n            src={beforeImage} \r\n            alt={`${beforeLabel}: original state`}\r\n            width={600}\r\n            height={400}\r\n            loading=\"lazy\"\r\n            decoding=\"async\"\r\n            className=\"w-full h-full object-cover\"\r\n          />\r\n          <div className=\"absolute top-4 left-4 bg-black/70 text-white px-3 py-1 rounded-full text-sm font-medium\">\r\n            {beforeLabel}\r\n          </div>\r\n        </div>\r\n\r\n        {/* After Image (Clipped) */}\r\n        <div \r\n          className=\"absolute inset-0 overflow-hidden\"\r\n          style={{ clipPath: `inset(0 ${String(100 - sliderPosition)}% 0 0)` }}\r\n        >\r\n          <img \r\n            src={afterImage} \r\n            alt={`${afterLabel}: improved state`}\r\n            width={600}\r\n            height={400}\r\n            loading=\"lazy\"\r\n            decoding=\"async\"\r\n            className=\"w-full h-full object-cover\"\r\n          />\r\n          <div className=\"absolute top-4 right-4 bg-black/70 text-white px-3 py-1 rounded-full text-sm font-medium\">\r\n            {afterLabel}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Slider Line */}\r\n        <div \r\n          className=\"absolute top-0 bottom-0 w-1 bg-white shadow-lg z-10\"\r\n          style={{ left: `${String(sliderPosition)}%` }}\r\n        >\r\n          {/* Slider Handle */}\r\n          <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-8 h-8 bg-white rounded-full shadow-lg flex items-center justify-center cursor-col-resize\">\r\n            <div className=\"w-1 h-4 bg-stone-300\"></div>\r\n            <div className=\"w-1 h-4 bg-stone-300 ml-1\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BeforeAfterSlider;\r\n","import React from 'react';\r\n\r\nimport type { ProcessStep as ProcessStepType, ServiceData } from '@/features/services/types/service-data';\r\n\r\ninterface ProcessProps {\r\n  serviceData: ServiceData;\r\n}\r\n\r\nconst ProcessStep = ({ \r\n  step, \r\n  isReversed = false \r\n}: { \r\n  step: ProcessStepType; \r\n  isReversed?: boolean;\r\n}) => (\r\n  <div className={`grid gap-8 lg:grid-cols-2 items-start ${isReversed ? 'lg:grid-flow-col-dense' : ''}`}>\r\n    {/* Text Content */}\r\n    <div className={`${isReversed ? 'lg:col-start-2' : ''} space-y-4`}>\r\n      <div className=\"flex items-center mb-6\">\r\n        <div className=\"flex h-12 w-12 items-center justify-center rounded-full bg-orange-500 text-white text-xl font-bold mr-4 flex-shrink-0\">\r\n          {step.number}\r\n        </div>\r\n        <h3 className=\"text-xl font-semibold text-white\">{step.title}</h3>\r\n      </div>\r\n      {Array.isArray(step.bullets) ? (\r\n        <ul className=\"text-slate-300 leading-relaxed space-y-2 pl-6\">\r\n          {step.bullets.map((item: string, index: number) => (\r\n            <li key={index} className=\"flex items-start\">\r\n              <span className=\"text-orange-400 mr-3 text-lg flex-shrink-0\" aria-hidden=\"true\">•</span>\r\n              <span className=\"text-slate-300 text-lg\">{item}</span>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      ) : (\r\n        <p className=\"text-slate-300 leading-relaxed pl-6\">{step.description}</p>\r\n      )}\r\n    </div>\r\n    \r\n    {/* Image */}\r\n    <div className={`${isReversed ? 'lg:col-start-1' : ''} flex justify-center lg:justify-start`}>\r\n      <div className=\"aspect-[4/3] rounded-2xl bg-stone-700 ring-1 ring-white/10 overflow-hidden w-full max-w-md\">\r\n        {step.image?.src ? (\r\n          <img \r\n            src={step.image.src} \r\n            alt={step.image.alt || step.title}\r\n            width={600}\r\n            height={450}\r\n            loading=\"lazy\"\r\n            decoding=\"async\"\r\n            className=\"w-full h-full object-cover\"\r\n          />\r\n        ) : (\r\n          <div className=\"w-full h-full flex items-center justify-center text-white/50\">\r\n            Step {step.number} Image\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nconst Process: React.FC<ProcessProps> = ({ serviceData }) => {\r\n  const steps = serviceData.process?.steps || [];\r\n\r\n  return (\r\n    <section className=\"bg-stone-900 py-16\">\r\n      <div className=\"container mx-auto max-w-6xl px-4 sm:px-6 lg:px-8\">\r\n        <h2 className=\"text-2xl sm:text-3xl font-bold text-white mb-12\">\r\n          {serviceData.process?.title || \"Process\"}\r\n        </h2>\r\n        <div className=\"space-y-20\">\r\n          {steps.map((step: ProcessStepType, index: number) => (\r\n            <ProcessStep \r\n              key={step.number} \r\n              step={step} \r\n              isReversed={index % 2 === 1} \r\n            />\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Process;\r\n","/**\r\n * Protection comparison utilities for mobile detailing services\r\n * Used to compare wax, sealant, ceramic coating, and PPF protection options\r\n */\r\n\r\nexport type MetricKey = 'protection' | 'longevity' | 'ease' | 'chipResistance';\r\n\r\nexport type ProductKey = 'wax' | 'sealant' | 'ceramic' | 'ppf';\r\n\r\nexport type Ratings = Record<ProductKey, Record<MetricKey, 1|2|3|4|5>>;\r\n\r\nexport const DEFAULT_RATINGS: Ratings = {\r\n  wax:      { protection: 1, longevity: 1, ease: 2, chipResistance: 1 },\r\n  sealant:  { protection: 2, longevity: 2, ease: 2, chipResistance: 1 },\r\n  ceramic:  { protection: 4, longevity: 4, ease: 4, chipResistance: 1 },\r\n  ppf:      { protection: 5, longevity: 5, ease: 3, chipResistance: 5 },\r\n};\r\n\r\nexport const METRIC_LABELS: Record<MetricKey, string> = {\r\n  protection: 'Protection',\r\n  longevity: 'Longevity',\r\n  ease: 'Ease of Wash',\r\n  chipResistance: 'Rock-Chip Resistance',\r\n};\r\n\r\nexport const PRODUCT_LABELS: Record<ProductKey, string> = {\r\n  wax: 'Wax',\r\n  sealant: 'Sealant',\r\n  ceramic: 'Ceramic',\r\n  ppf: 'PPF',\r\n};\r\n\r\nexport const PRODUCT_COLORS: Record<ProductKey, string> = {\r\n  wax: 'bg-amber-500',\r\n  sealant: 'bg-blue-500',\r\n  ceramic: 'bg-purple-500',\r\n  ppf: 'bg-emerald-500',\r\n};\r\n\r\n","import React from 'react';\r\n\r\nimport {\r\n  DEFAULT_RATINGS,\r\n  METRIC_LABELS,\r\n  type MetricKey,\r\n  PRODUCT_LABELS,\r\n  type ProductKey,\r\n  type Ratings\r\n} from '@/features/services/utils/protectionComparison';\r\n\r\nexport interface ProtectionComparisonChartProps {\r\n  ratings?: Ratings;\r\n  title?: string;\r\n  description?: string;\r\n  className?: string;\r\n}\r\n\r\nconst StarIcon: React.FC<{ filled: boolean; className?: string }> = ({ filled, className = '' }) => (\r\n  <svg \r\n    viewBox=\"0 0 16 16\" \r\n    className={`w-4 h-4 ${className}`}\r\n    fill={filled ? 'currentColor' : 'none'}\r\n    stroke=\"currentColor\"\r\n    strokeWidth=\"1\"\r\n  >\r\n    <path d=\"M8 1l2 4h4l-3 3 1 4-4-2-4 2 1-4-3-3h4l2-4z\" />\r\n  </svg>\r\n);\r\n\r\n// Helper functions for type-safe access\r\nconst getProductLabel = (product: ProductKey): string => PRODUCT_LABELS[product];\r\nconst getMetricLabel = (metric: MetricKey): string => METRIC_LABELS[metric];\r\n\r\nconst RatingStars: React.FC<{ \r\n  rating: number; \r\n  product: ProductKey; \r\n  metric: MetricKey;\r\n  className?: string;\r\n}> = ({ rating, product, metric, className = '' }) => {\r\n  return (\r\n    <div \r\n      className={`flex items-center gap-1 ${className}`}\r\n      role=\"img\"\r\n      aria-label={`${getProductLabel(product)} — ${getMetricLabel(metric)}: ${String(rating)} out of 5 stars`}\r\n    >\r\n      {[1, 2, 3, 4, 5].map((star) => (\r\n        <StarIcon \r\n          key={star}\r\n          filled={star <= rating}\r\n          className={star <= rating ? 'text-orange-500' : 'text-stone-600'}\r\n        />\r\n      ))}\r\n      <span className=\"sr-only\">{rating}/5</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const ProtectionComparisonChart: React.FC<ProtectionComparisonChartProps> = ({\r\n  ratings = DEFAULT_RATINGS,\r\n  title = 'Protection Options Compared',\r\n  description,\r\n  className = ''\r\n}) => {\r\n  const metrics: MetricKey[] = ['protection', 'longevity', 'ease', 'chipResistance'];\r\n  const products: ProductKey[] = ['wax', 'sealant', 'ceramic', 'ppf'];\r\n  \r\n  // Type-safe accessor for ratings\r\n  const getRating = (product: ProductKey, metric: MetricKey): number => ratings[product][metric];\r\n\r\n  return (\r\n    <figure className={`rounded-2xl border border-stone-600 p-4 md:p-6 bg-stone-800 shadow-sm ${className}`}>\r\n      <div className=\"mb-6 text-center\">\r\n        <figcaption className=\"text-lg md:text-xl font-semibold text-white\">\r\n          {title}\r\n        </figcaption>\r\n        {description && (\r\n          <p className=\"text-sm text-slate-300 mt-2\">{description}</p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Mobile: Stacked layout */}\r\n      <div className=\"block md:hidden space-y-4\">\r\n        {metrics.map((metric) => (\r\n          <div key={metric} className=\"border border-stone-600 rounded-lg p-3\">\r\n            <h3 className=\"text-sm font-medium text-white mb-3\">\r\n              {getMetricLabel(metric)}\r\n            </h3>\r\n            <div className=\"space-y-3\">\r\n              {products.map((product) => (\r\n                <div key={product} className=\"flex items-center justify-between\">\r\n                  <span className=\"text-sm text-slate-300 min-w-0 flex-shrink-0 mr-3\">\r\n                    {getProductLabel(product)}\r\n                  </span>\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <RatingStars \r\n                      rating={getRating(product, metric)} \r\n                      product={product} \r\n                      metric={metric}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Desktop: Grid layout */}\r\n      <div className=\"hidden md:block\">\r\n        {/* Header row */}\r\n        <div className=\"grid grid-cols-5 gap-6 mb-4\">\r\n          <div className=\"text-sm font-medium text-slate-400\"></div>\r\n          {products.map((product) => (\r\n            <div \r\n              key={product}\r\n              className=\"text-sm font-medium text-center text-white\"\r\n            >\r\n              {getProductLabel(product)}\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Metric rows */}\r\n        {metrics.map((metric) => (\r\n          <div key={metric} className=\"grid grid-cols-5 gap-6 items-center py-3 border-b border-stone-600 last:border-b-0\">\r\n            <div className=\"text-sm font-medium text-slate-300\">\r\n              {getMetricLabel(metric)}\r\n            </div>\r\n            {products.map((product) => (\r\n              <div key={product} className=\"flex justify-center\">\r\n                <RatingStars \r\n                  rating={getRating(product, metric)} \r\n                  product={product} \r\n                  metric={metric}\r\n                />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </figure>\r\n  );\r\n};\r\n","import React from 'react';\r\n\r\nimport { ServiceData } from '@/features/services/types/service.types';\r\n\r\nimport BeforeAfterSlider from './BeforeAfterSlider';\r\n\r\ninterface ResultsProps {\r\n  serviceData: ServiceData;\r\n}\r\n\r\nconst Results: React.FC<ResultsProps> = ({ serviceData }) => {\r\n  const before = serviceData.results?.images?.before?.src;\r\n  const after = serviceData.results?.images?.after?.src;\r\n\r\n  return (\r\n    <section className=\"bg-stone-800 py-16\">\r\n      <div className=\"container mx-auto max-w-6xl px-4 sm:px-6 lg:px-8\">\r\n        <h2 className=\"text-2xl sm:text-3xl font-bold text-white mb-12 text-center\">\r\n          Results\r\n        </h2>\r\n        \r\n        <div className=\"grid gap-8 lg:grid-cols-2 items-center\">\r\n          {/* Before/After Images or Video */}\r\n          {serviceData.results?.video ? (\r\n            <div className=\"text-center\">\r\n              <div className=\"rounded-2xl bg-stone-700 ring-1 ring-white/10 overflow-hidden w-80 sm:w-[22.4rem] lg:w-[25.6rem] mx-auto\">\r\n                <video \r\n                  src={serviceData.results.video.src}\r\n                  controls\r\n                  className=\"w-full h-full object-cover\"\r\n                  aria-label={serviceData.results.video.alt || \"Results video\"}\r\n                  playsInline\r\n                  style={{ aspectRatio: '2/3' }}\r\n                >\r\n                  <track kind=\"captions\" />\r\n                  Your browser does not support the video tag.\r\n                </video>\r\n              </div>\r\n            </div>\r\n          ) : before && after ? (\r\n            <div className=\"w-full\">\r\n              <BeforeAfterSlider\r\n                beforeImage={before}\r\n                afterImage={after}\r\n                beforeLabel=\"BEFORE\"\r\n                afterLabel=\"AFTER\"\r\n                className=\"w-full\"\r\n              />\r\n            </div>\r\n          ) : null}\r\n          \r\n          {/* Results List */}\r\n          <div>\r\n            <h3 className=\"text-xl font-semibold text-white mb-6\">What You&apos;ll Get</h3>\r\n            <ul className=\"space-y-4 text-slate-300\">\r\n              {serviceData.results?.bullets?.map((bullet: string, index: number) => (\r\n                <li key={index} className=\"flex items-start\">\r\n                  <span className=\"text-orange-400 mr-3 text-lg\">•</span>\r\n                  <span className=\"text-lg text-slate-300\">{bullet}</span>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Results;\r\n","import React from 'react';\r\n\r\nimport { ServiceData } from '@/features/services/types/service.types';\r\nimport { CTAButtons } from '@/shared/ui';\r\n\r\ninterface ServiceCTAProps {\r\n  serviceData: ServiceData;\r\n  onRequestQuote?: () => void;\r\n}\r\n\r\nconst ServiceCTA: React.FC<ServiceCTAProps> = ({ serviceData, onRequestQuote }) => {\r\n  return (\r\n    <section className=\"bg-stone-900 py-16\">\r\n      <div className=\"container mx-auto max-w-4xl px-4 sm:px-6 lg:px-8 text-center\">\r\n        <h2 className=\"text-2xl sm:text-3xl font-bold text-white mb-4\">\r\n          {serviceData.cta?.title || \"Ready to get started?\"}\r\n        </h2>\r\n        {serviceData.cta?.description && (\r\n          <p className=\"text-slate-300 mb-8\">\r\n            {serviceData.cta.description}\r\n          </p>\r\n        )}\r\n        \r\n        <CTAButtons \r\n          layout=\"horizontal\"\r\n          bookNowProps={{\r\n            children: serviceData.cta?.primary?.label || serviceData.hero.ctas?.[0]?.label || \"Book Now\"\r\n          }}\r\n          getQuoteProps={{\r\n            children: serviceData.cta?.secondary?.label || serviceData.hero.ctas?.[1]?.label || \"Request Quote\",\r\n            variant: \"outline-white\",\r\n            onClick: onRequestQuote || (() => { /* No handler provided */ })\r\n          }}\r\n        />\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default ServiceCTA;\r\n","import React from 'react';\r\n\r\nimport { ServiceData } from '@/features/services/types/service.types';\r\nimport { CTAButtons } from '@/shared/ui';\r\n\r\ninterface ServiceHeroProps {\r\n  serviceData: ServiceData;\r\n  onRequestQuote?: () => void;\r\n}\r\n\r\nconst ServiceHero: React.FC<ServiceHeroProps> = ({ serviceData, onRequestQuote }) => {\r\n  return (\r\n    <section className=\"bg-stone-900 py-16 sm:py-24\">\r\n      <div className=\"container mx-auto max-w-7xl px-4 sm:px-6 lg:px-8\">\r\n        {/* Image and Content Grid */}\r\n        <div className=\"grid gap-8 lg:grid-cols-[3fr_2fr] items-center mb-8\">\r\n          {/* Service Image */}\r\n          <div className=\"aspect-[3/2] rounded-2xl bg-stone-800/80 ring-1 ring-white/10 overflow-hidden\">\r\n            {serviceData.hero.image?.src ? (\r\n              <img \r\n                src={serviceData.hero.image.src} \r\n                alt={serviceData.hero.image.alt}\r\n                width={800}\r\n                height={533}\r\n                loading=\"lazy\"\r\n                decoding=\"async\"\r\n                className=\"w-full h-full object-cover\"\r\n              />\r\n            ) : (\r\n              <div className=\"w-full h-full flex items-center justify-center text-white/50\">\r\n                Image Placeholder\r\n              </div>\r\n            )}\r\n          </div>\r\n          \r\n          {/* Content */}\r\n          <div>\r\n            <h1 className=\"text-3xl sm:text-4xl font-extrabold text-white\">\r\n              {serviceData.hero.headline || serviceData.title || \"Service Title\"}\r\n            </h1>\r\n            <p className=\"mt-3 text-slate-300 text-xl md:text-2xl\">\r\n              {serviceData.hero.subheadline || serviceData.shortDescription || \"Short subhead that sells the value. Placeholder copy.\"}\r\n            </p>\r\n            \r\n            {/* CTA Buttons */}\r\n            <div className=\"mt-6\">\r\n              <CTAButtons \r\n                layout=\"horizontal\"\r\n                bookNowProps={{\r\n                  children: serviceData.hero.ctas?.[0]?.label || \"Book Now\"\r\n                }}\r\n                getQuoteProps={{\r\n                  children: serviceData.hero.ctas?.[1]?.label || \"Request Quote\",\r\n                  variant: \"outline-white\",\r\n                  onClick: onRequestQuote\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default ServiceHero;\r\n","import React from 'react';\r\n\r\nimport { ServiceData } from '@/features/services/types/service.types';\r\n\r\nimport { ProtectionComparisonChart } from './ProtectionComparisonChart';\r\n\r\ninterface WhatItIsProps {\r\n  serviceData: ServiceData;\r\n}\r\n\r\nconst WhatItIs: React.FC<WhatItIsProps> = ({ serviceData }) => {\r\n  const hasChart = serviceData.whatItIs?.chart?.type === 'protection-comparison';\r\n  const isPaintCorrection = serviceData.slug === 'paint-correction';\r\n  const isCeramicCoating = serviceData.slug === 'ceramic-coating';\r\n  \r\n  return (\r\n    <section className=\"bg-stone-800 py-16\">\r\n      <div className=\"container mx-auto max-w-6xl px-4 sm:px-6 lg:px-8\">\r\n        {/* Protection Comparison Chart - First */}\r\n        {hasChart && serviceData.whatItIs?.chart && (\r\n          <div className=\"mb-12\">\r\n            <ProtectionComparisonChart\r\n              ratings={serviceData.whatItIs.chart.data}\r\n              title={serviceData.whatItIs.chart.title}\r\n              description={serviceData.whatItIs.chart.description}\r\n            />\r\n          </div>\r\n        )}\r\n        \r\n        {/* Text Content - Second */}\r\n        {isPaintCorrection ? (\r\n          // Special two-column layout for paint correction\r\n          <div className=\"grid gap-10 lg:grid-cols-2\">\r\n            <div className=\"space-y-10\">\r\n              <div>\r\n                <h2 className=\"text-3xl sm:text-4xl font-bold text-white mb-4\">What It Is</h2>\r\n                <p className=\"text-slate-300 mb-6 text-lg\">\r\n                  {serviceData.whatItIs?.description || \"Explain what the service is. Placeholder text.\"}\r\n                </p>\r\n              </div>\r\n              \r\n              <div>\r\n                <ul className=\"space-y-2 text-slate-300\">\r\n                  {serviceData.whatItIs?.benefits?.map((benefit: string, index: number) => (\r\n                    <li key={index} className=\"flex items-start\">\r\n                      <span className=\"text-orange-400 mr-3 text-lg\" aria-hidden=\"true\">•</span>\r\n                      <span className=\"text-lg\">{benefit}</span>\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"flex flex-col justify-center\">\r\n              {serviceData.whatItIs?.image?.src && (\r\n                <div className=\"rounded-2xl bg-stone-700 ring-1 ring-white/10 overflow-hidden w-full max-w-lg mx-auto\">\r\n                  <img \r\n                    src={serviceData.whatItIs.image.src} \r\n                    alt={serviceData.whatItIs.image.alt || \"Service illustration\"}\r\n                    width={500}\r\n                    height={400}\r\n                    loading=\"lazy\"\r\n                    decoding=\"async\"\r\n                    className=\"w-full h-full object-contain\"\r\n                  />\r\n                </div>\r\n              )}\r\n              {serviceData.whatItIs?.video?.src && (\r\n                <div className=\"rounded-2xl bg-stone-700 ring-1 ring-white/10 overflow-hidden w-80 sm:w-[22.4rem] lg:w-[25.6rem] mx-auto\">\r\n                  <video \r\n                    src={serviceData.whatItIs.video.src}\r\n                    controls\r\n                    className=\"w-full h-full object-cover\"\r\n                    aria-label={serviceData.whatItIs.video.alt || \"Service video\"}\r\n                    playsInline\r\n                    style={{ aspectRatio: '2/3' }}\r\n                  >\r\n                    <track kind=\"captions\" />\r\n                    Your browser does not support the video tag.\r\n                  </video>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        ) : isCeramicCoating ? (\r\n          // Two column layout for ceramic coating (after chart)\r\n          <div className=\"grid gap-10 lg:grid-cols-2\">\r\n            <div>\r\n              <h2 className=\"text-2xl sm:text-3xl font-bold text-white mb-4\">What It Is</h2>\r\n              <p className=\"text-slate-300 mb-6\">\r\n                {serviceData.whatItIs?.description || \"Explain what the service is. Placeholder text.\"}\r\n              </p>\r\n            </div>\r\n            \r\n            <div className=\"flex flex-col justify-center\">\r\n              <ul className=\"space-y-2 text-slate-300\">\r\n                {serviceData.whatItIs?.benefits?.map((benefit: string, index: number) => (\r\n                  <li key={index} className=\"flex items-start\">\r\n                    <span className=\"text-orange-400 mr-3 text-lg\" aria-hidden=\"true\">•</span>\r\n                    <span className=\"text-lg\">{benefit}</span>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          // Two column layout for other services\r\n          <div className=\"grid gap-10 lg:grid-cols-2\">\r\n            <div className={`space-y-6 ${serviceData.whatItIs?.video?.src ? 'flex flex-col justify-center' : ''}`}>\r\n              <div>\r\n                <h2 className=\"text-3xl sm:text-4xl font-bold text-white mb-4\">What It Is</h2>\r\n                <p className=\"text-slate-300 mb-6 text-lg\">\r\n                  {serviceData.whatItIs?.description || \"Explain what the service is. Placeholder text.\"}\r\n                </p>\r\n              </div>\r\n              \r\n              <div>\r\n                <ul className=\"space-y-2 text-slate-300\">\r\n                  {serviceData.whatItIs?.benefits?.map((benefit: string, index: number) => (\r\n                    <li key={index} className=\"flex items-start\">\r\n                      <span className=\"text-orange-400 mr-3 text-lg\" aria-hidden=\"true\">•</span>\r\n                      <span className=\"text-lg\">{benefit}</span>\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"flex flex-col justify-center\">\r\n              {serviceData.whatItIs?.image?.src && (\r\n                <div className=\"rounded-2xl bg-stone-700 ring-1 ring-white/10 overflow-hidden w-full max-w-lg mx-auto\">\r\n                  <img \r\n                    src={serviceData.whatItIs.image.src} \r\n                    alt={serviceData.whatItIs.image.alt || \"Service illustration\"}\r\n                    width={500}\r\n                    height={400}\r\n                    loading=\"lazy\"\r\n                    decoding=\"async\"\r\n                    className=\"w-full h-full object-contain\"\r\n                  />\r\n                </div>\r\n              )}\r\n              {serviceData.whatItIs?.video?.src && (\r\n                <div className=\"rounded-2xl bg-stone-700 ring-1 ring-white/10 overflow-hidden w-80 sm:w-[22.4rem] lg:w-[25.6rem] mx-auto\">\r\n                  <video \r\n                    src={serviceData.whatItIs.video.src}\r\n                    controls\r\n                    className=\"w-full h-full object-cover\"\r\n                    aria-label={serviceData.whatItIs.video.alt || \"Service video\"}\r\n                    playsInline\r\n                    style={{ aspectRatio: '2/3' }}\r\n                  >\r\n                    <track kind=\"captions\" />\r\n                    Your browser does not support the video tag.\r\n                  </video>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default WhatItIs;\r\n","import React, { useEffect } from 'react';\n\nimport { FAQ } from '@/features/faq';\nimport { Gallery } from '@/features/gallery';\nimport { Header } from '@/features/header';\nimport { Hero } from '@/features/hero';\nimport { Reviews } from '@/features/reviews';\nimport { useReviewsAvailability } from '@/features/reviews/hooks/useReviewsAvailability';\nimport { ServicesGrid } from '@/features/services';\nimport { useIsDesktop, useScrollSpy, useSEO, useTenantSlug } from '@/shared/hooks';\nimport type { SectionId } from '@/shared/state/sectionStore';\nimport { injectAllSchemas } from '@/shared/utils/schemaUtils';\n\ninterface HomePageProps {\n  onRequestQuote?: () => void;\n  locationData?: unknown;\n}\n\nconst HomePage: React.FC<HomePageProps> = ({ onRequestQuote, locationData }) => {\n  // Legacy useSiteContext removed - now using tenant-based routing\n  \n  // Get tenant slug from URL\n  const tenantSlug = useTenantSlug();\n  \n  // Update SEO metadata (title, description, etc.)\n  useSEO();\n  \n  // Check if reviews are available for this site\n  const hasReviews = useReviewsAvailability();\n  \n  // Determine which section IDs to track based on screen size\n  const isDesktop = useIsDesktop();\n  \n  // Set up scroll spy to track active section - use correct IDs for mobile vs desktop\n  const sectionIds: SectionId[] = isDesktop \n    ? ['top', 'services-desktop', 'reviews', 'faq', 'gallery-desktop']\n    : ['top', 'services', 'reviews', 'faq', 'gallery', 'footer'];\n  \n  useScrollSpy({ \n    ids: sectionIds, \n    headerPx: isDesktop ? 88 : 72, \n    updateHash: false \n  });\n\n  // Generate and inject Schema.org JSON-LD for tenant site\n  useEffect(() => {\n    if (!locationData) {\n      // Schema generation for FAQs is now handled by the FAQ component itself\n      // using industry-specific data loaded dynamically\n      injectAllSchemas([]);\n    }\n  }, [locationData]);\n\n  return (\n    <>\n      <Header />\n      <div className=\"h-screen snap-y snap-mandatory overflow-y-scroll snap-container scrollbar-hide pt-[72px] md:pt-[88px]\">\n        <Hero \n          {...(onRequestQuote && { onRequestQuote })}\n        />\n      \n      <ServicesGrid />\n      \n              {/* Only show reviews if there are reviews available */}\n              {hasReviews && (\n                <Reviews tenantSlug={tenantSlug} />\n              )}\n      \n      <FAQ />\n      \n      <Gallery \n        {...(onRequestQuote && { onRequestQuote })}\n      />\n      </div>\n    </>\n  );\n};\n\nexport default HomePage;\n","import React, { useState } from 'react';\r\n\r\nimport HomePage from '@/app/pages/HomePage';\r\n// Page-level composition - intentionally imports from features\r\n// eslint-disable-next-line no-restricted-imports -- Page composition needs quote modal\r\nimport { LazyRequestQuoteModal } from '@/features/quotes';\r\n\r\nimport { DataProvider } from '../contexts/DataProvider';\r\n\r\nconst TenantPage: React.FC = () => {\r\n  const [isQuoteModalOpen, setIsQuoteModalOpen] = useState(false);\r\n\r\n  const handleOpenQuoteModal = () => { setIsQuoteModalOpen(true); };\r\n  const handleCloseQuoteModal = () => { setIsQuoteModalOpen(false); };\r\n\r\n  return (\r\n    <DataProvider>\r\n      <div className=\"min-h-screen\">\r\n        <HomePage onRequestQuote={handleOpenQuoteModal} />\r\n        \r\n        {isQuoteModalOpen && (\r\n          <LazyRequestQuoteModal \r\n            isOpen={isQuoteModalOpen} \r\n            onClose={handleCloseQuoteModal} \r\n          />\r\n        )}\r\n      </div>\r\n    </DataProvider>\r\n  );\r\n};\r\n\r\nexport default TenantPage;\r\n","import React from 'react';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\n\nimport { AuthProvider, TenantConfigProvider } from '@/shared/contexts';\nimport { WebsiteContentProvider } from '@/shared/contexts/WebsiteContentContext';\nimport { ErrorBoundary } from '@/shared/ui';\n\n// Create a client\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      staleTime: 5 * 60 * 1000, // 5 minutes\n      gcTime: 10 * 60 * 1000, // 10 minutes (formerly cacheTime)\n      retry: 1,\n      refetchOnWindowFocus: false,\n    },\n  },\n});\n\ninterface ProvidersProps {\n  children: React.ReactNode;\n}\n\nexport const Providers: React.FC<ProvidersProps> = ({ children }) => {\n  \n  return (\n    <ErrorBoundary>\n      <QueryClientProvider client={queryClient}>\n        <AuthProvider>\n          <TenantConfigProvider>\n            <Router>\n              <WebsiteContentProvider>\n                {children}\n              </WebsiteContentProvider>\n            </Router>\n          </TenantConfigProvider>\n        </AuthProvider>\n      </QueryClientProvider>\n    </ErrorBoundary>\n  );\n};\n\n","import React from 'react';\r\nimport { Calendar,Car } from 'lucide-react';\r\n\r\nimport type { DetailerData } from '../types';\r\n\r\ninterface DashboardHeaderProps {\r\n  detailerData: DetailerData;\r\n  onBackToForm: () => void;\r\n}\r\n\r\nexport const DashboardHeader: React.FC<DashboardHeaderProps> = ({ \r\n  detailerData\r\n}) => {\r\n  return (\r\n    <div className=\"bg-stone-800 rounded-2xl shadow-lg border border-stone-700 mb-8 overflow-hidden\">\r\n      <div className=\"px-8 py-8\">\r\n        <div className=\"flex flex-col lg:flex-row items-start lg:items-center justify-between\">\r\n          {/* Left side - Business Info */}\r\n          <div className=\"flex items-center space-x-6 mb-6 lg:mb-0\">\r\n            {/* Business Avatar/Logo */}\r\n            <div className=\"relative\">\r\n              <div className=\"h-20 w-20 bg-stone-700 rounded-2xl flex items-center justify-center shadow-sm border border-stone-600\">\r\n                <Car className=\"h-10 w-10 text-orange-500\" />\r\n              </div>\r\n              <div className=\"absolute -bottom-2 -right-2 h-6 w-6 bg-green-500 rounded-full border-2 border-stone-800 shadow-sm\"></div>\r\n            </div>\r\n            {/* Business Details */}\r\n            <div>\r\n              <h1 className=\"text-3xl font-bold mb-2 text-white\">\r\n                {detailerData.business_name || \"Your Business Name\"}\r\n              </h1>\r\n              <p className=\"text-gray-300 text-lg mb-1\">\r\n                {detailerData.first_name && detailerData.last_name \r\n                  ? `${detailerData.first_name} ${detailerData.last_name}` \r\n                  : \"Owner Name\"}\r\n              </p>\r\n              <div className=\"flex items-center text-gray-400 mb-1\">\r\n                <Car className=\"h-4 w-4 mr-2\" />\r\n                <span>{detailerData.location || \"Business Location\"}</span>\r\n              </div>\r\n              <div className=\"flex items-center text-gray-400\">\r\n                <Calendar className=\"h-4 w-4 mr-2\" />\r\n                <span>In business since {detailerData.memberSince || \"2019\"}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Right side - Quick Stats */}\r\n          <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-6 w-full lg:w-auto\">\r\n            <div className=\"bg-stone-700 rounded-xl p-4 text-center border border-stone-600\">\r\n              <div className=\"text-2xl font-bold text-white\">$2,450</div>\r\n              <div className=\"text-gray-300 text-sm\">This Week</div>\r\n            </div>\r\n            <div className=\"bg-stone-700 rounded-xl p-4 text-center border border-stone-600\">\r\n              <div className=\"text-2xl font-bold text-white\">23</div>\r\n              <div className=\"text-gray-300 text-sm\">Appointments</div>\r\n            </div>\r\n            <div className=\"bg-stone-700 rounded-xl p-4 text-center border border-stone-600\">\r\n              <div className=\"text-2xl font-bold text-white\">142</div>\r\n              <div className=\"text-gray-300 text-sm\">Customers</div>\r\n            </div>\r\n            <div className=\"bg-stone-700 rounded-xl p-4 text-center border border-stone-600\">\r\n              <div className=\"text-2xl font-bold text-white\">4.9★</div>\r\n              <div className=\"text-gray-300 text-sm\">Rating</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\n\r\ninterface DashboardLayoutProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport const DashboardLayout: React.FC<DashboardLayoutProps> = ({ children }) => {\r\n  return (\r\n    <div className=\"min-h-screen bg-stone-900 transition-colors duration-500\">\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n","import { Calendar, Car, Globe,Home, MapPin, User, Users } from 'lucide-react';\r\n\r\nimport type { TabConfig } from '../types';\r\n\r\nexport const DASHBOARD_TABS: TabConfig[] = [\r\n  { id: 'overview', name: 'Overview', icon: Home },\r\n  { id: 'website', name: 'Website', icon: Globe },\r\n  { id: 'locations', name: 'Locations', icon: MapPin },\r\n  { id: 'profile', name: 'Profile', icon: User },\r\n  { id: 'schedule', name: 'Schedule', icon: Calendar },\r\n  { id: 'customers', name: 'Customers', icon: Users },\r\n  { id: 'services', name: 'Services', icon: Car },\r\n];\r\n\r\nexport const BUSINESS_CATEGORIES = [\r\n  'Exterior',\r\n  'Interior', \r\n  'Protection',\r\n  'Correction',\r\n  'Maintenance'\r\n] as const;\r\n\r\nexport const APPOINTMENT_STATUSES = [\r\n  'confirmed',\r\n  'pending', \r\n  'cancelled'\r\n] as const;","/**\r\n * Dashboard Tab Configuration\r\n * Controls which tabs are visible for tenants\r\n * Can be customized per tenant or globally\r\n */\r\n\r\nexport interface TabConfig {\r\n  schedule: boolean;\r\n  customers: boolean;\r\n  services: boolean;\r\n  locations: boolean;\r\n  profile: boolean;\r\n  website: boolean;\r\n}\r\n\r\n// Default configuration - can be overridden per tenant\r\nexport const DEFAULT_TAB_CONFIG: TabConfig = {\r\n  schedule: false,\r\n  customers: false,\r\n  services: false,\r\n  locations: true,\r\n  profile: true,\r\n  website: true,\r\n};\r\n\r\n// Tenant-specific configurations (optional)\r\n// This allows for per-tenant customization\r\nexport const TENANT_TAB_CONFIGS: Record<string, Partial<TabConfig>> = {\r\n  // Example configurations:\r\n  // 'jps': { schedule: true, customers: true },\r\n  // 'premium-tenant': { schedule: true, customers: true, services: true },\r\n  // 'basic-tenant': { schedule: false, customers: false, services: false },\r\n  \r\n  // Current configuration for 'jps' tenant (as requested):\r\n  'jps': {\r\n    schedule: false,\r\n    customers: false,\r\n    services: false,\r\n    locations: true,\r\n    profile: true,\r\n    website: true,\r\n  },\r\n};\r\n\r\n/**\r\n * Get tab configuration for a specific tenant\r\n * Falls back to default config if no tenant-specific config exists\r\n */\r\nexport const getTabConfig = (tenantSlug?: string): TabConfig => {\r\n  if (!tenantSlug) {\r\n    return DEFAULT_TAB_CONFIG;\r\n  }\r\n  \r\n  const tenantConfig = TENANT_TAB_CONFIGS[tenantSlug];\r\n  if (!tenantConfig) {\r\n    return DEFAULT_TAB_CONFIG;\r\n  }\r\n  \r\n  // Merge tenant config with default config\r\n  return {\r\n    ...DEFAULT_TAB_CONFIG,\r\n    ...tenantConfig,\r\n  };\r\n};\r\n","import React from 'react';\r\n\r\nimport type { DashboardTab } from '@/features/tenantDashboard/types';\r\nimport { DASHBOARD_TABS } from '@/features/tenantDashboard/utils/constants';\r\n\r\nimport { getTabConfig } from '../config/tabConfig';\r\n\r\ninterface DashboardTabsProps {\r\n  activeTab: DashboardTab;\r\n  onTabChange: (tab: DashboardTab) => void;\r\n  tenantSlug?: string;\r\n}\r\n\r\nexport const DashboardTabs: React.FC<DashboardTabsProps> = ({ \r\n  activeTab, \r\n  onTabChange,\r\n  tenantSlug\r\n}) => {\r\n  // Get tab configuration for this tenant\r\n  const tabConfig = getTabConfig(tenantSlug);\r\n  \r\n  // Filter tabs based on configuration\r\n  const visibleTabs = DASHBOARD_TABS.filter(tab => {\r\n    switch (tab.id) {\r\n      case 'schedule':\r\n        return tabConfig.schedule;\r\n      case 'customers':\r\n        return tabConfig.customers;\r\n      case 'services':\r\n        return tabConfig.services;\r\n      case 'locations':\r\n        return tabConfig.locations;\r\n      case 'profile':\r\n        return tabConfig.profile;\r\n      case 'website':\r\n        return tabConfig.website;\r\n      case 'overview':\r\n        return true; // Overview is always visible\r\n      default:\r\n        return true;\r\n    }\r\n  });\r\n\r\n  return (\r\n    <div className=\"mb-6\">\r\n      <nav className=\"flex space-x-1 bg-stone-800 rounded-xl p-1 shadow-lg border border-stone-700\">\r\n        {visibleTabs.map((tab) => {\r\n          const Icon = tab.icon;\r\n          return (\r\n            <button\r\n              key={tab.id}\r\n              onClick={() => { onTabChange(tab.id); }}\r\n              className={`flex items-center px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 ${\r\n                activeTab === tab.id\r\n                  ? 'bg-orange-500 text-white shadow-md hover:bg-orange-600'\r\n                  : 'text-gray-300 hover:text-white hover:bg-stone-700'\r\n              }`}\r\n            >\r\n              <Icon className=\"h-4 w-4 mr-2\" />\r\n              <span className=\"hidden sm:inline\">{tab.name}</span>\r\n            </button>\r\n          );\r\n        })}\r\n      </nav>\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nconst CustomersTab: React.FC = () => <div>Customers Tab (placeholder)</div>;\r\nexport default CustomersTab;\r\n","// API functions for locations management\r\n\r\ninterface ServiceAreaData {\r\n  city: string;\r\n  state: string;\r\n  zip?: string;\r\n  primary?: boolean;\r\n  minimum?: number;\r\n  multiplier?: number;\r\n}\r\n\r\ninterface ApiResponse {\r\n  success: boolean;\r\n  message?: string;\r\n  error?: string;\r\n  data?: unknown;\r\n}\r\n\r\nexport const saveLocationData = async (tenantSlug: string, locationData: ServiceAreaData[]) => {\r\n  const response = await fetch(`/api/locations/service-areas/${tenantSlug}`, {\r\n    method: 'PUT',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({ serviceAreas: locationData }),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const error = await response.json() as ApiResponse;\r\n    throw new Error(error.error || 'Failed to save location data');\r\n  }\r\n\r\n  return response.json() as Promise<ApiResponse>;\r\n};\r\n\r\nexport const saveServiceAreas = async (tenantSlug: string, serviceAreas: ServiceAreaData[]) => {\r\n  const response = await fetch(`/api/locations/service-areas/${tenantSlug}`, {\r\n    method: 'PUT',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({ serviceAreas }),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const error = await response.json() as ApiResponse;\r\n    throw new Error(error.error || 'Failed to save service areas');\r\n  }\r\n\r\n  return response.json() as Promise<ApiResponse>;\r\n};\r\n\r\nexport const addServiceArea = async (tenantSlug: string, areaData: ServiceAreaData) => {\r\n  const response = await fetch(`/api/locations/service-areas/${tenantSlug}`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(areaData),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const error = await response.json() as ApiResponse;\r\n    throw new Error(error.error || 'Failed to add service area');\r\n  }\r\n\r\n  return response.json() as Promise<ApiResponse>;\r\n};\r\n\r\nexport const deleteServiceArea = async (tenantSlug: string, areaId: string) => {\r\n  const response = await fetch(`/api/locations/service-areas/${tenantSlug}/${areaId}`, {\r\n    method: 'DELETE',\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const error = await response.json() as ApiResponse;\r\n    throw new Error(error.error || 'Failed to delete service area');\r\n  }\r\n\r\n  return response.json() as Promise<ApiResponse>;\r\n};\r\n","import { useCallback, useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nimport { config } from '@/../config/env';\r\n\r\nexport interface TenantServiceArea {\r\n  city: string;\r\n  state: string;\r\n  zip?: string;\r\n  primary: boolean;\r\n  minimum?: number;\r\n  multiplier?: number;\r\n}\r\n\r\nexport interface TenantBusinessData {\r\n  id: string;\r\n  slug: string;\r\n  business_name: string;\r\n  application_status: string;\r\n  phone: string;\r\n  sms_phone?: string;\r\n  twilio_phone?: string;\r\n  service_areas: TenantServiceArea[];\r\n  owner?: string;\r\n  business_email?: string;\r\n  personal_email?: string;\r\n  first_name?: string;\r\n  last_name?: string;\r\n  personal_phone?: string;\r\n  business_start_date?: string;\r\n  website?: string;\r\n  gbp_url?: string;\r\n  facebook_url?: string;\r\n  youtube_url?: string;\r\n  tiktok_url?: string;\r\n  instagram_url?: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport const useTenantBusinessData = () => {\r\n  const [businessData, setBusinessData] = useState<TenantBusinessData | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [refreshTrigger, setRefreshTrigger] = useState(0);\r\n  \r\n  const { slug } = useParams<{ slug: string }>();\r\n\r\n  const fetchBusinessData = useCallback(async () => {\r\n    if (!slug) {\r\n      setError('No business slug provided');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch(`${config.apiUrl}/api/tenants/${slug}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${String(token)}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json() as {\r\n          success: boolean;\r\n          data?: TenantBusinessData;\r\n        };\r\n        \r\n        if (data.success && data.data) {\r\n          setBusinessData(data.data);\r\n        } else {\r\n          setError('Failed to fetch business data');\r\n        }\r\n      } else {\r\n        const errorData = await response.json() as {\r\n          error?: string;\r\n          message?: string;\r\n        };\r\n        setError(errorData.error || errorData.message || 'Failed to fetch business data');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching business data:', error);\r\n      setError('Failed to fetch business data');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [slug]);\r\n\r\n  useEffect(() => {\r\n    void fetchBusinessData();\r\n  }, [fetchBusinessData, refreshTrigger]);\r\n\r\n  // Get service areas with first entry as primary\r\n  const serviceAreas = businessData?.service_areas || [];\r\n  const primaryServiceArea = serviceAreas.length > 0 ? serviceAreas[0] : null;\r\n  const otherServiceAreas = serviceAreas.slice(1);\r\n\r\n  return {\r\n    businessData,\r\n    serviceAreas,\r\n    primaryServiceArea,\r\n    otherServiceAreas,\r\n    loading,\r\n    error,\r\n    refetch: () => {\r\n      setRefreshTrigger(prev => prev + 1);\r\n    }\r\n  };\r\n};\r\n","import { config } from '@/../config/env';\r\n\r\n// Types for the API client\r\ninterface ApiResponse<T = unknown> {\r\n  success: boolean;\r\n  data?: T;\r\n  message?: string;\r\n  error?: string;\r\n}\r\n\r\ninterface RefreshResponse {\r\n  success: boolean;\r\n  accessToken: string;\r\n  refreshToken: string;\r\n  user: unknown;\r\n}\r\n\r\ninterface ErrorResponse {\r\n  error?: string;\r\n  message?: string;\r\n  retryAfterSeconds?: number;\r\n  remainingAttempts?: number;\r\n  resetTime?: number;\r\n}\r\n\r\n// Extend Error interface for custom error codes\r\ninterface CustomError extends Error {\r\n  code?: string;\r\n  retryAfterSeconds?: number;\r\n  remainingAttempts?: number;\r\n  resetTime?: number;\r\n}\r\n\r\n// One-flight guard for refresh token requests\r\nclass RefreshTokenGuard {\r\n  private isRefreshing = false;\r\n  private failedQueue: Array<{\r\n    resolve: (token: string) => void;\r\n    reject: (error: unknown) => void;\r\n  }> = [];\r\n\r\n  async executeRefresh(): Promise<string> {\r\n    if (this.isRefreshing) {\r\n      // If already refreshing, queue this request\r\n      return new Promise((resolve, reject) => {\r\n        this.failedQueue.push({ resolve, reject });\r\n      });\r\n    }\r\n\r\n    this.isRefreshing = true;\r\n\r\n    try {\r\n      const refreshToken = localStorage.getItem('refreshToken');\r\n      if (!refreshToken) {\r\n        throw new Error('No refresh token available');\r\n      }\r\n\r\n      const response = await fetch(`${config.apiUrl}/api/auth/refresh`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ refreshToken }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Refresh token failed');\r\n      }\r\n\r\n      const data = await response.json() as RefreshResponse;\r\n      \r\n      // Update tokens in localStorage\r\n      localStorage.setItem('token', data.accessToken);\r\n      localStorage.setItem('refreshToken', data.refreshToken);\r\n\r\n      // Process queued requests\r\n      this.processQueue(null, data.accessToken);\r\n      \r\n      return data.accessToken;\r\n    } catch (error: unknown) {\r\n      // Process queued requests with error\r\n      this.processQueue(error, null);\r\n      throw error;\r\n    } finally {\r\n      this.isRefreshing = false;\r\n    }\r\n  }\r\n\r\n  private processQueue(error: unknown, token: string | null) {\r\n    this.failedQueue.forEach(({ resolve, reject }) => {\r\n      if (error) {\r\n        reject(error);\r\n      } else if (token) {\r\n        resolve(token);\r\n      }\r\n    });\r\n\r\n    this.failedQueue = [];\r\n  }\r\n}\r\n\r\n// API Client with token refresh interceptor\r\nclass ApiClient {\r\n  private refreshGuard = new RefreshTokenGuard();\r\n  private baseURL: string;\r\n\r\n  constructor(baseURL: string) {\r\n    this.baseURL = baseURL;\r\n  }\r\n\r\n  // Main request method with automatic token refresh\r\n  async request<T>(\r\n    endpoint: string,\r\n    options: RequestInit = {}\r\n  ): Promise<T> {\r\n    const url = `${this.baseURL}${endpoint}`;\r\n    \r\n    // Add auth header if token exists\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      options.headers = {\r\n        ...options.headers,\r\n        'Authorization': `Bearer ${token}`,\r\n      };\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(url, options);\r\n      \r\n      // If unauthorized and we have a refresh token, try to refresh\r\n      if (response.status === 401 && localStorage.getItem('refreshToken')) {\r\n        try {\r\n          const newToken = await this.refreshGuard.executeRefresh();\r\n          \r\n          // Retry the original request with new token\r\n          const retryOptions = {\r\n            ...options,\r\n            headers: {\r\n              ...options.headers,\r\n              'Authorization': `Bearer ${newToken}`,\r\n            },\r\n          };\r\n          \r\n          const retryResponse = await fetch(url, retryOptions);\r\n          \r\n          if (!retryResponse.ok) {\r\n            throw new Error(`Request failed: ${retryResponse.status.toString()}`);\r\n          }\r\n          \r\n          return await retryResponse.json() as T;\r\n        } catch {\r\n          // Refresh failed, clear auth state and redirect\r\n          this.handleAuthFailure();\r\n          throw new Error('Authentication failed');\r\n        }\r\n      }\r\n      \r\n      if (!response.ok) {\r\n        const errorData = await response.json().catch(() => ({})) as ErrorResponse;\r\n        \r\n        // Handle rate limiting specifically\r\n        if (response.status === 429) {\r\n          const error: CustomError = new Error(errorData.error ?? 'Rate limited');\r\n          error.code = 'RATE_LIMITED';\r\n          error.retryAfterSeconds = errorData.retryAfterSeconds;\r\n          error.remainingAttempts = errorData.remainingAttempts;\r\n          error.resetTime = errorData.resetTime;\r\n          throw error;\r\n        }\r\n        \r\n        // Handle other error codes\r\n        if (response.status === 401) {\r\n          const error: CustomError = new Error(errorData.error ?? 'Unauthorized');\r\n          error.code = 'UNAUTHORIZED';\r\n          throw error;\r\n        }\r\n        \r\n        if (response.status === 403) {\r\n          const error: CustomError = new Error(errorData.error ?? 'Forbidden');\r\n          error.code = 'FORBIDDEN';\r\n          throw error;\r\n        }\r\n        \r\n        throw new Error(errorData.error ?? errorData.message ?? `Request failed: ${response.status.toString()}`);\r\n      }\r\n      \r\n      return await response.json() as T;\r\n    } catch (error: unknown) {\r\n      console.error('API request failed:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // Handle authentication failure\r\n  private handleAuthFailure() {\r\n    // Clear all auth data\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('refreshToken');\r\n    localStorage.removeItem('user');\r\n    \r\n    // Redirect to login or home page\r\n    if (window.location.pathname !== '/') {\r\n      window.location.href = '/';\r\n    }\r\n  }\r\n\r\n  // GET request\r\n  async get<T>(endpoint: string): Promise<T> {\r\n    return this.request<T>(endpoint, { method: 'GET' });\r\n  }\r\n\r\n  // POST request\r\n  async post<T>(endpoint: string, data?: unknown): Promise<T> {\r\n    return this.request<T>(endpoint, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: data ? JSON.stringify(data) : undefined,\r\n    });\r\n  }\r\n\r\n  // PUT request\r\n  async put<T>(endpoint: string, data?: unknown): Promise<T> {\r\n    return this.request<T>(endpoint, {\r\n      method: 'PUT',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: data ? JSON.stringify(data) : undefined,\r\n    });\r\n  }\r\n\r\n  // DELETE request\r\n  async delete<T>(endpoint: string): Promise<T> {\r\n    return this.request<T>(endpoint, { method: 'DELETE' });\r\n  }\r\n\r\n  // PATCH request\r\n  async patch<T>(endpoint: string, data?: unknown): Promise<T> {\r\n    return this.request<T>(endpoint, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: data ? JSON.stringify(data) : undefined,\r\n    });\r\n  }\r\n\r\n  // Upload file\r\n  async upload<T>(endpoint: string, formData: FormData): Promise<T> {\r\n    return this.request<T>(endpoint, {\r\n      method: 'POST',\r\n      body: formData,\r\n      // Don't set Content-Type for FormData, let browser set it with boundary\r\n    });\r\n  }\r\n}\r\n\r\n// Create and export the API client instance\r\nexport const apiClient = new ApiClient(config.apiUrl);\r\n\r\n// Export the client class for testing or custom instances\r\nexport { ApiClient };\r\n\r\n// Export types\r\nexport type { ApiResponse, RefreshResponse };\r\n","/**\r\n * US States and Territories\r\n * Static data for dropdowns, validation, and display\r\n */\r\n\r\nexport const STATES = {\r\n  // 50 US States\r\n  'AL': 'Alabama',\r\n  'AK': 'Alaska',\r\n  'AZ': 'Arizona',\r\n  'AR': 'Arkansas',\r\n  'CA': 'California',\r\n  'CO': 'Colorado',\r\n  'CT': 'Connecticut',\r\n  'DE': 'Delaware',\r\n  'FL': 'Florida',\r\n  'GA': 'Georgia',\r\n  'HI': 'Hawaii',\r\n  'ID': 'Idaho',\r\n  'IL': 'Illinois',\r\n  'IN': 'Indiana',\r\n  'IA': 'Iowa',\r\n  'KS': 'Kansas',\r\n  'KY': 'Kentucky',\r\n  'LA': 'Louisiana',\r\n  'ME': 'Maine',\r\n  'MD': 'Maryland',\r\n  'MA': 'Massachusetts',\r\n  'MI': 'Michigan',\r\n  'MN': 'Minnesota',\r\n  'MS': 'Mississippi',\r\n  'MO': 'Missouri',\r\n  'MT': 'Montana',\r\n  'NE': 'Nebraska',\r\n  'NV': 'Nevada',\r\n  'NH': 'New Hampshire',\r\n  'NJ': 'New Jersey',\r\n  'NM': 'New Mexico',\r\n  'NY': 'New York',\r\n  'NC': 'North Carolina',\r\n  'ND': 'North Dakota',\r\n  'OH': 'Ohio',\r\n  'OK': 'Oklahoma',\r\n  'OR': 'Oregon',\r\n  'PA': 'Pennsylvania',\r\n  'RI': 'Rhode Island',\r\n  'SC': 'South Carolina',\r\n  'SD': 'South Dakota',\r\n  'TN': 'Tennessee',\r\n  'TX': 'Texas',\r\n  'UT': 'Utah',\r\n  'VT': 'Vermont',\r\n  'VA': 'Virginia',\r\n  'WA': 'Washington',\r\n  'WV': 'West Virginia',\r\n  'WI': 'Wisconsin',\r\n  'WY': 'Wyoming',\r\n  \r\n  // US Territories\r\n  'DC': 'District of Columbia',\r\n  'AS': 'American Samoa',\r\n  'GU': 'Guam',\r\n  'MP': 'Northern Mariana Islands',\r\n  'PR': 'Puerto Rico',\r\n  'VI': 'U.S. Virgin Islands',\r\n  \r\n  // Military/Diplomatic\r\n  'AA': 'Armed Forces Americas',\r\n  'AE': 'Armed Forces Europe',\r\n  'AP': 'Armed Forces Pacific'\r\n} as const;\r\n\r\nexport type StateCode = keyof typeof STATES;\r\n\r\nexport type StateName = typeof STATES[StateCode];\r\n\r\n/**\r\n * Get state name from code\r\n */\r\nexport function getStateName(code: string): string | undefined {\r\n  return STATES[code.toUpperCase() as StateCode];\r\n}\r\n\r\n/**\r\n * Get state code from name\r\n */\r\nexport function getStateCode(name: string): string | undefined {\r\n  const normalizedName = name.toLowerCase();\r\n  const entry = Object.entries(STATES).find(([, stateName]) => \r\n    stateName.toLowerCase() === normalizedName\r\n  );\r\n  return entry?.[0];\r\n}\r\n\r\n/**\r\n * Get all state codes as array\r\n */\r\nexport function getStateCodes(): StateCode[] {\r\n  return Object.keys(STATES) as StateCode[];\r\n}\r\n\r\n/**\r\n * Get all state names as array\r\n */\r\nexport function getStateNames(): StateName[] {\r\n  return Object.values(STATES);\r\n}\r\n\r\n/**\r\n * Check if a string is a valid state code\r\n */\r\nexport function isValidStateCode(code: string): code is StateCode {\r\n  return code.toUpperCase() in STATES;\r\n}\r\n\r\n/**\r\n * Check if a string is a valid state name\r\n */\r\nexport function isValidStateName(name: string): boolean {\r\n  return getStateCode(name) !== undefined;\r\n}\r\n\r\n/**\r\n * Format state for display (e.g., \"AZ - Arizona\")\r\n */\r\nexport function formatState(code: StateCode): string {\r\n  return `${code} - ${STATES[code]}`;\r\n}\r\n\r\n/**\r\n * Get states grouped by region (optional, for advanced UI)\r\n */\r\nexport const STATES_BY_REGION = {\r\n  'Northeast': ['CT', 'ME', 'MA', 'NH', 'RI', 'VT', 'NJ', 'NY', 'PA'],\r\n  'Midwest': ['IL', 'IN', 'MI', 'OH', 'WI', 'IA', 'KS', 'MN', 'MO', 'NE', 'ND', 'SD'],\r\n  'South': ['DE', 'FL', 'GA', 'MD', 'NC', 'SC', 'VA', 'WV', 'AL', 'KY', 'MS', 'TN', 'AR', 'LA', 'OK', 'TX'],\r\n  'West': ['AZ', 'CO', 'ID', 'MT', 'NV', 'NM', 'UT', 'WY', 'AK', 'CA', 'HI', 'OR', 'WA']\r\n} as const;\r\n\r\nexport type Region = keyof typeof STATES_BY_REGION;\r\n","// Google Maps helper functions with proper typing\r\n// Shared utility - can be used across features\r\n\r\nexport function getGoogle(): (typeof google) | undefined {\r\n  return (window as unknown as { google?: typeof google }).google;\r\n}\r\n\r\nexport function hasImportLibrary(): boolean {\r\n  const g = getGoogle();\r\n  // v=beta exposes maps.importLibrary\r\n  return !!g?.maps.importLibrary;\r\n}\r\n\r\nexport function hasMaps(): boolean {\r\n  const g = getGoogle();\r\n  return !!g?.maps;\r\n}\r\n\r\n","import React, { useCallback, useState } from 'react';\r\nimport { MapPin, Plus, X } from 'lucide-react';\r\n\r\nimport { isValidStateCode } from '@/shared';\r\nimport { Button } from '@/shared/ui';\r\n\r\nimport type { LocationFormData, LocationValidationErrors } from '../types';\r\n\r\n\r\ninterface AddLocationModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onAdd: (location: LocationFormData) => Promise<{ success: boolean; error?: string }>;\r\n}\r\n\r\nexport const AddLocationModal: React.FC<AddLocationModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  onAdd\r\n}) => {\r\n  const [formData, setFormData] = useState<LocationFormData>({\r\n    city: '',\r\n    state: '',\r\n    zip: '',\r\n    minimum: 0,\r\n    multiplier: 1.0\r\n  });\r\n  const [errors, setErrors] = useState<LocationValidationErrors>({});\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n\r\n  const validateForm = useCallback((): boolean => {\r\n    const newErrors: LocationValidationErrors = {};\r\n\r\n    if (!formData.city.trim()) {\r\n      newErrors.city = 'City is required';\r\n    }\r\n\r\n    if (!formData.state.trim()) {\r\n      newErrors.state = 'State is required';\r\n    } else if (!isValidStateCode(formData.state)) {\r\n      newErrors.state = 'Please enter a valid 2-letter state code (e.g., CA, NY, TX)';\r\n    }\r\n\r\n    if (formData.zip && !/^\\d{5}(-\\d{4})?$/.test(formData.zip)) {\r\n      newErrors.zip = 'ZIP code must be 5 digits or 5+4 format';\r\n    }\r\n\r\n    if (formData.minimum < 0) {\r\n      newErrors.minimum = 'Minimum must be a positive number';\r\n    }\r\n\r\n    if (formData.multiplier <= 0) {\r\n      newErrors.multiplier = 'Multiplier must be greater than 0';\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  }, [formData]);\r\n\r\n  const handleSubmit = useCallback(async (e: React.FormEvent): Promise<void> => {\r\n    e.preventDefault();\r\n    \r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    \r\n    try {\r\n      const result = await onAdd(formData);\r\n      \r\n      if (result.success) {\r\n        setFormData({ city: '', state: '', zip: '', minimum: 0, multiplier: 1.0 });\r\n        setErrors({});\r\n        onClose();\r\n      } else {\r\n        setErrors({ general: result.error || 'Failed to add location' });\r\n      }\r\n    } catch {\r\n      setErrors({ general: 'An unexpected error occurred' });\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  }, [formData, onAdd, onClose, validateForm]);\r\n\r\n  const handleInputChange = (field: keyof LocationFormData, value: string | number) => {\r\n    setFormData(prev => ({ ...prev, [field]: value }));\r\n    // Clear error when user starts typing\r\n    if (errors[field]) {\r\n      setErrors(prev => ({ ...prev, [field]: undefined }));\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n      <div className=\"bg-white rounded-lg shadow-xl max-w-md w-full mx-4\">\r\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <MapPin className=\"h-5 w-5 text-orange-500\" />\r\n            <h2 className=\"text-lg font-semibold text-gray-900\">Add Service Location</h2>\r\n          </div>\r\n          <Button\r\n            onClick={onClose}\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            className=\"text-gray-400 hover:text-gray-600 p-1\"\r\n          >\r\n            <X className=\"h-5 w-5\" />\r\n          </Button>\r\n        </div>\r\n\r\n        <form onSubmit={(e) => { void handleSubmit(e); }} className=\"p-6 space-y-4\">\r\n          {errors.general && (\r\n            <div className=\"bg-red-50 border border-red-200 rounded-md p-3\">\r\n              <p className=\"text-sm text-red-600\">{errors.general}</p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Location Fields */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n            <div>\r\n              <label htmlFor=\"city\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                City *\r\n              </label>\r\n              <input\r\n                id=\"city\"\r\n                type=\"text\"\r\n                value={formData.city}\r\n                onChange={(e) => { handleInputChange('city', e.target.value); }}\r\n                className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent ${\r\n                  errors.city ? 'border-red-300' : 'border-gray-300'\r\n                }`}\r\n                placeholder=\"Enter city name\"\r\n              />\r\n              {errors.city && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{errors.city}</p>\r\n              )}\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"state\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                State *\r\n              </label>\r\n              <input\r\n                id=\"state\"\r\n                type=\"text\"\r\n                value={formData.state}\r\n                onChange={(e) => { handleInputChange('state', e.target.value.toUpperCase()); }}\r\n                className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent ${\r\n                  errors.state ? 'border-red-500 bg-red-50' : 'border-gray-300'\r\n                }`}\r\n                placeholder=\"CA, NY, TX\"\r\n                maxLength={2}\r\n              />\r\n              {errors.state && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{errors.state}</p>\r\n              )}\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"zip\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                ZIP Code\r\n              </label>\r\n              <input\r\n                id=\"zip\"\r\n                type=\"text\"\r\n                value={formData.zip}\r\n                onChange={(e) => { handleInputChange('zip', e.target.value); }}\r\n                className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent ${\r\n                  errors.zip ? 'border-red-300' : 'border-gray-300'\r\n                }`}\r\n                placeholder=\"12345 or 12345-6789\"\r\n              />\r\n              {errors.zip && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{errors.zip}</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Pricing fields */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div>\r\n              <label htmlFor=\"minimum\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Minimum\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                id=\"minimum\"\r\n                value={formData.minimum || ''}\r\n                onChange={(e) => { handleInputChange('minimum', parseFloat(e.target.value) || 0); }}\r\n                className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent ${\r\n                  errors.minimum ? 'border-red-300' : 'border-gray-300'\r\n                }`}\r\n                placeholder=\"0.00\"\r\n                step=\"0.01\"\r\n                min=\"0\"\r\n              />\r\n              {errors.minimum && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{errors.minimum}</p>\r\n              )}\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"multiplier\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Multiplier\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                id=\"multiplier\"\r\n                value={formData.multiplier || ''}\r\n                onChange={(e) => { handleInputChange('multiplier', parseFloat(e.target.value) || 1.0); }}\r\n                className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent ${\r\n                  errors.multiplier ? 'border-red-300' : 'border-gray-300'\r\n                }`}\r\n                placeholder=\"1.00\"\r\n                step=\"0.01\"\r\n                min=\"0.01\"\r\n              />\r\n              {errors.multiplier && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{errors.multiplier}</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex justify-end space-x-3 pt-4\">\r\n            <Button\r\n              type=\"button\"\r\n              onClick={onClose}\r\n              variant=\"secondary\"\r\n              size=\"md\"\r\n              className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200\"\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              type=\"submit\"\r\n              variant=\"primary\"\r\n              size=\"md\"\r\n              className=\"px-4 py-2 text-sm font-medium bg-orange-500 hover:bg-orange-600 disabled:bg-orange-300\"\r\n              loading={isSubmitting}\r\n              disabled={isSubmitting}\r\n              leftIcon={<Plus className=\"h-4 w-4\" />}\r\n            >\r\n              Add Location\r\n            </Button>\r\n          </div>\r\n        </form>\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { AlertTriangle, Trash2, X } from 'lucide-react';\r\n\r\nimport { Button } from '@/shared/ui';\r\n\r\nimport type { ServiceArea } from '../types';\r\n\r\ninterface DeleteLocationModalProps {\r\n  isOpen: boolean;\r\n  location: ServiceArea | null;\r\n  onClose: () => void;\r\n  onConfirm: () => Promise<void>;\r\n  isDeleting?: boolean;\r\n}\r\n\r\nexport const DeleteLocationModal: React.FC<DeleteLocationModalProps> = ({\r\n  isOpen,\r\n  location,\r\n  onClose,\r\n  onConfirm,\r\n  isDeleting = false\r\n}) => {\r\n  if (!isOpen || !location) return null;\r\n\r\n  const formatLocation = () => {\r\n    const parts = [location.city, location.state];\r\n    if (location.zip) {\r\n      parts.push(location.zip);\r\n    }\r\n    return parts.join(', ');\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n      <div className=\"bg-white rounded-lg shadow-xl max-w-md w-full mx-4\">\r\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <AlertTriangle className=\"h-5 w-5 text-red-500\" />\r\n            <h2 className=\"text-lg font-semibold text-gray-900\">Delete Location</h2>\r\n          </div>\r\n          <Button\r\n            onClick={onClose}\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            className=\"text-gray-400 hover:text-gray-600 disabled:text-gray-300 p-1\"\r\n            disabled={isDeleting}\r\n          >\r\n            <X className=\"h-5 w-5\" />\r\n          </Button>\r\n        </div>\r\n\r\n        <div className=\"p-6\">\r\n          <div className=\"mb-4\">\r\n            <p className=\"text-sm text-gray-600 mb-2\">\r\n              Are you sure you want to delete this service location?\r\n            </p>\r\n            <div className=\"bg-gray-50 border border-gray-200 rounded-md p-3\">\r\n              <div className=\"flex items-center space-x-2\">\r\n                <div className=\"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center\">\r\n                  <Trash2 className=\"h-4 w-4 text-orange-500\" />\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-gray-900\">{location.city}</p>\r\n                  <p className=\"text-xs text-gray-500\">{formatLocation()}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-yellow-50 border border-yellow-200 rounded-md p-3 mb-4\">\r\n            <div className=\"flex\">\r\n              <AlertTriangle className=\"h-4 w-4 text-yellow-400 mt-0.5 mr-2 flex-shrink-0\" />\r\n              <div>\r\n                <p className=\"text-sm text-yellow-800\">\r\n                  <strong>Warning:</strong> This action cannot be undone. Customers in this area will no longer be able to find your services.\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex justify-end space-x-3\">\r\n            <Button\r\n              onClick={onClose}\r\n              variant=\"secondary\"\r\n              size=\"md\"\r\n              className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 disabled:bg-gray-50 disabled:text-gray-400\"\r\n              disabled={isDeleting}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              onClick={() => { void onConfirm(); }}\r\n              variant=\"destructive\"\r\n              size=\"md\"\r\n              className=\"px-4 py-2 text-sm font-medium bg-red-500 hover:bg-red-600 disabled:bg-red-300\"\r\n              loading={isDeleting}\r\n              disabled={isDeleting}\r\n              leftIcon={<Trash2 className=\"h-4 w-4\" />}\r\n            >\r\n              Delete Location\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { MapPin } from 'lucide-react';\r\n\r\nimport { isValidStateCode } from '@/shared';\r\nimport { Button } from '@/shared/ui';\r\n\r\nimport type { ServiceArea } from '../types';\r\n\r\ninterface PrimaryServiceAreaProps {\r\n  primaryServiceArea: ServiceArea | undefined;\r\n  isEditMode: boolean;\r\n  onEditModeChange: (editMode: boolean) => void;\r\n  onLocationUpdate: (field: keyof ServiceArea, value: string | number) => void;\r\n  apiLoaded: boolean;\r\n}\r\n\r\nconst PrimaryServiceArea: React.FC<PrimaryServiceAreaProps> = ({\r\n  primaryServiceArea,\r\n  isEditMode,\r\n  onEditModeChange,\r\n  onLocationUpdate,\r\n  apiLoaded: _apiLoaded,\r\n}) => {\r\n  const [errors, setErrors] = useState<{ state?: string }>({});\r\n\r\n  const _handleLocationSelect = (place: { city: string; state: string; zipCode: string }) => {\r\n    onLocationUpdate('city', place.city);\r\n    onLocationUpdate('state', place.state);\r\n    onLocationUpdate('zip', parseInt(place.zipCode) || null);\r\n    onEditModeChange(false);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setErrors({});\r\n    onEditModeChange(false);\r\n  };\r\n\r\n  const handleStateChange = (value: string) => {\r\n    const upperValue = value.toUpperCase();\r\n    onLocationUpdate('state', upperValue);\r\n    \r\n    // Clear error when user starts typing\r\n    if (errors.state) {\r\n      setErrors({});\r\n    }\r\n  };\r\n\r\n  const handleSave = () => {\r\n    if (!primaryServiceArea) return;\r\n    \r\n    // Validate state\r\n    if (!isValidStateCode(primaryServiceArea.state)) {\r\n      setErrors({ state: 'Please enter a valid 2-letter state code (e.g., CA, NY, TX)' });\r\n      return;\r\n    }\r\n    \r\n    // Clear errors and exit edit mode\r\n    setErrors({});\r\n    onEditModeChange(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h3 className=\"text-lg font-semibold text-orange-500\">Primary Service Area</h3>\r\n      </div>\r\n      \r\n      <div className=\"bg-stone-800 border border-stone-700 rounded-lg p-6\">\r\n        {!primaryServiceArea ? (\r\n          <div className=\"bg-yellow-50 border border-yellow-200 rounded-md p-4\">\r\n            <p className=\"text-sm text-yellow-600\">No primary service area found</p>\r\n          </div>\r\n        ) : isEditMode ? (\r\n          <div className=\"space-y-4\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n              <div>\r\n                <label htmlFor=\"primary-city\" className=\"block text-sm font-medium text-gray-300 mb-1\">City *</label>\r\n                <input\r\n                  id=\"primary-city\"\r\n                  type=\"text\"\r\n                  value={primaryServiceArea.city}\r\n                  onChange={(e) => { onLocationUpdate('city', e.target.value); }}\r\n                  className=\"w-full px-3 py-2 border border-stone-700 bg-stone-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\r\n                  placeholder=\"Enter city name\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label htmlFor=\"primary-state\" className=\"block text-sm font-medium text-gray-300 mb-1\">State *</label>\r\n                <input\r\n                  id=\"primary-state\"\r\n                  type=\"text\"\r\n                  value={primaryServiceArea.state}\r\n                  onChange={(e) => { handleStateChange(e.target.value); }}\r\n                  className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500 ${\r\n                    errors.state ? 'border-red-500 bg-red-900/20' : 'border-stone-700 bg-stone-700'\r\n                  } text-white`}\r\n                  placeholder=\"CA, NY, TX\"\r\n                  maxLength={2}\r\n                />\r\n                {errors.state && (\r\n                  <p className=\"mt-1 text-sm text-red-400\">{errors.state}</p>\r\n                )}\r\n              </div>\r\n              <div>\r\n                <label htmlFor=\"primary-zip\" className=\"block text-sm font-medium text-gray-300 mb-1\">ZIP Code</label>\r\n                <input\r\n                  id=\"primary-zip\"\r\n                  type=\"text\"\r\n                  value={primaryServiceArea.zip || ''}\r\n                  onChange={(e) => { onLocationUpdate('zip', e.target.value); }}\r\n                  className=\"w-full px-3 py-2 border border-stone-700 bg-stone-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\r\n                  placeholder=\"12345 or 12345-6789\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"flex justify-end space-x-3\">\r\n              <Button\r\n                onClick={handleCancel}\r\n                variant=\"secondary\"\r\n                size=\"sm\"\r\n                className=\"px-4 py-2\"\r\n              >\r\n                Cancel\r\n              </Button>\r\n              <Button\r\n                onClick={handleSave}\r\n                variant=\"primary\"\r\n                size=\"sm\"\r\n                className=\"px-4 py-2\"\r\n              >\r\n                Save\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-4\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n              <div>\r\n                <div className=\"block text-sm font-medium text-gray-300 mb-1\">City</div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <MapPin className=\"h-4 w-4 text-gray-400\" />\r\n                  <span className=\"text-white\">{primaryServiceArea.city}</span>\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <div className=\"block text-sm font-medium text-gray-300 mb-1\">State</div>\r\n                <span className=\"text-white\">{primaryServiceArea.state}</span>\r\n              </div>\r\n              <div>\r\n                <div className=\"block text-sm font-medium text-gray-300 mb-1\">ZIP Code</div>\r\n                <span className=\"text-white\">{primaryServiceArea.zip || 'N/A'}</span>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"flex justify-end\">\r\n              <Button\r\n                onClick={() => { onEditModeChange(true); }}\r\n                variant=\"secondary\"\r\n                size=\"sm\"\r\n                className=\"px-4 py-2 bg-stone-700 hover:bg-stone-600 text-sm font-medium rounded-lg\"\r\n              >\r\n                Edit Location\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PrimaryServiceArea;\r\n","import React, { useState } from 'react';\r\nimport { ChevronDown, ChevronRight, MapPin, Plus, Trash2 } from 'lucide-react';\r\n\r\nimport { isValidStateCode } from '@/shared';\r\nimport { Button } from '@/shared/ui';\r\n\r\nimport type { ServiceArea } from '../types';\r\n\r\ninterface ServiceAreasListProps {\r\n  locationsByState: Record<string, ServiceArea[]>;\r\n  stateNames: string[];\r\n  expandedStates: Set<string>;\r\n  isEditMode: boolean;\r\n  editingLocationId: string | null;\r\n  apiLoaded: boolean;\r\n  onToggleStateExpansion: (state: string) => void;\r\n  onEditModeChange: (editMode: boolean) => void;\r\n  onStartEditingLocation: (locationId: string) => void;\r\n  onStopEditingLocation: () => void;\r\n  onLocationUpdate: (locationId: string, field: keyof ServiceArea, value: string | number) => void;\r\n  onDeleteLocation: (location: ServiceArea) => void;\r\n  onLocationSelect: (place: { city: string; state: string; zipCode: string }) => void;\r\n}\r\n\r\nconst ServiceAreasList: React.FC<ServiceAreasListProps> = ({\r\n  locationsByState,\r\n  stateNames,\r\n  expandedStates,\r\n  isEditMode,\r\n  editingLocationId,\r\n  apiLoaded: _apiLoaded,\r\n  onToggleStateExpansion,\r\n  onEditModeChange,\r\n  onStartEditingLocation,\r\n  onStopEditingLocation,\r\n  onLocationUpdate,\r\n  onDeleteLocation,\r\n  onLocationSelect,\r\n}) => {\r\n  const [errors, setErrors] = useState<Record<string, { state?: string }>>({});\r\n  \r\n  // Form state for adding new location\r\n  const [newLocationForm, setNewLocationForm] = useState({\r\n    city: '',\r\n    state: '',\r\n    zip: ''\r\n  });\r\n\r\n  const handleStateChange = (locationId: string, value: string) => {\r\n    const upperValue = value.toUpperCase();\r\n    onLocationUpdate(locationId, 'state', upperValue);\r\n    \r\n    // Clear error when user starts typing\r\n    if (errors[locationId]?.state) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [locationId]: { ...prev[locationId], state: undefined }\r\n      }));\r\n    }\r\n  };\r\n\r\n  const handleNewLocationInputChange = (field: 'city' | 'state' | 'zip', value: string) => {\r\n    const processedValue = field === 'state' ? value.toUpperCase() : value;\r\n    setNewLocationForm(prev => ({ ...prev, [field]: processedValue }));\r\n  };\r\n\r\n  const handleSave = (locationId: string, location: ServiceArea) => {\r\n    // Validate state\r\n    if (!isValidStateCode(location.state)) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [locationId]: { state: 'Please enter a valid 2-letter state code (e.g., CA, NY, TX)' }\r\n      }));\r\n      return;\r\n    }\r\n    \r\n    // Clear errors and stop editing\r\n    setErrors(prev => {\r\n      const { [locationId]: _removed, ...newErrors } = prev;\r\n      return newErrors;\r\n    });\r\n    onStopEditingLocation();\r\n  };\r\n  const _handleLocationSelect = (place: { city: string; state: string; zipCode: string }) => {\r\n    onLocationSelect(place);\r\n    onEditModeChange(false);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    // Reset form when canceling\r\n    setNewLocationForm({ city: '', state: '', zip: '' });\r\n    onEditModeChange(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center space-x-4\">\r\n          <h3 className=\"text-lg font-semibold text-orange-500\">Service Areas</h3>\r\n          {stateNames.length > 0 && (\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Button\r\n                onClick={() => { onToggleStateExpansion('expand-all'); }}\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                className=\"text-xs text-gray-500 hover:text-orange-500\"\r\n              >\r\n                Expand All\r\n              </Button>\r\n              <span className=\"text-gray-300\">|</span>\r\n              <Button\r\n                onClick={() => { onToggleStateExpansion('collapse-all'); }}\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                className=\"text-xs text-gray-500 hover:text-orange-500\"\r\n              >\r\n                Collapse All\r\n              </Button>\r\n            </div>\r\n          )}\r\n        </div>\r\n        {!isEditMode && (\r\n          <Button\r\n            onClick={() => { onEditModeChange(true); }}\r\n            variant=\"primary\"\r\n            size=\"md\"\r\n            className=\"px-4 py-2 bg-orange-500 hover:bg-orange-600 text-sm font-medium rounded-lg\"\r\n            leftIcon={<Plus className=\"h-4 w-4\" />}\r\n          >\r\n            Add Location\r\n          </Button>\r\n        )}\r\n      </div>\r\n      \r\n      {isEditMode && (\r\n        <div className=\"bg-stone-800 border border-stone-700 rounded-lg p-6\">\r\n          <div className=\"space-y-4\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n              <div>\r\n                <label htmlFor=\"new-location-city\" className=\"block text-sm font-medium text-gray-300 mb-1\">City *</label>\r\n                <input\r\n                  id=\"new-location-city\"\r\n                  type=\"text\"\r\n                  value={newLocationForm.city}\r\n                  onChange={(e) => { handleNewLocationInputChange('city', e.target.value); }}\r\n                  className=\"w-full px-3 py-2 border border-stone-700 bg-stone-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\r\n                  placeholder=\"Enter city name\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label htmlFor=\"new-location-state\" className=\"block text-sm font-medium text-gray-300 mb-1\">State *</label>\r\n                <input\r\n                  id=\"new-location-state\"\r\n                  type=\"text\"\r\n                  value={newLocationForm.state}\r\n                  onChange={(e) => { handleNewLocationInputChange('state', e.target.value); }}\r\n                  className=\"w-full px-3 py-2 border border-stone-700 bg-stone-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\r\n                  placeholder=\"CA, NY, TX\"\r\n                  maxLength={2}\r\n                />\r\n              </div>\r\n              <div>\r\n                <label htmlFor=\"new-location-zip\" className=\"block text-sm font-medium text-gray-300 mb-1\">ZIP Code</label>\r\n                <input\r\n                  id=\"new-location-zip\"\r\n                  type=\"text\"\r\n                  value={newLocationForm.zip}\r\n                  onChange={(e) => { handleNewLocationInputChange('zip', e.target.value); }}\r\n                  className=\"w-full px-3 py-2 border border-stone-700 bg-stone-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\r\n                  placeholder=\"12345 or 12345-6789\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"flex justify-end space-x-3\">\r\n              <Button\r\n                onClick={handleCancel}\r\n                variant=\"secondary\"\r\n                size=\"sm\"\r\n                className=\"px-4 py-2\"\r\n              >\r\n                Cancel\r\n              </Button>\r\n              <Button\r\n                onClick={() => {\r\n                  // Validate form\r\n                  if (!newLocationForm.city.trim()) {\r\n                    alert('Please enter a city');\r\n                    return;\r\n                  }\r\n                  if (!newLocationForm.state.trim()) {\r\n                    alert('Please enter a state');\r\n                    return;\r\n                  }\r\n                  if (!isValidStateCode(newLocationForm.state)) {\r\n                    alert('Please enter a valid 2-letter state code (e.g., CA, NY, TX)');\r\n                    return;\r\n                  }\r\n                  \r\n                  // Call onLocationSelect with actual form data\r\n                  const formData = {\r\n                    city: newLocationForm.city.trim(),\r\n                    state: newLocationForm.state.trim(),\r\n                    zipCode: newLocationForm.zip.trim()\r\n                  };\r\n                  onLocationSelect(formData);\r\n                  \r\n                  // Reset form\r\n                  setNewLocationForm({ city: '', state: '', zip: '' });\r\n                }}\r\n                variant=\"primary\"\r\n                size=\"sm\"\r\n                className=\"px-4 py-2\"\r\n              >\r\n                Save\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {/* State-organized Service Areas */}\r\n      {stateNames.length > 0 ? (\r\n        <div className=\"space-y-3\">\r\n          {stateNames.map((state) => {\r\n            const stateLocations = locationsByState[state];\r\n            const isExpanded = expandedStates.has(state);\r\n            const locationCount = stateLocations?.length || 0;\r\n            \r\n            return (\r\n              <div key={state} className=\"bg-stone-800 border border-stone-700 rounded-lg overflow-hidden\">\r\n                {/* State Header */}\r\n                <button\r\n                  onClick={() => { onToggleStateExpansion(state); }}\r\n                  className=\"w-full px-6 py-4 flex items-center justify-between hover:bg-stone-700 transition-colors\"\r\n                >\r\n                  <div className=\"flex items-center space-x-3\">\r\n                    {isExpanded ? (\r\n                      <ChevronDown className=\"h-5 w-5 text-orange-500\" />\r\n                    ) : (\r\n                      <ChevronRight className=\"h-5 w-5 text-orange-500\" />\r\n                    )}\r\n                    <h4 className=\"text-lg font-semibold text-white\">{state}</h4>\r\n                    <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800\">\r\n                      {locationCount} {locationCount === 1 ? 'location' : 'locations'}\r\n                    </span>\r\n                  </div>\r\n                </button>\r\n                \r\n                {/* State Locations */}\r\n                {isExpanded && stateLocations && (\r\n                  <div className=\"border-t border-stone-700\">\r\n                    <div className=\"p-6 space-y-4\">\r\n                      {stateLocations.map((location, index) => {\r\n                        const locationId = `${location.city}-${location.state}`;\r\n                        const isEditingThisLocation = editingLocationId === locationId;\r\n                        \r\n                        return (\r\n                          <div key={`${location.city}-${location.state}-${(index + 1).toString()}`} className=\"bg-stone-700 border border-stone-600 rounded-lg p-4\">\r\n                            {isEditingThisLocation ? (\r\n                              <div className=\"space-y-4\">\r\n                                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                                  <div>\r\n                                    <label htmlFor={`edit-city-${locationId}`} className=\"block text-sm font-medium text-gray-300 mb-1\">City *</label>\r\n                                    <input\r\n                                      id={`edit-city-${locationId}`}\r\n                                      type=\"text\"\r\n                                      value={location.city}\r\n                                      onChange={(e) => { onLocationUpdate(locationId, 'city', e.target.value); }}\r\n                                      className=\"w-full px-3 py-2 border border-stone-700 bg-stone-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\r\n                                      placeholder=\"Enter city name\"\r\n                                    />\r\n                                  </div>\r\n                                  <div>\r\n                                    <label htmlFor={`edit-state-${locationId}`} className=\"block text-sm font-medium text-gray-300 mb-1\">State *</label>\r\n                                    <input\r\n                                      id={`edit-state-${locationId}`}\r\n                                      type=\"text\"\r\n                                      value={location.state}\r\n                                      onChange={(e) => { handleStateChange(locationId, e.target.value); }}\r\n                                      className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500 ${\r\n                                        errors[locationId]?.state ? 'border-red-500 bg-red-900/20' : 'border-stone-700 bg-stone-700'\r\n                                      } text-white`}\r\n                                      placeholder=\"CA, NY, TX\"\r\n                                      maxLength={2}\r\n                                    />\r\n                                    {errors[locationId]?.state && (\r\n                                      <p className=\"mt-1 text-sm text-red-400\">{errors[locationId].state}</p>\r\n                                    )}\r\n                                  </div>\r\n                                  <div>\r\n                                    <label htmlFor={`edit-zip-${locationId}`} className=\"block text-sm font-medium text-gray-300 mb-1\">ZIP Code</label>\r\n                                    <input\r\n                                      id={`edit-zip-${locationId}`}\r\n                                      type=\"text\"\r\n                                      value={location.zip || ''}\r\n                                      onChange={(e) => { onLocationUpdate(locationId, 'zip', e.target.value); }}\r\n                                      className=\"w-full px-3 py-2 border border-stone-700 bg-stone-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\r\n                                      placeholder=\"12345 or 12345-6789\"\r\n                                    />\r\n                                  </div>\r\n                                </div>\r\n                                <div className=\"flex justify-end space-x-3\">\r\n                                  <Button\r\n                                    onClick={onStopEditingLocation}\r\n                                    variant=\"secondary\"\r\n                                    size=\"sm\"\r\n                                    className=\"px-4 py-2\"\r\n                                  >\r\n                                    Cancel\r\n                                  </Button>\r\n                                  <Button\r\n                                    onClick={() => { handleSave(locationId, location); }}\r\n                                    variant=\"primary\"\r\n                                    size=\"sm\"\r\n                                    className=\"px-4 py-2\"\r\n                                  >\r\n                                    Save\r\n                                  </Button>\r\n                                </div>\r\n                              </div>\r\n                            ) : (\r\n                              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4\">\r\n                                <div>\r\n                                  <label htmlFor={`readonly-city-${locationId}`} className=\"block text-sm font-medium text-gray-300 mb-1\">City</label>\r\n                                  <input\r\n                                    id={`readonly-city-${locationId}`}\r\n                                    type=\"text\"\r\n                                    value={location.city}\r\n                                    readOnly\r\n                                    onClick={() => { onStartEditingLocation(locationId); }}\r\n                                    className=\"w-full px-3 py-2 border border-stone-600 rounded-md bg-stone-600 text-white cursor-pointer hover:bg-stone-500 transition-colors\"\r\n                                    title=\"Click to edit location\"\r\n                                  />\r\n                                </div>\r\n                                <div>\r\n                                  <label htmlFor={`readonly-state-${locationId}`} className=\"block text-sm font-medium text-gray-300 mb-1\">State</label>\r\n                                  <input\r\n                                    id={`readonly-state-${locationId}`}\r\n                                    type=\"text\"\r\n                                    value={location.state}\r\n                                    readOnly\r\n                                    onClick={() => { onStartEditingLocation(locationId); }}\r\n                                    className=\"w-full px-3 py-2 border border-stone-600 rounded-md bg-stone-600 text-white cursor-pointer hover:bg-stone-500 transition-colors\"\r\n                                    title=\"Click to edit location\"\r\n                                  />\r\n                                </div>\r\n                                <div>\r\n                                  <label htmlFor={`readonly-zip-${locationId}`} className=\"block text-sm font-medium text-gray-300 mb-1\">ZIP Code</label>\r\n                                  <input\r\n                                    id={`readonly-zip-${locationId}`}\r\n                                    type=\"text\"\r\n                                    value={location.zip || 'N/A'}\r\n                                    readOnly\r\n                                    onClick={() => { onStartEditingLocation(locationId); }}\r\n                                    className=\"w-full px-3 py-2 border border-stone-600 rounded-md bg-stone-600 text-white cursor-pointer hover:bg-stone-500 transition-colors\"\r\n                                    title=\"Click to edit location\"\r\n                                  />\r\n                                </div>\r\n                                <div className=\"lg:col-span-2 flex items-end\">\r\n                                  <Button\r\n                                    onClick={() => { onDeleteLocation(location); }}\r\n                                    variant=\"ghost\"\r\n                                    size=\"sm\"\r\n                                    className=\"text-red-400 hover:text-red-300 hover:bg-red-900/20 p-2\"\r\n                                    title=\"Delete location\"\r\n                                  >\r\n                                    <Trash2 className=\"h-4 w-4\" />\r\n                                  </Button>\r\n                                </div>\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      ) : (\r\n        <div className=\"bg-stone-800 border border-stone-700 rounded-lg p-6 text-center\">\r\n          <MapPin className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\r\n          <h3 className=\"text-lg font-medium text-gray-300 mb-2\">No Service Areas</h3>\r\n          <p className=\"text-gray-500\">Add locations where you provide services to get started.</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ServiceAreasList;\r\n","import { useCallback, useEffect, useState } from 'react';\r\n\r\nimport { getGoogle, hasImportLibrary } from '@/shared';\r\nimport { config } from '@/shared/env';\r\n\r\nexport const useGoogleMaps = () => {\r\n  const [apiLoaded, setApiLoaded] = useState(false);\r\n\r\n  const checkAPIReady = useCallback(async (): Promise<void> => {\r\n    try {\r\n      if (!hasImportLibrary()) {\r\n        setTimeout(() => { void checkAPIReady(); }, 250);\r\n        return;\r\n      }\r\n      \r\n      const g = getGoogle();\r\n      if (!g?.maps.importLibrary) {\r\n        setTimeout(() => { void checkAPIReady(); }, 250);\r\n        return;\r\n      }\r\n      \r\n      await g.maps.importLibrary('places');\r\n      \r\n      setApiLoaded(true);\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : String(error);\r\n      console.error('Google Maps API initialization error:', msg);\r\n      setApiLoaded(false);\r\n    }\r\n  }, []);\r\n\r\n  const loadGooglePlacesAPI = useCallback((): void => {\r\n    const g = getGoogle();\r\n    if (g?.maps) {\r\n      setTimeout(() => { void checkAPIReady(); }, 300);\r\n      return;\r\n    }\r\n    \r\n    if (document.querySelector('script[src*=\"maps.googleapis.com\"]')) {\r\n      setTimeout(() => { void checkAPIReady(); }, 500);\r\n      return;\r\n    }\r\n    \r\n    const script = document.createElement('script');\r\n    const apiKey = config.googleMapsApiKey;\r\n    \r\n    if (!apiKey) {\r\n      console.error('Google Maps API key not found. Please set VITE_GOOGLE_MAPS_API_KEY in your .env file');\r\n      setApiLoaded(false);\r\n      return;\r\n    }\r\n    \r\n    script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&libraries=places&v=beta&loading=async`;\r\n    script.async = true;\r\n    script.defer = true;\r\n    script.onload = () => { void setTimeout(() => { void checkAPIReady(); }, 500); };\r\n    script.onerror = (err: unknown) => {\r\n      const msg = err instanceof Error ? err.message : String(err);\r\n      console.error('Failed to load Google Maps JS API', msg);\r\n      setApiLoaded(false);\r\n    };\r\n    document.head.appendChild(script);\r\n  }, [checkAPIReady]);\r\n\r\n  useEffect(() => {\r\n    loadGooglePlacesAPI();\r\n  }, [loadGooglePlacesAPI]);\r\n\r\n  return { apiLoaded };\r\n};\r\n","import { useCallback, useState } from 'react';\r\n\r\nimport type { ServiceArea } from '../types';\r\n\r\nexport const useLocationState = () => {\r\n  const [isAddModalOpen, setIsAddModalOpen] = useState(false);\r\n  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);\r\n  const [locationToDelete, setLocationToDelete] = useState<ServiceArea | null>(null);\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n  const [expandedStates, setExpandedStates] = useState<Set<string>>(new Set());\r\n  const [editingLocationId, setEditingLocationId] = useState<string | null>(null);\r\n\r\n  const toggleStateExpansion = useCallback((state: string) => {\r\n    setExpandedStates(prev => {\r\n      const newSet = new Set(prev);\r\n      if (newSet.has(state)) {\r\n        newSet.delete(state);\r\n      } else {\r\n        newSet.add(state);\r\n      }\r\n      return newSet;\r\n    });\r\n  }, []);\r\n\r\n  const expandAllStates = useCallback((stateNames: string[]) => {\r\n    setExpandedStates(new Set(stateNames));\r\n  }, []);\r\n\r\n  const collapseAllStates = useCallback(() => {\r\n    setExpandedStates(new Set());\r\n  }, []);\r\n\r\n  const openDeleteModal = useCallback((location: ServiceArea) => {\r\n    setLocationToDelete(location);\r\n    setIsDeleteModalOpen(true);\r\n  }, []);\r\n\r\n  const closeDeleteModal = useCallback(() => {\r\n    setIsDeleteModalOpen(false);\r\n    setLocationToDelete(null);\r\n  }, []);\r\n\r\n  const startEditingLocation = useCallback((locationId: string) => {\r\n    setEditingLocationId(locationId);\r\n  }, []);\r\n\r\n  const stopEditingLocation = useCallback(() => {\r\n    setEditingLocationId(null);\r\n  }, []);\r\n\r\n  return {\r\n    // Modal state\r\n    isAddModalOpen,\r\n    setIsAddModalOpen,\r\n    isDeleteModalOpen,\r\n    locationToDelete,\r\n    isDeleting,\r\n    setIsDeleting,\r\n    openDeleteModal,\r\n    closeDeleteModal,\r\n    \r\n    // State expansion\r\n    expandedStates,\r\n    toggleStateExpansion,\r\n    expandAllStates,\r\n    collapseAllStates,\r\n    \r\n    // Location editing\r\n    editingLocationId,\r\n    startEditingLocation,\r\n    stopEditingLocation,\r\n  };\r\n};\r\n","import React, { useMemo, useState } from 'react';\r\nimport { AlertCircle } from 'lucide-react';\r\n\r\nimport type { DetailerData } from '@/features/tenantDashboard/types';\r\n\r\nimport { addServiceArea, deleteServiceArea,saveServiceAreas } from '../../api/locationsApi';\r\nimport { useTenantBusinessData } from '../../hooks/useTenantBusinessData';\r\nimport { AddLocationModal } from './components/AddLocationModal';\r\nimport { DeleteLocationModal } from './components/DeleteLocationModal';\r\nimport PrimaryServiceArea from './components/PrimaryServiceArea';\r\nimport ServiceAreasList from './components/ServiceAreasList';\r\nimport { useGoogleMaps } from './hooks/useGoogleMaps';\r\nimport { useLocationState } from './hooks/useLocationState';\r\nimport type { ServiceArea } from './types';\r\n\r\ninterface LocationsTabProps {\r\n  detailerData?: DetailerData;\r\n}\r\n\r\nconst LocationsTab: React.FC<LocationsTabProps> = () => {\r\n  const { apiLoaded } = useGoogleMaps();\r\n  \r\n  const {\r\n    primaryServiceArea,\r\n    otherServiceAreas,\r\n    loading,\r\n    error,\r\n    refetch\r\n  } = useTenantBusinessData();\r\n\r\n  const {\r\n    isAddModalOpen,\r\n    setIsAddModalOpen,\r\n    isDeleteModalOpen,\r\n    locationToDelete,\r\n    isDeleting,\r\n    setIsDeleting,\r\n    openDeleteModal,\r\n    closeDeleteModal,\r\n    expandedStates,\r\n    toggleStateExpansion,\r\n    expandAllStates,\r\n    collapseAllStates,\r\n    editingLocationId,\r\n    startEditingLocation,\r\n    stopEditingLocation,\r\n  } = useLocationState();\r\n\r\n  // Primary service area edit state\r\n  const [isPrimaryEditMode, setIsPrimaryEditMode] = useState(false);\r\n  \r\n  // Service area edit state\r\n  const [isServiceAreaEditMode, setIsServiceAreaEditMode] = useState(false);\r\n  \r\n\r\n  // Group other service areas by state\r\n  const locationsByState = useMemo(() => {\r\n    const grouped: Record<string, ServiceArea[]> = {};\r\n    \r\n    otherServiceAreas.forEach(location => {\r\n      const state = location.state.toUpperCase();\r\n      if (state && !grouped[state]) {\r\n        grouped[state] = [];\r\n      }\r\n      if (state && grouped[state]) {\r\n        grouped[state].push(location);\r\n      }\r\n    });\r\n    \r\n    // Sort locations within each state by city\r\n    Object.keys(grouped).forEach(state => {\r\n      if (grouped[state]) {\r\n        grouped[state].sort((a, b) => a.city.localeCompare(b.city));\r\n      }\r\n    });\r\n    \r\n    return grouped;\r\n  }, [otherServiceAreas]);\r\n\r\n  // Get sorted state names\r\n  const stateNames = useMemo(() => {\r\n    return Object.keys(locationsByState).sort();\r\n  }, [locationsByState]);\r\n\r\n  // Handle state expansion actions\r\n  const handleToggleStateExpansion = (state: string) => {\r\n    if (state === 'expand-all') {\r\n      expandAllStates(stateNames);\r\n    } else if (state === 'collapse-all') {\r\n      collapseAllStates();\r\n    } else {\r\n      toggleStateExpansion(state);\r\n    }\r\n  };\r\n\r\n  // Get current tenant slug (you'll need to get this from context/URL)\r\n  const currentTenantSlug = 'jps'; // TODO: Get from tenant context\r\n\r\n  // Helper function to update primary service area\r\n  const updatePrimaryServiceAreaField = async (field: keyof ServiceArea, value: string | number) => {\r\n    if (!primaryServiceArea) return;\r\n    \r\n    try {\r\n      const updatedArea = { ...primaryServiceArea, [field]: value };\r\n      const allServiceAreas = [updatedArea, ...otherServiceAreas];\r\n      await saveServiceAreas(currentTenantSlug, allServiceAreas);\r\n      \r\n      // Refresh the data to show updated values\r\n      refetch();\r\n    } catch (error) {\r\n      console.error('Error updating primary service area:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  // Handle adding new location\r\n  const handleAddLocation = async (locationData: { city: string; state: string; zip?: string; minimum: number; multiplier: number }) => {\r\n    try {\r\n      await addServiceArea(currentTenantSlug, locationData);\r\n      setIsAddModalOpen(false);\r\n      \r\n      // Refresh the data to show new location\r\n      refetch();\r\n      return { success: true };\r\n    } catch (error) {\r\n      console.error('Error adding location:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  // Handle deleting location\r\n  const handleDeleteLocation = async () => {\r\n    if (!locationToDelete) return;\r\n    \r\n    setIsDeleting(true);\r\n    try {\r\n      await deleteServiceArea(currentTenantSlug, locationToDelete.id);\r\n      closeDeleteModal();\r\n      \r\n      // Refresh the data to show updated list\r\n      refetch();\r\n    } catch (error) {\r\n      console.error('Error deleting location:', error);\r\n      throw error;\r\n    } finally {\r\n      setIsDeleting(false);\r\n    }\r\n  };\r\n\r\n  // Handle location update\r\n  const handleLocationUpdate = async (locationId: string, field: keyof ServiceArea, value: string | number) => {\r\n    try {\r\n      const allServiceAreas = [...(primaryServiceArea ? [primaryServiceArea] : []), ...otherServiceAreas];\r\n      const updatedAreas = allServiceAreas.map(area => \r\n        area.id === locationId ? { ...area, [field]: value } : area\r\n      );\r\n      await saveServiceAreas(currentTenantSlug, updatedAreas);\r\n      \r\n      // Refresh the data to show updated values\r\n      refetch();\r\n    } catch (error) {\r\n      console.error('Error updating location:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  // Handle location select for service areas\r\n  const handleServiceAreaLocationSelect = async (place: { city: string; state: string; zipCode: string }) => {\r\n    await handleAddLocation({\r\n      city: place.city,\r\n      state: place.state,\r\n      zip: place.zipCode,\r\n      minimum: 0,\r\n      multiplier: 1,\r\n    });\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"space-y-6\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold text-white\">Service Locations</h2>\r\n            <p className=\"text-gray-400 mt-1\">Manage the areas where you provide services</p>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center justify-center py-12\">\r\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500\"></div>\r\n          <span className=\"ml-3 text-gray-400\">Loading locations...</span>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"space-y-6\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold text-white\">Service Locations</h2>\r\n            <p className=\"text-gray-400 mt-1\">Manage the areas where you provide services</p>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"bg-red-900/20 border border-red-500/20 rounded-lg p-6\">\r\n          <div className=\"flex items-center space-x-3\">\r\n            <AlertCircle className=\"h-5 w-5 text-red-400 flex-shrink-0\" />\r\n            <div>\r\n              <h3 className=\"text-sm font-medium text-red-300\">Error Loading Locations</h3>\r\n              <p className=\"text-sm text-red-400 mt-1\">{error}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Primary Service Area */}\r\n      {primaryServiceArea && (\r\n        <PrimaryServiceArea\r\n          primaryServiceArea={primaryServiceArea}\r\n          isEditMode={isPrimaryEditMode}\r\n          onEditModeChange={setIsPrimaryEditMode}\r\n          onLocationUpdate={(field, value) => { void updatePrimaryServiceAreaField(field, value); }}\r\n          apiLoaded={apiLoaded}\r\n        />\r\n      )}\r\n\r\n      {/* Service Areas */}\r\n      <ServiceAreasList\r\n        locationsByState={locationsByState}\r\n        stateNames={stateNames}\r\n        expandedStates={expandedStates}\r\n        isEditMode={isServiceAreaEditMode}\r\n        editingLocationId={editingLocationId}\r\n        apiLoaded={apiLoaded}\r\n        onToggleStateExpansion={handleToggleStateExpansion}\r\n        onEditModeChange={setIsServiceAreaEditMode}\r\n        onStartEditingLocation={startEditingLocation}\r\n        onStopEditingLocation={stopEditingLocation}\r\n        onLocationUpdate={(id, field, value) => { void handleLocationUpdate(id, field, value); }}\r\n        onDeleteLocation={openDeleteModal}\r\n        onLocationSelect={(place) => { void handleServiceAreaLocationSelect(place); }}\r\n      />\r\n\r\n      {/* Modals */}\r\n      <AddLocationModal\r\n        isOpen={isAddModalOpen}\r\n        onClose={() => { setIsAddModalOpen(false); }}\r\n        onAdd={handleAddLocation}\r\n      />\r\n\r\n      <DeleteLocationModal\r\n        isOpen={isDeleteModalOpen}\r\n        onClose={closeDeleteModal}\r\n        onConfirm={handleDeleteLocation}\r\n        location={locationToDelete}\r\n        isDeleting={isDeleting}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LocationsTab;\r\n","import React from 'react';\r\n\r\nexport const QuickActions: React.FC = () => {\r\n  // No quick actions for now - users can add their own shortcuts\r\n  return null;\r\n};\r\n\r\nexport default QuickActions;\r\n","import React from 'react';\n\nimport { QuickActions } from './components/QuickActions';\n\nexport const OverviewTab: React.FC = () => {\n  return (\n    <div className=\"space-y-6\">\n      <QuickActions />\n    </div>\n  );\n};\n\nexport default OverviewTab;","import { useEffect, useState } from 'react';\r\n\r\nimport { config } from '@/../config/env';\r\nimport { useTenantSlug } from '@/shared/hooks/useTenantSlug';\r\n\r\ninterface BusinessData {\r\n  id: string;\r\n  slug: string;\r\n  business_name: string;\r\n  owner: string;\r\n  business_email: string;\r\n  business_phone: string;\r\n  personal_email?: string;\r\n  personal_phone?: string;\r\n  first_name?: string;\r\n  last_name?: string;\r\n  twilio_phone?: string;\r\n  business_start_date?: string;\r\n  website?: string;\r\n  gbp_url?: string;\r\n  facebook_url?: string;\r\n  youtube_url?: string;\r\n  tiktok_url?: string;\r\n  instagram_url?: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\ninterface UseProfileDataReturn {\r\n  businessData: BusinessData | null;\r\n  loading: boolean;\r\n  error: string | null;\r\n  updateBusiness: (data: Partial<BusinessData>) => Promise<boolean>;\r\n  isUpdating: boolean;\r\n}\r\n\r\nexport const useProfileData = (): UseProfileDataReturn => {\r\n  const [businessData, setBusinessData] = useState<BusinessData | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [isUpdating, setIsUpdating] = useState(false);\r\n  \r\n  const slug = useTenantSlug();\r\n\r\n  // Fetch business data\r\n  useEffect(() => {\r\n    const fetchBusinessData = async () => {\r\n      if (!slug) {\r\n        setError('Business slug is required');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        const response = await fetch(`${config.apiUrl}/api/tenants/${slug}`);\r\n        \r\n        if (!response.ok) {\r\n          if (response.status === 404) {\r\n            throw new Error('Business not found');\r\n          }\r\n          throw new Error(`Failed to fetch business data: ${response.statusText}`);\r\n        }\r\n\r\n        const result = await response.json() as { data?: BusinessData };\r\n        const data = result.data;\r\n        \r\n        if (!data) {\r\n          throw new Error('No business data received');\r\n        }\r\n        \r\n        setBusinessData(data);\r\n      } catch (err) {\r\n        const errorMessage = err instanceof Error ? err.message : 'Failed to fetch business data';\r\n        setError(errorMessage);\r\n        console.error('Error fetching business data:', err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    void fetchBusinessData();\r\n  }, [slug]);\r\n\r\n  // Update business data\r\n  const updateBusiness = async (data: Partial<BusinessData>): Promise<boolean> => {\r\n    if (!slug) {\r\n      setError('Business slug is required');\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      setIsUpdating(true);\r\n      setError(null);\r\n\r\n      // Only send the fields that have values (not empty strings or undefined)\r\n      const updateData: Partial<BusinessData> = {};\r\n      \r\n      if (data.first_name !== undefined) updateData.first_name = data.first_name;\r\n      if (data.last_name !== undefined) updateData.last_name = data.last_name;\r\n      if (data.personal_phone !== undefined) updateData.personal_phone = data.personal_phone;\r\n      if (data.personal_email !== undefined) updateData.personal_email = data.personal_email;\r\n      if (data.business_name !== undefined) updateData.business_name = data.business_name;\r\n      if (data.business_email !== undefined) updateData.business_email = data.business_email;\r\n      if (data.business_phone !== undefined) updateData.business_phone = data.business_phone;\r\n      if (data.twilio_phone !== undefined) updateData.twilio_phone = data.twilio_phone;\r\n      if (data.business_start_date !== undefined) updateData.business_start_date = data.business_start_date;\r\n      if (data.website !== undefined) updateData.website = data.website;\r\n      if (data.gbp_url !== undefined) updateData.gbp_url = data.gbp_url;\r\n      if (data.facebook_url !== undefined) updateData.facebook_url = data.facebook_url;\r\n      if (data.facebook_enabled !== undefined) updateData.facebook_enabled = data.facebook_enabled;\r\n      if (data.youtube_url !== undefined) updateData.youtube_url = data.youtube_url;\r\n      if (data.youtube_enabled !== undefined) updateData.youtube_enabled = data.youtube_enabled;\r\n      if (data.tiktok_url !== undefined) updateData.tiktok_url = data.tiktok_url;\r\n      if (data.tiktok_enabled !== undefined) updateData.tiktok_enabled = data.tiktok_enabled;\r\n      if (data.instagram_url !== undefined) updateData.instagram_url = data.instagram_url;\r\n      if (data.instagram_enabled !== undefined) updateData.instagram_enabled = data.instagram_enabled;\r\n\r\n\r\n      const response = await fetch(`${config.apiUrl}/api/tenants/${slug}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(updateData),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Failed to update business data: ${response.statusText}`);\r\n      }\r\n\r\n      const result = await response.json() as { data?: BusinessData };\r\n      const updatedData = result.data;\r\n      \r\n      // Always update local state with the specific field that was changed\r\n      setBusinessData(prev => ({ ...prev, ...updateData }));\r\n      \r\n      return true;\r\n    } catch (err) {\r\n      const errorMessage = err instanceof Error ? err.message : 'Failed to update business data';\r\n      setError(errorMessage);\r\n      console.error('Error updating business data:', err);\r\n      return false;\r\n    } finally {\r\n      setIsUpdating(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    businessData,\r\n    loading,\r\n    error,\r\n    updateBusiness,\r\n    isUpdating,\r\n  };\r\n};","import { useEffect, useState } from 'react';\r\nimport { formatPhoneNumber, getPhoneDigits, useAutoSave } from '@/shared/utils';\r\n\r\nimport type { BusinessData } from '../types';\r\nimport { useProfileData } from './useProfileData';\r\n\r\n// Format Twilio phone number (keeps +1 prefix)\r\nconst formatTwilioPhone = (input: string): string => {\r\n  if (!input) return '';\r\n  \r\n  // Remove all non-digit characters except +\r\n  const cleaned = input.replace(/[^\\d+]/g, '');\r\n  \r\n  // If it starts with +1, keep it\r\n  if (cleaned.startsWith('+1') && cleaned.length === 12) {\r\n    const digits = cleaned.slice(2); // Remove +1\r\n    return `+1 (${digits.slice(0, 3)}) ${digits.slice(3, 6)}-${digits.slice(6)}`;\r\n  }\r\n  \r\n  // If it's 10 digits, add +1\r\n  if (cleaned.length === 10) {\r\n    return `+1 (${cleaned.slice(0, 3)}) ${cleaned.slice(3, 6)}-${cleaned.slice(6)}`;\r\n  }\r\n  \r\n  // If it's 11 digits starting with 1, add +\r\n  if (cleaned.length === 11 && cleaned.startsWith('1')) {\r\n    const digits = cleaned.slice(1);\r\n    return `+1 (${digits.slice(0, 3)}) ${digits.slice(3, 6)}-${digits.slice(6)}`;\r\n  }\r\n  \r\n  return cleaned; // Return as-is if doesn't match expected patterns\r\n};\r\n\r\n// Get Twilio phone digits (keeps +1 prefix)\r\nconst getTwilioPhoneDigits = (input: string): string => {\r\n  if (!input) return '';\r\n  \r\n  // Remove all non-digit characters except +\r\n  const cleaned = input.replace(/[^\\d+]/g, '');\r\n  \r\n  // If it starts with +1, keep it\r\n  if (cleaned.startsWith('+1') && cleaned.length === 12) {\r\n    return cleaned;\r\n  }\r\n  \r\n  // If it's 10 digits, add +1\r\n  if (cleaned.length === 10) {\r\n    return `+1${cleaned}`;\r\n  }\r\n  \r\n  // If it's 11 digits starting with 1, add +\r\n  if (cleaned.length === 11 && cleaned.startsWith('1')) {\r\n    return `+${cleaned}`;\r\n  }\r\n  \r\n  return cleaned;\r\n};\r\n\r\ninterface UseAutoSaveFieldOptions {\r\n  debounce?: number;\r\n  field: keyof BusinessData;\r\n}\r\n\r\nexport function useAutoSaveField(options: UseAutoSaveFieldOptions) {\r\n  const { debounce = 1000, field } = options;\r\n  const { updateBusiness, businessData } = useProfileData();\r\n  \r\n  // Get the current value for this field (reactive to businessData changes)\r\n  const getCurrentValue = (): string => {\r\n    if (!businessData) return '';\r\n    \r\n    switch (field) {\r\n      case 'personal_phone':\r\n      case 'business_phone':\r\n        return businessData[field] ? formatPhoneNumber(businessData[field]) : '';\r\n      case 'twilio_phone':\r\n        return businessData[field] ? formatTwilioPhone(businessData[field]) : '';\r\n      case 'business_start_date':\r\n        return businessData[field] ? \r\n          new Date(businessData[field]).toISOString().split('T')[0] : '';\r\n      default: {\r\n        const value = businessData[field] as string | number | unknown[] | null | undefined;\r\n        if (value === null || value === undefined || value === 'null' || value === '') {\r\n          return '';\r\n        }\r\n        return typeof value === 'string' ? value : String(value);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Create a reactive value that updates when businessData changes\r\n  const [currentValue, setCurrentValue] = useState(() => getCurrentValue());\r\n  \r\n  useEffect(() => {\r\n    setCurrentValue(getCurrentValue());\r\n  }, [businessData, field]);\r\n\r\n  const saveField = async (value: string) => {\r\n    if (!businessData) return;\r\n    \r\n    // For phone fields, strip formatting before saving to database\r\n    let saveValue = value;\r\n    if (field === 'personal_phone' || field === 'business_phone') {\r\n      saveValue = getPhoneDigits(value);\r\n    } else if (field === 'twilio_phone') {\r\n      saveValue = getTwilioPhoneDigits(value);\r\n    }\r\n    \r\n    // Create a partial update object with just this field\r\n    const updateData = { [field]: saveValue };\r\n    \r\n    const success = await updateBusiness(updateData);\r\n    if (!success) {\r\n      throw new Error(`Failed to save ${field}`);\r\n    }\r\n  };\r\n\r\n  return useAutoSave(currentValue, saveField, { debounce });\r\n}\r\n","import React from 'react';\r\n\r\nimport { AutoSaveInput } from '@/shared/ui';\r\nimport { formatPhoneNumber } from '@/shared/utils';\r\n\r\nimport { useAutoSaveField } from '../hooks/useAutoSaveField';\r\nimport type { BusinessData } from '../types';\r\n\r\ninterface AutoSaveFieldProps {\r\n  field: keyof BusinessData;\r\n  label: string;\r\n  type?: 'text' | 'email' | 'tel' | 'url' | 'date';\r\n  placeholder?: string;\r\n  className?: string;\r\n  debounce?: number;\r\n  disabled?: boolean;\r\n}\r\n\r\n/**\r\n * Auto-save field component for tenant dashboard forms\r\n * Uses shared AutoSaveInput component with feature-specific auto-save logic\r\n */\r\nexport const AutoSaveField: React.FC<AutoSaveFieldProps> = ({\r\n  field,\r\n  label,\r\n  type = 'text',\r\n  placeholder,\r\n  className = '',\r\n  debounce = 1000,\r\n}) => {\r\n  const { value, setValue, isSaving, error } = useAutoSaveField({ \r\n    field, \r\n    debounce \r\n  });\r\n\r\n  const handleChange = (newValue: string) => {\r\n    // Apply phone formatting for phone fields\r\n    if (type === 'tel' && (field === 'personal_phone' || field === 'business_phone')) {\r\n      const formatted = formatPhoneNumber(newValue);\r\n      setValue(formatted);\r\n    } else if (type === 'tel' && field === 'twilio_phone') {\r\n      // For Twilio phone, we need to import the formatTwilioPhone function\r\n      // For now, just set the value as-is and let the hook handle formatting\r\n      setValue(newValue);\r\n    } else {\r\n      setValue(newValue);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <AutoSaveInput\r\n      label={label}\r\n      type={type}\r\n      value={value}\r\n      onChange={handleChange}\r\n      isSaving={isSaving}\r\n      error={error}\r\n      placeholder={placeholder}\r\n      className={className}\r\n    />\r\n  );\r\n};\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Building2, Link, User } from 'lucide-react';\r\n\r\nimport { AutoSaveField } from './AutoSaveField';\r\nimport { useProfileData } from '../hooks/useProfileData';\r\n\r\nconst ProfileForm: React.FC = () => {\r\n  const { businessData, updateBusiness, isUpdating } = useProfileData();\r\n  \r\n  const handleSocialMediaToggle = async (platform: string, enabled: boolean) => {\r\n    const fieldName = `${platform}_enabled` as keyof BusinessData;\r\n    await updateBusiness({ [fieldName]: enabled });\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      {/* Business Information Section */}\r\n      <div className=\"bg-stone-800 border border-stone-700 rounded-lg p-6\">\r\n        <div className=\"flex items-center space-x-3 mb-6\">\r\n          <Building2 className=\"h-6 w-6 text-orange-500\" />\r\n          <h3 className=\"text-lg font-semibold text-white\">Business Information</h3>\r\n        </div>\r\n        \r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n          <AutoSaveField\r\n            field=\"business_name\"\r\n            label=\"Business Name\"\r\n            placeholder=\"Enter your business name\"\r\n          />\r\n          <AutoSaveField\r\n            field=\"business_email\"\r\n            label=\"Business Email\"\r\n            type=\"email\"\r\n            placeholder=\"Enter your business email\"\r\n          />\r\n          <AutoSaveField\r\n            field=\"business_phone\"\r\n            label=\"Business Phone\"\r\n            type=\"tel\"\r\n            placeholder=\"(###) ###-####\"\r\n          />\r\n          <AutoSaveField\r\n            field=\"twilio_phone\"\r\n            label=\"Twilio Phone (SMS)\"\r\n            type=\"tel\"\r\n            placeholder=\"+1 (###) ###-####\"\r\n          />\r\n          <div className=\"md:col-span-2\">\r\n            <AutoSaveField\r\n              field=\"business_start_date\"\r\n              label=\"Business Start Date\"\r\n              type=\"date\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Personal Information Section */}\r\n      <div className=\"bg-stone-800 border border-stone-700 rounded-lg p-6\">\r\n        <div className=\"flex items-center space-x-3 mb-6\">\r\n          <User className=\"h-6 w-6 text-orange-500\" />\r\n          <h3 className=\"text-lg font-semibold text-white\">Personal Information</h3>\r\n        </div>\r\n        \r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n          <AutoSaveField\r\n            field=\"first_name\"\r\n            label=\"First Name\"\r\n            placeholder=\"Enter your first name\"\r\n          />\r\n          <AutoSaveField\r\n            field=\"last_name\"\r\n            label=\"Last Name\"\r\n            placeholder=\"Enter your last name\"\r\n          />\r\n          <AutoSaveField\r\n            field=\"personal_phone\"\r\n            label=\"Personal Phone\"\r\n            type=\"tel\"\r\n            placeholder=\"(###) ###-####\"\r\n          />\r\n          <AutoSaveField\r\n            field=\"personal_email\"\r\n            label=\"Personal Email\"\r\n            type=\"email\"\r\n            placeholder=\"Enter your personal email\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* URLs Section */}\r\n      <div className=\"bg-stone-800 border border-stone-700 rounded-lg p-6\">\r\n        <div className=\"flex items-center space-x-3 mb-6\">\r\n          <Link className=\"h-6 w-6 text-orange-500\" />\r\n          <h3 className=\"text-lg font-semibold text-white\">URLs & Social Media</h3>\r\n        </div>\r\n        \r\n        <div className=\"space-y-6\">\r\n          {/* Website URL is auto-generated and read-only */}\r\n          <div className=\"space-y-2\">\r\n            <label className=\"block text-sm font-medium text-gray-300\">\r\n              Website URL (Auto-generated)\r\n            </label>\r\n            <div className=\"px-3 py-2 bg-stone-700 border border-stone-600 rounded-md text-gray-400 cursor-not-allowed\">\r\n              http://{businessData?.slug || 'your-slug'}.thatsmartsite.com\r\n            </div>\r\n            <p className=\"text-xs text-gray-500\">\r\n              This URL is automatically generated based on your business slug and cannot be changed.\r\n            </p>\r\n          </div>\r\n          \r\n          <AutoSaveField\r\n            field=\"gbp_url\"\r\n            label=\"Google Business Profile URL\"\r\n            type=\"url\"\r\n            placeholder=\"https://business.google.com/your-business\"\r\n          />\r\n          <div className=\"space-y-6\">\r\n            <div className=\"flex items-end space-x-4\">\r\n              <div className=\"flex-1\">\r\n                <AutoSaveField\r\n                  field=\"facebook_url\"\r\n                  label=\"Facebook URL\"\r\n                  type=\"url\"\r\n                  placeholder=\"https://facebook.com/yourpage\"\r\n                    disabled={!businessData?.facebook_enabled}\r\n                />\r\n              </div>\r\n              <div className=\"flex items-center space-x-2 pb-2\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  id=\"facebook_enabled\"\r\n                    checked={businessData?.facebook_enabled ?? true}\r\n                  onChange={(e) => handleSocialMediaToggle('facebook', e.target.checked)}\r\n                  disabled={isUpdating}\r\n                  className=\"h-4 w-4 text-orange-500 focus:ring-orange-500 border-gray-300 rounded disabled:opacity-50\"\r\n                />\r\n                <label htmlFor=\"facebook_enabled\" className=\"text-sm font-medium text-gray-300\">\r\n                  Enable\r\n                </label>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"flex items-end space-x-4\">\r\n              <div className=\"flex-1\">\r\n                <AutoSaveField\r\n                  field=\"youtube_url\"\r\n                  label=\"YouTube URL\"\r\n                  type=\"url\"\r\n                  placeholder=\"https://youtube.com/@yourchannel\"\r\n                    disabled={!businessData?.youtube_enabled}\r\n                />\r\n              </div>\r\n              <div className=\"flex items-center space-x-2 pb-2\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  id=\"youtube_enabled\"\r\n                    checked={businessData?.youtube_enabled ?? true}\r\n                  onChange={(e) => handleSocialMediaToggle('youtube', e.target.checked)}\r\n                  disabled={isUpdating}\r\n                  className=\"h-4 w-4 text-orange-500 focus:ring-orange-500 border-gray-300 rounded disabled:opacity-50\"\r\n                />\r\n                <label htmlFor=\"youtube_enabled\" className=\"text-sm font-medium text-gray-300\">\r\n                  Enable\r\n                </label>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"flex items-end space-x-4\">\r\n              <div className=\"flex-1\">\r\n                <AutoSaveField\r\n                  field=\"tiktok_url\"\r\n                  label=\"TikTok URL\"\r\n                  type=\"url\"\r\n                  placeholder=\"https://tiktok.com/@yourusername\"\r\n                    disabled={!businessData?.tiktok_enabled}\r\n                />\r\n              </div>\r\n              <div className=\"flex items-center space-x-2 pb-2\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  id=\"tiktok_enabled\"\r\n                    checked={businessData?.tiktok_enabled ?? true}\r\n                  onChange={(e) => handleSocialMediaToggle('tiktok', e.target.checked)}\r\n                  disabled={isUpdating}\r\n                  className=\"h-4 w-4 text-orange-500 focus:ring-orange-500 border-gray-300 rounded disabled:opacity-50\"\r\n                />\r\n                <label htmlFor=\"tiktok_enabled\" className=\"text-sm font-medium text-gray-300\">\r\n                  Enable\r\n                </label>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"flex items-end space-x-4\">\r\n              <div className=\"flex-1\">\r\n                <AutoSaveField\r\n                  field=\"instagram_url\"\r\n                  label=\"Instagram URL\"\r\n                  type=\"url\"\r\n                  placeholder=\"https://instagram.com/yourusername\"\r\n                    disabled={!businessData?.instagram_enabled}\r\n                />\r\n              </div>\r\n              <div className=\"flex items-center space-x-2 pb-2\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  id=\"instagram_enabled\"\r\n                    checked={businessData?.instagram_enabled ?? true}\r\n                  onChange={(e) => handleSocialMediaToggle('instagram', e.target.checked)}\r\n                  disabled={isUpdating}\r\n                  className=\"h-4 w-4 text-orange-500 focus:ring-orange-500 border-gray-300 rounded disabled:opacity-50\"\r\n                />\r\n                <label htmlFor=\"instagram_enabled\" className=\"text-sm font-medium text-gray-300\">\r\n                  Enable\r\n                </label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport { ProfileForm };","import React from 'react';\r\nimport { AlertCircle } from 'lucide-react';\r\n\r\nimport { ProfileForm } from './components/ProfileForm';\r\nimport { useProfileData } from './hooks/useProfileData';\r\n\r\nconst ProfileTab: React.FC = () => {\r\n  const {\r\n    businessData,\r\n    loading,\r\n    error,\r\n    updateBusiness,\r\n    isUpdating,\r\n  } = useProfileData();\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-12\">\r\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500\"></div>\r\n        <span className=\"ml-3 text-gray-600\">Loading business profile...</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"bg-red-50 border border-red-200 rounded-lg p-6\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <AlertCircle className=\"h-5 w-5 text-red-500 flex-shrink-0\" />\r\n          <div>\r\n            <h3 className=\"text-sm font-medium text-red-800\">Unable to Load Business Profile</h3>\r\n            <p className=\"text-sm text-red-600 mt-1\">{error}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <ProfileForm />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProfileTab;","import { config } from '@/shared/env';\r\n\r\nimport type {\r\n  Appointment,\r\n  CreateAppointmentRequest,\r\n  UpdateAppointmentRequest,\r\n} from '../types';\r\n\r\nconst API_BASE = `${config.apiUrl || ''}/api/schedule`;\r\n\r\n// Generic API request function\r\nasync function makeRequest<T>(endpoint: string, options: RequestInit = {}): Promise<T> {\r\n  const url = `${API_BASE}${endpoint}`;\r\n  const token = localStorage.getItem('token');\r\n  \r\n  try {\r\n    const controller = new AbortController();\r\n    const timeoutId = setTimeout(() => { \r\n      controller.abort(); \r\n    }, 10000); // 10 second timeout\r\n    \r\n    const response = await fetch(url, {\r\n      ...options,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        ...(token && { 'Authorization': `Bearer ${token}` }),\r\n        ...options.headers,\r\n      },\r\n      signal: controller.signal,\r\n    });\r\n    \r\n    clearTimeout(timeoutId);\r\n    \r\n    if (!response.ok) {\r\n      const errorData = await response.json().catch(() => ({ error: 'Request failed' })) as { error?: string };\r\n      throw new Error(errorData.error || `HTTP ${response.status}: ${response.statusText}`);\r\n    }\r\n    \r\n    return await response.json() as T;\r\n  } catch (error) {\r\n    if (error instanceof Error && error.name === 'AbortError') {\r\n      throw new Error('Request timeout');\r\n    }\r\n    \r\n    console.error('API request failed:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n// Get appointments for a specific date range\r\nexport const getAppointments = async (\r\n  startDate: string,\r\n  endDate: string\r\n): Promise<Appointment[]> => {\r\n  const params = new URLSearchParams({ startDate, endDate });\r\n  return makeRequest<Appointment[]>(`/appointments?${params}`);\r\n};\r\n\r\n// Get appointments for a specific date\r\nexport const getAppointmentsByDate = async (date: string): Promise<Appointment[]> => {\r\n  return makeRequest<Appointment[]>(`/appointments/date/${date}`);\r\n};\r\n\r\n// Get a single appointment by ID\r\nexport const getAppointment = async (id: number): Promise<Appointment> => {\r\n  return makeRequest<Appointment>(`/appointments/${id}`);\r\n};\r\n\r\n// Create a new appointment\r\nexport const createAppointment = async (\r\n  data: CreateAppointmentRequest\r\n): Promise<Appointment> => {\r\n  return makeRequest<Appointment>('/appointments', {\r\n    method: 'POST',\r\n    body: JSON.stringify(data),\r\n  });\r\n};\r\n\r\n// Update an existing appointment\r\nexport const updateAppointment = async (\r\n  id: number,\r\n  data: UpdateAppointmentRequest\r\n): Promise<Appointment> => {\r\n  return makeRequest<Appointment>(`/appointments/${id}`, {\r\n    method: 'PUT',\r\n    body: JSON.stringify(data),\r\n  });\r\n};\r\n\r\n// Delete an appointment\r\nexport const deleteAppointment = async (id: number): Promise<void> => {\r\n  await makeRequest<{ message?: string }>(`/appointments/${id}`, {\r\n    method: 'DELETE',\r\n  });\r\n};\r\n\r\n// Update appointment status\r\nexport const updateAppointmentStatus = async (\r\n  id: number,\r\n  status: string\r\n): Promise<Appointment> => {\r\n  return makeRequest<Appointment>(`/appointments/${id}/status`, {\r\n    method: 'PATCH',\r\n    body: JSON.stringify({ status }),\r\n  });\r\n};\r\n\r\n// Get available time slots for a specific date\r\nexport const getAvailableTimeSlots = async (\r\n  date: string,\r\n  duration: number = 60\r\n): Promise<string[]> => {\r\n  const params = new URLSearchParams({ date, duration: duration.toString() });\r\n  return makeRequest<string[]>(`/appointments/available-slots?${params}`);\r\n};\r\n","const API_BASE = '/api/schedule';\r\n\r\n// Helper function to make authenticated requests\r\nconst makeRequest = async <T = unknown>(endpoint: string, options: RequestInit = {}): Promise<T> => {\r\n  const token = localStorage.getItem('token');\r\n  \r\n  const response = await fetch(`${API_BASE}${endpoint}`, {\r\n    ...options,\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${token}`,\r\n      ...options.headers,\r\n    },\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({})) as { error?: string };\r\n    throw new Error(errorData.error || `HTTP error! status: ${response.status}`);\r\n  }\r\n\r\n  return response.json() as Promise<T>;\r\n};\r\n\r\nexport interface BlockedDay {\r\n  blocked_date: string;\r\n  reason?: string;\r\n  is_recurring?: boolean;\r\n  recurrence_pattern?: string;\r\n  recurrence_end_date?: string;\r\n}\r\n\r\nexport interface ToggleBlockedDayResponse {\r\n  action: 'added' | 'removed';\r\n  date: string;\r\n  reason?: string;\r\n  message: string;\r\n}\r\n\r\n// Get blocked days for a date range\r\nexport const getBlockedDays = async (startDate: string, endDate: string): Promise<BlockedDay[]> => {\r\n  const params = new URLSearchParams({\r\n    startDate,\r\n    endDate,\r\n  });\r\n  \r\n  return makeRequest<BlockedDay[]>(`/blocked-days?${params}`);\r\n};\r\n\r\n// Toggle blocked day (add if not exists, remove if exists)\r\nexport const toggleBlockedDay = async (date: string, reason?: string): Promise<ToggleBlockedDayResponse> => {\r\n  return makeRequest<ToggleBlockedDayResponse>('/blocked-days/toggle', {\r\n    method: 'POST',\r\n    body: JSON.stringify({ date, reason }),\r\n  });\r\n};\r\n\r\n// Add blocked day\r\nexport const addBlockedDay = async (data: {\r\n  date: string;\r\n  reason?: string;\r\n  is_recurring?: boolean;\r\n  recurrence_pattern?: string;\r\n  recurrence_end_date?: string;\r\n}): Promise<BlockedDay> => {\r\n  return makeRequest<BlockedDay>('/blocked-days', {\r\n    method: 'POST',\r\n    body: JSON.stringify(data),\r\n  });\r\n};\r\n\r\n// Remove blocked day\r\nexport const removeBlockedDay = async (date: string): Promise<{ message: string; date: string }> => {\r\n  return makeRequest<{ message: string; date: string }>(`/blocked-days/${date}`, {\r\n    method: 'DELETE',\r\n  });\r\n};\r\n","import { config } from '@/shared/env';\r\n\r\nimport type {\r\n  CreateTimeBlockRequest,\r\n  TimeBlock,\r\n  UpdateTimeBlockRequest,\r\n} from '../types';\r\n\r\nconst API_BASE = `${config.apiUrl || ''}/api/schedule`;\r\n\r\n// Generic API request function\r\nasync function makeRequest<T>(endpoint: string, options: RequestInit = {}): Promise<T> {\r\n  const url = `${API_BASE}${endpoint}`;\r\n  const token = localStorage.getItem('token');\r\n  \r\n  try {\r\n    const controller = new AbortController();\r\n    const timeoutId = setTimeout(() => { \r\n      controller.abort(); \r\n    }, 10000); // 10 second timeout\r\n    \r\n    const response = await fetch(url, {\r\n      ...options,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        ...(token && { 'Authorization': `Bearer ${token}` }),\r\n        ...options.headers,\r\n      },\r\n      signal: controller.signal,\r\n    });\r\n    \r\n    clearTimeout(timeoutId);\r\n    \r\n    if (!response.ok) {\r\n      const errorData = await response.json().catch(() => ({ error: 'Request failed' })) as { error?: string };\r\n      throw new Error(errorData.error || `HTTP ${response.status}: ${response.statusText}`);\r\n    }\r\n    \r\n    return await response.json() as T;\r\n  } catch (error) {\r\n    if (error instanceof Error && error.name === 'AbortError') {\r\n      throw new Error('Request timeout');\r\n    }\r\n    \r\n    console.error('API request failed:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n// Get time blocks for a specific date range\r\nexport const getTimeBlocks = async (\r\n  startDate: string,\r\n  endDate: string\r\n): Promise<TimeBlock[]> => {\r\n  const params = new URLSearchParams({ startDate, endDate });\r\n  return makeRequest<TimeBlock[]>(`/time-blocks?${params}`);\r\n};\r\n\r\n// Get time blocks for a specific date\r\nexport const getTimeBlocksByDate = async (date: string): Promise<TimeBlock[]> => {\r\n  return makeRequest<TimeBlock[]>(`/time-blocks/date/${date}`);\r\n};\r\n\r\n// Get a single time block by ID\r\nexport const getTimeBlock = async (id: number): Promise<TimeBlock> => {\r\n  return makeRequest<TimeBlock>(`/time-blocks/${id}`);\r\n};\r\n\r\n// Create a new time block\r\nexport const createTimeBlock = async (\r\n  data: CreateTimeBlockRequest\r\n): Promise<TimeBlock> => {\r\n  return makeRequest<TimeBlock>('/time-blocks', {\r\n    method: 'POST',\r\n    body: JSON.stringify(data),\r\n  });\r\n};\r\n\r\n// Update an existing time block\r\nexport const updateTimeBlock = async (\r\n  id: number,\r\n  data: UpdateTimeBlockRequest\r\n): Promise<TimeBlock> => {\r\n  return makeRequest<TimeBlock>(`/time-blocks/${id}`, {\r\n    method: 'PUT',\r\n    body: JSON.stringify(data),\r\n  });\r\n};\r\n\r\n// Delete a time block\r\nexport const deleteTimeBlock = async (id: number): Promise<void> => {\r\n  await makeRequest<{ message?: string }>(`/time-blocks/${id}`, {\r\n    method: 'DELETE',\r\n  });\r\n};\r\n","import React, { useEffect,useState } from 'react';\r\nimport { Calendar, Clock, DollarSign, FileText,Mail, Phone, User, X } from 'lucide-react';\r\n\r\nimport { Button } from '@/shared/ui';\r\n\r\nimport { createAppointment, updateAppointment } from '../../api';\r\nimport type { Appointment, CreateAppointmentRequest, UpdateAppointmentRequest } from '../../types';\r\n\r\ninterface AppointmentModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onSuccess: () => void;\r\n  appointment?: Appointment | null;\r\n  selectedDate: string;\r\n  selectedTime?: string;\r\n}\r\n\r\nexport const AppointmentModal: React.FC<AppointmentModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  onSuccess,\r\n  appointment,\r\n  selectedDate,\r\n  selectedTime\r\n}) => {\r\n  const [formData, setFormData] = useState({\r\n    title: '',\r\n    description: '',\r\n    service_type: '',\r\n    service_duration: 60,\r\n    start_time: '',\r\n    end_time: '',\r\n    customer_name: '',\r\n    customer_phone: '',\r\n    customer_email: '',\r\n    price: 0,\r\n    deposit: 0,\r\n    notes: '',\r\n    internal_notes: ''\r\n  });\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const isEdit = !!appointment;\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      if (appointment) {\r\n        // Edit mode - populate form with existing data\r\n        setFormData({\r\n          title: appointment.title,\r\n          description: appointment.description || '',\r\n          service_type: appointment.service_type,\r\n          service_duration: appointment.service_duration,\r\n          start_time: appointment.start_time,\r\n          end_time: appointment.end_time,\r\n          customer_name: appointment.customer_name,\r\n          customer_phone: appointment.customer_phone,\r\n          customer_email: appointment.customer_email || '',\r\n          price: appointment.price || 0,\r\n          deposit: appointment.deposit || 0,\r\n          notes: appointment.notes || '',\r\n          internal_notes: appointment.internal_notes || ''\r\n        });\r\n      } else {\r\n        // Create mode - set defaults\r\n        const startTime = selectedTime ? `${selectedDate}T${selectedTime}:00` : `${selectedDate}T09:00:00`;\r\n        const endTime = selectedTime ? \r\n          new Date(new Date(startTime).getTime() + 60 * 60 * 1000).toISOString() : \r\n          new Date(new Date(startTime).getTime() + 60 * 60 * 1000).toISOString();\r\n\r\n        setFormData({\r\n          title: '',\r\n          description: '',\r\n          service_type: '',\r\n          service_duration: 60,\r\n          start_time: startTime,\r\n          end_time: endTime,\r\n          customer_name: '',\r\n          customer_phone: '',\r\n          customer_email: '',\r\n          price: 0,\r\n          deposit: 0,\r\n          notes: '',\r\n          internal_notes: ''\r\n        });\r\n      }\r\n      setError(null);\r\n    }\r\n  }, [isOpen, appointment, selectedDate, selectedTime]);\r\n\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\r\n    const { name, value, type } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: type === 'number' ? Number(value) : value\r\n    }));\r\n  };\r\n\r\n  const handleDurationChange = (duration: number) => {\r\n    const startTime = new Date(formData.start_time);\r\n    const endTime = new Date(startTime.getTime() + duration * 60 * 1000);\r\n    \r\n    setFormData(prev => ({\r\n      ...prev,\r\n      service_duration: duration,\r\n      end_time: endTime.toISOString()\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      if (isEdit) {\r\n        const updateData: UpdateAppointmentRequest = {\r\n          id: appointment.id,\r\n          ...formData\r\n        };\r\n        await updateAppointment(appointment.id, updateData);\r\n      } else {\r\n        const createData: CreateAppointmentRequest = formData;\r\n        await createAppointment(createData);\r\n      }\r\n      \r\n      onSuccess();\r\n      onClose();\r\n    } catch (err) {\r\n      console.error('Error saving appointment:', err);\r\n      setError(err instanceof Error ? err.message : 'Failed to save appointment');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-stone-800 rounded-xl border border-stone-700 w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"p-6\">\r\n          <div className=\"flex items-center justify-between mb-6\">\r\n            <h2 className=\"text-2xl font-bold text-white\">\r\n              {isEdit ? 'Edit Appointment' : 'New Appointment'}\r\n            </h2>\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              onClick={onClose}\r\n              className=\"text-gray-400 hover:text-white\"\r\n            >\r\n              <X className=\"h-5 w-5\" />\r\n            </Button>\r\n          </div>\r\n\r\n          {error && (\r\n            <div className=\"mb-4 p-3 bg-red-900/30 border border-red-500 rounded-lg text-red-300\">\r\n              {error}\r\n            </div>\r\n          )}\r\n\r\n          <form onSubmit={(e) => { e.preventDefault(); void handleSubmit(e); }} className=\"space-y-6\">\r\n            {/* Basic Information */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div>\r\n                <label htmlFor=\"appointment-title\" className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n                  <Calendar className=\"inline h-4 w-4 mr-2\" />\r\n                  Title *\r\n                </label>\r\n                <input\r\n                  id=\"appointment-title\"\r\n                  type=\"text\"\r\n                  name=\"title\"\r\n                  value={formData.title}\r\n                  onChange={handleInputChange}\r\n                  required\r\n                  className=\"w-full px-3 py-2 bg-stone-700 border border-stone-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"appointment-service-type\" className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n                  <Clock className=\"inline h-4 w-4 mr-2\" />\r\n                  Service Type *\r\n                </label>\r\n                <input\r\n                  id=\"appointment-service-type\"\r\n                  type=\"text\"\r\n                  name=\"service_type\"\r\n                  value={formData.service_type}\r\n                  onChange={handleInputChange}\r\n                  required\r\n                  className=\"w-full px-3 py-2 bg-stone-700 border border-stone-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"appointment-description\" className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n                Description\r\n              </label>\r\n              <textarea\r\n                id=\"appointment-description\"\r\n                name=\"description\"\r\n                value={formData.description}\r\n                onChange={handleInputChange}\r\n                rows={3}\r\n                className=\"w-full px-3 py-2 bg-stone-700 border border-stone-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n              />\r\n            </div>\r\n\r\n            {/* Timing */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n              <div>\r\n                <label htmlFor=\"appointment-start-time\" className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n                  Start Time *\r\n                </label>\r\n                <input\r\n                  id=\"appointment-start-time\"\r\n                  type=\"datetime-local\"\r\n                  name=\"start_time\"\r\n                  value={formData.start_time.slice(0, 16)}\r\n                  onChange={handleInputChange}\r\n                  required\r\n                  className=\"w-full px-3 py-2 bg-stone-700 border border-stone-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"appointment-duration\" className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n                  Duration (minutes) *\r\n                </label>\r\n                <select\r\n                  id=\"appointment-duration\"\r\n                  name=\"service_duration\"\r\n                  value={formData.service_duration}\r\n                  onChange={(e) => { handleDurationChange(Number(e.target.value)); }}\r\n                  required\r\n                  className=\"w-full px-3 py-2 bg-stone-700 border border-stone-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                >\r\n                  <option value={30}>30 minutes</option>\r\n                  <option value={60}>1 hour</option>\r\n                  <option value={90}>1.5 hours</option>\r\n                  <option value={120}>2 hours</option>\r\n                  <option value={180}>3 hours</option>\r\n                  <option value={240}>4 hours</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"appointment-end-time\" className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n                  End Time\r\n                </label>\r\n                <input\r\n                  id=\"appointment-end-time\"\r\n                  type=\"datetime-local\"\r\n                  name=\"end_time\"\r\n                  value={formData.end_time.slice(0, 16)}\r\n                  onChange={handleInputChange}\r\n                  required\r\n                  className=\"w-full px-3 py-2 bg-stone-700 border border-stone-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Customer Information */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div>\r\n                <label htmlFor=\"appointment-customer-name\" className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n                  <User className=\"inline h-4 w-4 mr-2\" />\r\n                  Customer Name *\r\n                </label>\r\n                <input\r\n                  id=\"appointment-customer-name\"\r\n                  type=\"text\"\r\n                  name=\"customer_name\"\r\n                  value={formData.customer_name}\r\n                  onChange={handleInputChange}\r\n                  required\r\n                  className=\"w-full px-3 py-2 bg-stone-700 border border-stone-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"appointment-customer-phone\" className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n                  <Phone className=\"inline h-4 w-4 mr-2\" />\r\n                  Phone *\r\n                </label>\r\n                <input\r\n                  id=\"appointment-customer-phone\"\r\n                  type=\"tel\"\r\n                  name=\"customer_phone\"\r\n                  value={formData.customer_phone}\r\n                  onChange={handleInputChange}\r\n                  required\r\n                  className=\"w-full px-3 py-2 bg-stone-700 border border-stone-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"appointment-customer-email\" className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n                <Mail className=\"inline h-4 w-4 mr-2\" />\r\n                Email\r\n              </label>\r\n              <input\r\n                id=\"appointment-customer-email\"\r\n                type=\"email\"\r\n                name=\"customer_email\"\r\n                value={formData.customer_email}\r\n                onChange={handleInputChange}\r\n                className=\"w-full px-3 py-2 bg-stone-700 border border-stone-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n              />\r\n            </div>\r\n\r\n            {/* Pricing */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div>\r\n                <label htmlFor=\"appointment-price\" className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n                  <DollarSign className=\"inline h-4 w-4 mr-2\" />\r\n                  Price\r\n                </label>\r\n                <input\r\n                  id=\"appointment-price\"\r\n                  type=\"number\"\r\n                  name=\"price\"\r\n                  value={formData.price}\r\n                  onChange={handleInputChange}\r\n                  min=\"0\"\r\n                  step=\"0.01\"\r\n                  className=\"w-full px-3 py-2 bg-stone-700 border border-stone-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"appointment-deposit\" className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n                  <DollarSign className=\"inline h-4 w-4 mr-2\" />\r\n                  Deposit\r\n                </label>\r\n                <input\r\n                  id=\"appointment-deposit\"\r\n                  type=\"number\"\r\n                  name=\"deposit\"\r\n                  value={formData.deposit}\r\n                  onChange={handleInputChange}\r\n                  min=\"0\"\r\n                  step=\"0.01\"\r\n                  className=\"w-full px-3 py-2 bg-stone-700 border border-stone-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Notes */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div>\r\n                <label htmlFor=\"appointment-notes\" className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n                  <FileText className=\"inline h-4 w-4 mr-2\" />\r\n                  Customer Notes\r\n                </label>\r\n                <textarea\r\n                  id=\"appointment-notes\"\r\n                  name=\"notes\"\r\n                  value={formData.notes}\r\n                  onChange={handleInputChange}\r\n                  rows={3}\r\n                  className=\"w-full px-3 py-2 bg-stone-700 border border-stone-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"appointment-internal-notes\" className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n                  <FileText className=\"inline h-4 w-4 mr-2\" />\r\n                  Internal Notes\r\n                </label>\r\n                <textarea\r\n                  id=\"appointment-internal-notes\"\r\n                  name=\"internal_notes\"\r\n                  value={formData.internal_notes}\r\n                  onChange={handleInputChange}\r\n                  rows={3}\r\n                  className=\"w-full px-3 py-2 bg-stone-700 border border-stone-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Actions */}\r\n            <div className=\"flex justify-end space-x-3 pt-4 border-t border-stone-700\">\r\n              <Button\r\n                type=\"button\"\r\n                variant=\"secondary\"\r\n                onClick={onClose}\r\n                disabled={loading}\r\n              >\r\n                Cancel\r\n              </Button>\r\n              <Button\r\n                type=\"submit\"\r\n                variant=\"primary\"\r\n                disabled={loading}\r\n                className=\"bg-orange-500 hover:bg-orange-600\"\r\n              >\r\n                {loading ? 'Saving...' : (isEdit ? 'Update' : 'Create')}\r\n              </Button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","/**\r\n * Shared utilities for schedule components\r\n */\r\n\r\ntype AppointmentStatus = 'confirmed' | 'scheduled' | 'in_progress' | 'completed' | 'cancelled' | 'pending';\r\n\r\ninterface StatusStyles {\r\n  background: string;\r\n  badge: string;\r\n}\r\n\r\n/**\r\n * Get status-based styling for appointments\r\n */\r\nexport function getStatusStyles(status: AppointmentStatus): StatusStyles {\r\n  switch (status) {\r\n    case 'confirmed':\r\n      return {\r\n        background: 'bg-green-900/30 border-green-500',\r\n        badge: 'bg-green-900 text-green-300'\r\n      };\r\n    case 'scheduled':\r\n      return {\r\n        background: 'bg-blue-900/30 border-blue-500',\r\n        badge: 'bg-blue-900 text-blue-300'\r\n      };\r\n    case 'in_progress':\r\n      return {\r\n        background: 'bg-orange-900/30 border-orange-500',\r\n        badge: 'bg-orange-900 text-orange-300'\r\n      };\r\n    case 'completed':\r\n      return {\r\n        background: 'bg-gray-900/30 border-gray-500',\r\n        badge: 'bg-gray-900 text-gray-300'\r\n      };\r\n    case 'cancelled':\r\n      return {\r\n        background: 'bg-red-900/30 border-red-500',\r\n        badge: 'bg-red-900 text-red-300'\r\n      };\r\n    default:\r\n      return {\r\n        background: 'bg-yellow-900/30 border-yellow-500',\r\n        badge: 'bg-yellow-900 text-yellow-300'\r\n      };\r\n  }\r\n}\r\n\r\n/**\r\n * Generate time slots for day view (8 AM to 7 PM)\r\n */\r\nexport function generateTimeSlots(): string[] {\r\n  return Array.from({ length: 12 }, (_, i) => {\r\n    const hour = i + 8;\r\n    return `${hour.toString().padStart(2, '0')}:00`;\r\n  });\r\n}\r\n\r\n","import React from 'react';\r\n\r\nimport type { Appointment, TimeBlock } from '../types';\r\nimport { generateTimeSlots, getStatusStyles } from './scheduleUtils';\r\n\r\ninterface DayViewProps {\r\n  selectedDate: string;\r\n  appointments: Appointment[];\r\n  timeBlocks: TimeBlock[];\r\n  onEditAppointment: (appointment: Appointment) => void;\r\n  onCreateAppointment: (time?: string, date?: string) => void;\r\n}\r\n\r\nexport const DayView: React.FC<DayViewProps> = ({\r\n  selectedDate,\r\n  appointments,\r\n  timeBlocks,\r\n  onEditAppointment,\r\n  onCreateAppointment\r\n}) => {\r\n  const timeSlots = generateTimeSlots();\r\n\r\n  // Get appointments for a specific date and time\r\n  const getAppointmentForDateTime = (date: string, time: string) => {\r\n    return appointments.find(apt => {\r\n      const startTime = new Date(apt.start_time);\r\n      const appointmentDate = startTime.toISOString().split('T')[0];\r\n      const timeString = startTime.toTimeString().slice(0, 5);\r\n      return appointmentDate === date && timeString === time;\r\n    });\r\n  };\r\n\r\n  // Get time block for a specific date and time\r\n  const getTimeBlockForDateTime = (date: string, time: string) => {\r\n    return timeBlocks.find(block => {\r\n      const startTime = new Date(block.start_time);\r\n      const endTime = new Date(block.end_time);\r\n      const blockDate = startTime.toISOString().split('T')[0];\r\n      const slotTime = new Date(`${date}T${time}:00`);\r\n      return blockDate === date && slotTime >= startTime && slotTime < endTime;\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-2\">\r\n      {timeSlots.map((time) => {\r\n        const appointment = getAppointmentForDateTime(selectedDate, time);\r\n        const timeBlock = getTimeBlockForDateTime(selectedDate, time);\r\n        const { background, badge } = appointment ? getStatusStyles(appointment.status) : { background: '', badge: '' };\r\n\r\n        return (\r\n          <div key={time} className=\"flex items-center border-b border-stone-700 last:border-b-0\">\r\n            <div className=\"w-16 text-gray-400 text-sm font-medium py-3\">\r\n              {time}\r\n            </div>\r\n            <div className=\"flex-1 py-2\">\r\n              {appointment ? (\r\n                <button \r\n                  type=\"button\"\r\n                  className={`w-full text-left p-3 rounded-lg border-l-4 cursor-pointer hover:opacity-80 transition-opacity ${background}`}\r\n                  onClick={() => { onEditAppointment(appointment); }}\r\n                >\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                      <p className=\"font-medium text-white\">{appointment.customer_name}</p>\r\n                      <p className=\"text-gray-300 text-sm\">{appointment.title}</p>\r\n                      <p className=\"text-gray-400 text-xs\">{appointment.service_duration} minutes</p>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                      <p className=\"text-gray-300 text-sm\">{appointment.customer_phone}</p>\r\n                      <span className={`inline-block px-2 py-1 rounded-full text-xs font-medium ${badge}`}>\r\n                        {appointment.status.replace('_', ' ')}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </button>\r\n              ) : timeBlock ? (\r\n                <div className=\"p-3 rounded-lg border-l-4 bg-gray-900/30 border-gray-500\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                      <p className=\"font-medium text-white\">{timeBlock.title}</p>\r\n                      <p className=\"text-gray-300 text-sm\">{timeBlock.description}</p>\r\n                      <p className=\"text-gray-400 text-xs\">{timeBlock.block_type}</p>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                      <span className=\"inline-block px-2 py-1 rounded-full text-xs font-medium bg-gray-900 text-gray-300\">\r\n                        {timeBlock.block_type}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <button \r\n                  type=\"button\"\r\n                  className=\"h-12 w-full text-left flex items-center text-gray-500 text-sm cursor-pointer hover:text-white hover:bg-stone-700/50 rounded-lg transition-colors\"\r\n                  onClick={() => { onCreateAppointment(time, selectedDate); }}\r\n                >\r\n                  Available - Click to add appointment\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\n","import React from 'react';\r\n\r\nimport type { Appointment } from '../types';\r\nimport { getStatusStyles } from './scheduleUtils';\r\n\r\ninterface AppointmentCardProps {\r\n  appointment: Appointment;\r\n  onEdit: (appointment: Appointment) => void;\r\n  compact?: boolean;\r\n}\r\n\r\nexport const AppointmentCard: React.FC<AppointmentCardProps> = ({\r\n  appointment,\r\n  onEdit,\r\n  compact = false\r\n}) => {\r\n  const { background, badge } = getStatusStyles(appointment.status);\r\n\r\n  if (compact) {\r\n    return (\r\n      <button \r\n        type=\"button\"\r\n        className={`w-full text-left p-1 rounded text-xs cursor-pointer hover:opacity-80 transition-opacity ${background}`}\r\n        onClick={(e) => {\r\n          e.stopPropagation();\r\n          onEdit(appointment);\r\n        }}\r\n      >\r\n        <div className=\"truncate\">{appointment.customer_name}</div>\r\n        <div className=\"truncate text-xs opacity-75\">{appointment.title}</div>\r\n      </button>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <button \r\n      type=\"button\"\r\n      className={`w-full text-left p-3 rounded-lg border-l-4 cursor-pointer hover:opacity-80 transition-opacity ${background}`}\r\n      onClick={() => { onEdit(appointment); }}\r\n    >\r\n      <div className=\"space-y-2\">\r\n        <div>\r\n          <p className=\"font-semibold text-white text-sm\">{appointment.customer_name}</p>\r\n          <p className=\"text-gray-300 text-xs\">{appointment.title}</p>\r\n        </div>\r\n        \r\n        <div className=\"space-y-1\">\r\n          <div className=\"text-xs text-gray-400\">\r\n            {new Date(appointment.start_time).toLocaleTimeString('en-US', { \r\n              hour: 'numeric', \r\n              minute: '2-digit',\r\n              hour12: true \r\n            })} - {new Date(appointment.end_time).toLocaleTimeString('en-US', { \r\n              hour: 'numeric', \r\n              minute: '2-digit',\r\n              hour12: true \r\n            })}\r\n          </div>\r\n          \r\n          <div className=\"text-xs text-gray-400\">\r\n            {appointment.service_duration} minutes\r\n          </div>\r\n          \r\n          <div className=\"text-xs text-gray-400\">\r\n            {appointment.customer_phone}\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"pt-2\">\r\n          <span className={`inline-block px-2 py-1 rounded-full text-xs font-medium ${badge}`}>\r\n            {appointment.status.replace('_', ' ')}\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </button>\r\n  );\r\n};\r\n\r\n","import React from 'react';\r\nimport { X } from 'lucide-react';\r\n\r\nimport { formatDateToYYYYMMDD, getToday, parseLocalDate } from '@/shared/utils';\r\n\r\nimport type { Appointment } from '../types';\r\nimport { AppointmentCard } from './AppointmentCard';\r\n\r\ninterface MonthViewProps {\r\n  selectedDate: string;\r\n  appointments: Appointment[];\r\n  blockedDays: Set<string>;\r\n  onEditAppointment: (appointment: Appointment) => void;\r\n  onToggleDayBlock: (date: string) => Promise<void>;\r\n}\r\n\r\nexport const MonthView: React.FC<MonthViewProps> = ({\r\n  selectedDate,\r\n  appointments,\r\n  blockedDays,\r\n  onEditAppointment,\r\n  onToggleDayBlock\r\n}) => {\r\n  const selectedDateObj = parseLocalDate(selectedDate);\r\n  const yearNum = selectedDateObj.getFullYear();\r\n  const monthNum = selectedDateObj.getMonth();\r\n  \r\n  // Get first day of month and calculate starting date (Monday of first week)\r\n  const firstDay = new Date(yearNum, monthNum, 1);\r\n  const firstDayOfWeek = firstDay.getDay();\r\n  const mondayOffset = firstDayOfWeek === 0 ? -6 : 1 - firstDayOfWeek;\r\n  const startDate = new Date(firstDay);\r\n  startDate.setDate(firstDay.getDate() + mondayOffset);\r\n  \r\n  // Generate calendar days (6 weeks = 42 days)\r\n  const calendarDays = [];\r\n  for (let i = 0; i < 42; i++) {\r\n    const date = new Date(startDate);\r\n    date.setDate(startDate.getDate() + i);\r\n    calendarDays.push(date);\r\n  }\r\n  \r\n  // Get appointments for the month\r\n  const monthAppointments = appointments.filter(apt => {\r\n    const aptDate = new Date(apt.start_time);\r\n    return aptDate.getFullYear() === yearNum && aptDate.getMonth() === monthNum;\r\n  });\r\n  \r\n  const today = getToday();\r\n  \r\n  return (\r\n    <div className=\"overflow-x-auto\">\r\n      <div className=\"min-w-full\">\r\n        {/* Month header */}\r\n        <div className=\"grid grid-cols-7 gap-1 mb-2\">\r\n          {['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'].map((day) => (\r\n            <div key={day} className=\"text-center py-2 text-gray-400 text-sm font-medium\">\r\n              {day}\r\n            </div>\r\n          ))}\r\n        </div>\r\n        \r\n        {/* Calendar grid */}\r\n        <div className=\"grid grid-cols-7 gap-1\">\r\n          {calendarDays.map((date, index) => {\r\n            const isCurrentMonth = date.getMonth() === monthNum;\r\n            const dateString = formatDateToYYYYMMDD(date);\r\n            const isToday = dateString === today;\r\n            const isBlocked = blockedDays.has(dateString);\r\n            const dayAppointments = monthAppointments.filter(apt => {\r\n              const aptDate = new Date(apt.start_time).toISOString().split('T')[0];\r\n              return aptDate === dateString;\r\n            });\r\n            \r\n            return (\r\n              <button \r\n                type=\"button\"\r\n                key={index}\r\n                className={`w-full text-left min-h-[6rem] p-2 border border-stone-700 rounded-lg relative cursor-pointer transition-all duration-200 ${\r\n                  isCurrentMonth ? 'bg-stone-800' : 'bg-stone-900/50'\r\n                } ${isToday ? 'ring-2 ring-orange-500' : ''} ${isBlocked ? 'bg-red-900/20 border-red-500' : ''}`}\r\n                onClick={() => { void onToggleDayBlock(dateString).catch((err: unknown) => { console.error(err); }); }}\r\n              >\r\n                <div className={`text-sm font-medium mb-1 ${\r\n                  isCurrentMonth ? 'text-white' : 'text-gray-500'\r\n                } ${isToday ? 'text-orange-300' : ''}`}>\r\n                  {date.getDate()}\r\n                </div>\r\n                \r\n                <div className=\"space-y-1\">\r\n                  {!isBlocked && dayAppointments.slice(0, 3).map((appointment) => (\r\n                    <AppointmentCard \r\n                      key={appointment.id}\r\n                      appointment={appointment}\r\n                      onEdit={onEditAppointment}\r\n                      compact\r\n                    />\r\n                  ))}\r\n                  {!isBlocked && dayAppointments.length > 3 && (\r\n                    <div className=\"text-xs text-gray-400\">\r\n                      +{dayAppointments.length - 3} more\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                \r\n                {/* Red X overlay for blocked days */}\r\n                {isBlocked && (\r\n                  <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\r\n                    <X className=\"w-8 h-8 text-red-500 opacity-80\" strokeWidth={3} />\r\n                  </div>\r\n                )}\r\n              </button>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n","import React from 'react';\r\n\r\nimport { generateTimeSlots } from './scheduleUtils';\r\n\r\ninterface ScheduleLoadingStateProps {\r\n  viewMode: 'day' | 'week' | 'month';\r\n}\r\n\r\nexport const ScheduleLoadingState: React.FC<ScheduleLoadingStateProps> = ({ viewMode }) => {\r\n  const timeSlots = generateTimeSlots();\r\n\r\n  return (\r\n    <div className=\"bg-stone-800 rounded-xl border border-stone-700 p-6\">\r\n      <div className=\"animate-pulse space-y-4\">\r\n        {viewMode === 'day' ? (\r\n          timeSlots.map((time) => (\r\n            <div key={time} className=\"h-12 bg-stone-700 rounded\"></div>\r\n          ))\r\n        ) : viewMode === 'week' ? (\r\n          <div className=\"grid grid-cols-7 gap-4\">\r\n            {Array.from({ length: 7 }).map((_, i) => (\r\n              <div key={i} className=\"min-h-[200px] bg-stone-700 rounded-xl animate-pulse\"></div>\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          <div className=\"grid grid-cols-7 gap-1\">\r\n            {Array.from({ length: 42 }).map((_, i) => (\r\n              <div key={i} className=\"h-24 bg-stone-700 rounded\"></div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n","import React from 'react';\r\nimport { ChevronLeft, ChevronRight, Filter, Search } from 'lucide-react';\r\n\r\nimport { formatMonthYear, formatWeekRange, parseLocalDate } from '@/shared/utils';\r\n\r\ninterface ScheduleNavigationHeaderProps {\r\n  selectedDate: string;\r\n  viewMode: 'day' | 'week' | 'month';\r\n  onNavigateMonth: (direction: 'prev' | 'next') => void;\r\n  onNavigateWeek: (direction: 'prev' | 'next') => void;\r\n}\r\n\r\nexport const ScheduleNavigationHeader: React.FC<ScheduleNavigationHeaderProps> = ({\r\n  selectedDate,\r\n  viewMode,\r\n  onNavigateMonth,\r\n  onNavigateWeek\r\n}) => {\r\n  // Get title based on view mode\r\n  const getTitle = () => {\r\n    const date = parseLocalDate(selectedDate);\r\n    switch (viewMode) {\r\n      case 'day':\r\n        return date.toLocaleDateString('en-US', { \r\n          weekday: 'long', \r\n          year: 'numeric', \r\n          month: 'long', \r\n          day: 'numeric' \r\n        });\r\n      case 'week':\r\n      case 'month':\r\n        return ''; // No title for week/month view since it's shown in center navigation\r\n      default:\r\n        return '';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"mb-4 flex items-center justify-between relative\">\r\n      {getTitle() && (\r\n        <h3 className=\"text-lg font-semibold text-white\">\r\n          {getTitle()}\r\n        </h3>\r\n      )}\r\n      \r\n      {/* Week Navigation - centered, only show in week view */}\r\n      {viewMode === 'week' && (\r\n        <div className=\"absolute left-1/2 transform -translate-x-1/2 flex items-center space-x-3\">\r\n          <button\r\n            onClick={() => { onNavigateWeek('prev'); }}\r\n            className=\"text-gray-300 hover:text-white hover:bg-stone-700 p-2 rounded transition-colors\"\r\n          >\r\n            <ChevronLeft className=\"h-6 w-6\" />\r\n          </button>\r\n          \r\n          <span className=\"text-lg font-semibold text-white\">\r\n            {formatWeekRange(selectedDate)}\r\n          </span>\r\n          \r\n          <button\r\n            onClick={() => { onNavigateWeek('next'); }}\r\n            className=\"text-gray-300 hover:text-white hover:bg-stone-700 p-2 rounded transition-colors\"\r\n          >\r\n            <ChevronRight className=\"h-6 w-6\" />\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {/* Month Navigation - centered, only show in month view */}\r\n      {viewMode === 'month' && (\r\n        <div className=\"absolute left-1/2 transform -translate-x-1/2 flex items-center space-x-3\">\r\n          <button\r\n            onClick={() => { onNavigateMonth('prev'); }}\r\n            className=\"text-gray-300 hover:text-white hover:bg-stone-700 p-2 rounded transition-colors\"\r\n          >\r\n            <ChevronLeft className=\"h-6 w-6\" />\r\n          </button>\r\n          \r\n          <span className=\"text-lg font-semibold text-white\">\r\n            {formatMonthYear(selectedDate)}\r\n          </span>\r\n          \r\n          <button\r\n            onClick={() => { onNavigateMonth('next'); }}\r\n            className=\"text-gray-300 hover:text-white hover:bg-stone-700 p-2 rounded transition-colors\"\r\n          >\r\n            <ChevronRight className=\"h-6 w-6\" />\r\n          </button>\r\n        </div>\r\n      )}\r\n      \r\n      <div className=\"flex items-center space-x-2\">\r\n        <Filter className=\"h-4 w-4 text-gray-400\" />\r\n        <Search className=\"h-4 w-4 text-gray-400\" />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n","import React from 'react';\r\nimport { X } from 'lucide-react';\r\n\r\nimport { getToday, getWeekDates, parseLocalDate } from '@/shared/utils';\r\n\r\nimport type { Appointment, TimeBlock } from '../types';\r\nimport { AppointmentCard } from './AppointmentCard';\r\n\r\ninterface WeekViewProps {\r\n  selectedDate: string;\r\n  appointments: Appointment[];\r\n  timeBlocks: TimeBlock[];\r\n  blockedDays: Set<string>;\r\n  onEditAppointment: (appointment: Appointment) => void;\r\n  onCreateAppointment: (time?: string, date?: string) => void;\r\n  onToggleDayBlock: (date: string) => Promise<void>;\r\n}\r\n\r\nexport const WeekView: React.FC<WeekViewProps> = ({\r\n  selectedDate,\r\n  appointments,\r\n  timeBlocks,\r\n  blockedDays,\r\n  onEditAppointment,\r\n  onCreateAppointment,\r\n  onToggleDayBlock\r\n}) => {\r\n  const weekDates = getWeekDates(selectedDate);\r\n  const today = getToday();\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-7 gap-4\">\r\n      {weekDates.map((date) => {\r\n        const dateObj = parseLocalDate(date);\r\n        const isToday = date === today;\r\n        const isCurrentMonth = dateObj.getMonth() === parseLocalDate(selectedDate).getMonth();\r\n        const isBlocked = blockedDays.has(date);\r\n        \r\n        // Get appointment for this date (since only one per day)\r\n        const dayAppointment = appointments.find(apt => {\r\n          const aptDate = new Date(apt.start_time).toISOString().split('T')[0];\r\n          return aptDate === date;\r\n        });\r\n        \r\n        // Get time block for this date\r\n        const dayTimeBlock = timeBlocks.find(block => {\r\n          const blockDate = new Date(block.start_time).toISOString().split('T')[0];\r\n          return blockDate === date;\r\n        });\r\n        \r\n        return (\r\n          <button \r\n            type=\"button\"\r\n            key={date}\r\n            className={`min-h-[200px] p-4 rounded-xl border-2 transition-all duration-200 relative cursor-pointer text-left w-full ${\r\n              isToday \r\n                ? 'border-orange-500 bg-orange-500/10' \r\n                : isCurrentMonth \r\n                  ? 'border-stone-600 bg-stone-800/50' \r\n                  : 'border-stone-700 bg-stone-900/30'\r\n            } ${isBlocked ? 'bg-red-900/20 border-red-500' : ''}`}\r\n            onClick={() => {\r\n              alert('CLICKED: ' + date);\r\n              void onToggleDayBlock(date).catch((err: unknown) => { console.error(err); });\r\n            }}\r\n          >\r\n            {/* Day header */}\r\n            <div className=\"mb-3\">\r\n              <div className={`flex items-center justify-between text-sm font-medium ${\r\n                isToday ? 'text-orange-300' : isCurrentMonth ? 'text-white' : 'text-gray-500'\r\n              }`}>\r\n                <div>\r\n                  {dateObj.toLocaleDateString('en-US', { weekday: 'short' })}\r\n                </div>\r\n                {!dayAppointment && !dayTimeBlock && !isBlocked && (\r\n                  <button \r\n                    type=\"button\"\r\n                    className=\"w-8 h-8 flex items-center justify-center text-gray-500 hover:text-white hover:bg-orange-500/20 rounded-full transition-all duration-200 cursor-pointer\"\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      onCreateAppointment(undefined, date);\r\n                    }}\r\n                    aria-label=\"Add appointment\"\r\n                  >\r\n                    <span className=\"text-lg font-light\">+</span>\r\n                  </button>\r\n                )}\r\n              </div>\r\n              <div className={`text-lg font-bold ${\r\n                isToday ? 'text-orange-300' : isCurrentMonth ? 'text-white' : 'text-gray-500'\r\n              }`}>\r\n                {dateObj.getDate()}\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Day content */}\r\n            <div className=\"flex-1\">\r\n              {dayAppointment ? (\r\n                <AppointmentCard \r\n                  appointment={dayAppointment}\r\n                  onEdit={onEditAppointment}\r\n                />\r\n              ) : dayTimeBlock ? (\r\n                <div className=\"p-3 rounded-lg border-l-4 bg-gray-900/30 border-gray-500\">\r\n                  <div className=\"space-y-2\">\r\n                    <div>\r\n                      <p className=\"font-semibold text-white text-sm\">{dayTimeBlock.title}</p>\r\n                      <p className=\"text-gray-300 text-xs\">{dayTimeBlock.description}</p>\r\n                    </div>\r\n                    \r\n                    <div className=\"text-xs text-gray-400\">\r\n                      {dayTimeBlock.block_type}\r\n                    </div>\r\n                    \r\n                    <div className=\"pt-2\">\r\n                      <span className=\"inline-block px-2 py-1 rounded-full text-xs font-medium bg-gray-900 text-gray-300\">\r\n                        {dayTimeBlock.block_type}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"h-full\">\r\n                  {/* Empty day - no content needed since + button is in header */}\r\n                </div>\r\n              )}\r\n            </div>\r\n            \r\n            {/* Red X overlay for blocked days */}\r\n            {isBlocked && (\r\n              <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\r\n                <X className=\"w-16 h-16 text-red-500 opacity-80\" strokeWidth={3} />\r\n              </div>\r\n            )}\r\n          </button>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\n","import React from 'react';\n\nimport type { Appointment, TimeBlock } from '../types';\nimport { DayView } from './DayView';\nimport { MonthView } from './MonthView';\nimport { ScheduleLoadingState } from './ScheduleLoadingState';\nimport { ScheduleNavigationHeader } from './ScheduleNavigationHeader';\nimport { WeekView } from './WeekView';\n\ninterface ScheduleGridProps {\n  selectedDate: string;\n  appointments: Appointment[];\n  timeBlocks: TimeBlock[];\n  loading: boolean;\n  viewMode: 'day' | 'week' | 'month';\n  onEditAppointment: (appointment: Appointment) => void;\n  onCreateAppointment: (time?: string, date?: string) => void;\n  blockedDays: Set<string>;\n  onToggleDayBlock: (date: string) => Promise<void>;\n  onNavigateMonth: (direction: 'prev' | 'next') => void;\n  onNavigateWeek: (direction: 'prev' | 'next') => void;\n}\n\nexport const ScheduleGrid: React.FC<ScheduleGridProps> = ({\n  selectedDate,\n  appointments,\n  timeBlocks,\n  loading,\n  viewMode,\n  onEditAppointment,\n  onCreateAppointment,\n  blockedDays,\n  onToggleDayBlock,\n  onNavigateMonth,\n  onNavigateWeek\n}) => {\n  if (loading) {\n    return <ScheduleLoadingState viewMode={viewMode} />;\n  }\n\n  return (\n    <div className=\"bg-stone-800 rounded-xl border border-stone-700 p-6\">\n      <ScheduleNavigationHeader\n        selectedDate={selectedDate}\n        viewMode={viewMode}\n        onNavigateMonth={onNavigateMonth}\n        onNavigateWeek={onNavigateWeek}\n      />\n      \n      {viewMode === 'day' && (\n        <DayView\n          selectedDate={selectedDate}\n          appointments={appointments}\n          timeBlocks={timeBlocks}\n          onEditAppointment={onEditAppointment}\n          onCreateAppointment={onCreateAppointment}\n        />\n      )}\n      \n      {viewMode === 'week' && (\n        <WeekView\n          selectedDate={selectedDate}\n          appointments={appointments}\n          timeBlocks={timeBlocks}\n          blockedDays={blockedDays}\n          onEditAppointment={onEditAppointment}\n          onCreateAppointment={onCreateAppointment}\n          onToggleDayBlock={onToggleDayBlock}\n        />\n      )}\n      \n      {viewMode === 'month' && (\n        <MonthView\n          selectedDate={selectedDate}\n          appointments={appointments}\n          blockedDays={blockedDays}\n          onEditAppointment={onEditAppointment}\n          onToggleDayBlock={onToggleDayBlock}\n        />\n      )}\n    </div>\n  );\n};","import React from 'react';\nimport { Calendar, Plus } from 'lucide-react';\n\nimport { Button } from '@/shared/ui';\n\ninterface ScheduleHeaderProps {\n  selectedDate: string;\n  setSelectedDate: (date: string) => void;\n  viewMode: 'day' | 'week' | 'month';\n  setViewMode: (mode: 'day' | 'week' | 'month') => void;\n  onCreateAppointment: () => void;\n  onGoToToday: () => void;\n}\n\nexport const ScheduleHeader: React.FC<ScheduleHeaderProps> = ({\n  selectedDate,\n  setSelectedDate,\n  viewMode,\n  setViewMode,\n  onCreateAppointment,\n  onGoToToday\n}) => {\n  return (\n    <div className=\"bg-stone-800 rounded-xl border border-stone-700 p-6\">\n      <div className=\"flex flex-col lg:flex-row items-start lg:items-center justify-between space-y-4 lg:space-y-0\">\n        <div className=\"flex items-center space-x-4\">\n          <Calendar className=\"h-6 w-6 text-orange-500\" />\n          <h2 className=\"text-2xl font-bold text-white\">Schedule</h2>\n        </div>\n        \n        <div className=\"flex items-center space-x-4\">\n          {/* View Mode Toggle */}\n          <div className=\"flex bg-stone-700 rounded-lg p-1\">\n            {(['day', 'week', 'month'] as const).map((mode) => (\n              <Button\n                key={mode}\n                onClick={() => { setViewMode(mode); }}\n                variant={viewMode === mode ? 'primary' : 'ghost'}\n                size=\"sm\"\n                className={`px-3 py-1 rounded-md text-sm font-medium capitalize ${\n                  viewMode === mode\n                    ? 'bg-orange-500 text-white'\n                    : 'text-gray-300 hover:text-white'\n                }`}\n              >\n                {mode}\n              </Button>\n            ))}\n          </div>\n          \n          {/* Date Picker */}\n          <input\n            type=\"date\"\n            id=\"schedule-date\"\n            name=\"selectedDate\"\n            value={selectedDate}\n            onChange={(e) => { setSelectedDate(e.target.value); }}\n            className=\"bg-stone-700 border border-stone-600 text-white rounded-lg px-3 py-2 text-sm\"\n          />\n          \n          {/* Today Button */}\n          <Button \n            variant=\"secondary\"\n            size=\"sm\"\n            className=\"bg-stone-700 hover:bg-stone-600 text-white px-3 py-2 rounded-lg text-sm\"\n            onClick={onGoToToday}\n          >\n            Today\n          </Button>\n          \n          {/* Add Appointment Button */}\n          <Button \n            variant=\"primary\"\n            size=\"md\"\n            className=\"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg font-medium flex items-center\"\n            leftIcon={<Plus className=\"h-4 w-4\" />}\n            onClick={onCreateAppointment}\n          >\n            New Appointment\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};","import React from 'react';\n\ninterface ScheduleSidebarProps {\n  viewMode: 'day' | 'week' | 'month';\n}\n\nexport const ScheduleSidebar: React.FC<ScheduleSidebarProps> = ({ viewMode }) => {\n  const renderSummary = () => {\n    if (viewMode === 'month') {\n      return (\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          {/* Monthly Summary */}\n          <div className=\"bg-stone-800 rounded-xl border border-stone-700 p-6\">\n            <h3 className=\"text-lg font-semibold text-white mb-4\">Monthly Summary</h3>\n            <div className=\"space-y-4\">\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-gray-300\">Total Appointments</span>\n                <span className=\"text-white font-semibold\">32</span>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-gray-300\">Confirmed</span>\n                <span className=\"text-green-400 font-semibold\">28</span>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-gray-300\">Pending</span>\n                <span className=\"text-yellow-400 font-semibold\">4</span>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-gray-300\">Blocked Days</span>\n                <span className=\"text-red-400 font-semibold\">3</span>\n              </div>\n            </div>\n          </div>\n\n          {/* Monthly Revenue Summary */}\n          <div className=\"bg-stone-800 rounded-xl border border-stone-700 p-6\">\n            <h3 className=\"text-lg font-semibold text-white mb-4\">Monthly Revenue Summary</h3>\n            <div className=\"space-y-4\">\n            <div className=\"flex justify-between items-center\">\n              <span className=\"text-gray-300\">Total Booked</span>\n              <span className=\"text-blue-400 font-semibold\">$12,800</span>\n            </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-gray-300\">Collected</span>\n                <span className=\"text-green-400 font-semibold\">$9,600</span>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-gray-300\">Remaining</span>\n                <span className=\"text-orange-400 font-semibold\">$3,200</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    // Default to weekly summary for day and week views\n    return (\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Weekly Summary */}\n        <div className=\"bg-stone-800 rounded-xl border border-stone-700 p-6\">\n          <h3 className=\"text-lg font-semibold text-white mb-4\">Weekly Summary</h3>\n          <div className=\"space-y-4\">\n            <div className=\"flex justify-between items-center\">\n              <span className=\"text-gray-300\">Total Appointments</span>\n              <span className=\"text-white font-semibold\">8</span>\n            </div>\n            <div className=\"flex justify-between items-center\">\n              <span className=\"text-gray-300\">Confirmed</span>\n              <span className=\"text-green-400 font-semibold\">6</span>\n            </div>\n            <div className=\"flex justify-between items-center\">\n              <span className=\"text-gray-300\">Pending</span>\n              <span className=\"text-yellow-400 font-semibold\">2</span>\n            </div>\n            <div className=\"flex justify-between items-center\">\n              <span className=\"text-gray-300\">Blocked Days</span>\n              <span className=\"text-red-400 font-semibold\">1</span>\n            </div>\n          </div>\n        </div>\n\n        {/* Weekly Revenue Summary */}\n        <div className=\"bg-stone-800 rounded-xl border border-stone-700 p-6\">\n          <h3 className=\"text-lg font-semibold text-white mb-4\">Weekly Revenue Summary</h3>\n          <div className=\"space-y-4\">\n            <div className=\"flex justify-between items-center\">\n              <span className=\"text-gray-300\">Total Booked</span>\n              <span className=\"text-blue-400 font-semibold\">$3,200</span>\n            </div>\n            <div className=\"flex justify-between items-center\">\n              <span className=\"text-gray-300\">Collected</span>\n              <span className=\"text-green-400 font-semibold\">$2,400</span>\n            </div>\n            <div className=\"flex justify-between items-center\">\n              <span className=\"text-gray-300\">Remaining</span>\n              <span className=\"text-orange-400 font-semibold\">$800</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {renderSummary()}\n    </div>\n  );\n};","import { useCallback,useEffect, useState } from 'react';\n\nimport { getAppointments, getBlockedDays,getTimeBlocks } from '../api';\nimport type { Appointment, BlockedDay,TimeBlock } from '../types';\n\nexport const useScheduleData = (selectedDate: string, viewMode: 'day' | 'week' | 'month' = 'day') => {\n  const [appointments, setAppointments] = useState<Appointment[]>([]);\n  const [timeBlocks, setTimeBlocks] = useState<TimeBlock[]>([]);\n  const [blockedDays, setBlockedDays] = useState<BlockedDay[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // Calculate date range based on view mode\n  const getDateRange = (date: string, mode: 'day' | 'week' | 'month') => {\n    const selectedDateObj = new Date(date);\n    \n    switch (mode) {\n      case 'day':\n        return { startDate: date, endDate: date };\n      \n      case 'week': {\n        // Get Monday to Sunday of the week containing the selected date\n        const dayOfWeek = selectedDateObj.getDay();\n        const mondayOffset = dayOfWeek === 0 ? -6 : 1 - dayOfWeek;\n        const monday = new Date(selectedDateObj);\n        monday.setDate(selectedDateObj.getDate() + mondayOffset);\n        const sunday = new Date(monday);\n        sunday.setDate(monday.getDate() + 6);\n        \n        return {\n          startDate: monday.toISOString().split('T')[0],\n          endDate: sunday.toISOString().split('T')[0]\n        };\n      }\n      \n      case 'month': {\n        // Get first and last day of the month\n        const firstDay = new Date(selectedDateObj.getFullYear(), selectedDateObj.getMonth(), 1);\n        const lastDay = new Date(selectedDateObj.getFullYear(), selectedDateObj.getMonth() + 1, 0);\n        \n        return {\n          startDate: firstDay.toISOString().split('T')[0],\n          endDate: lastDay.toISOString().split('T')[0]\n        };\n      }\n      \n      default:\n        return { startDate: date, endDate: date };\n    }\n  };\n\n  const fetchScheduleData = useCallback(async () => {\n    if (!selectedDate) return;\n    \n    setLoading(true);\n    setError(null);\n    \n    try {\n      const { startDate, endDate } = getDateRange(selectedDate, viewMode);\n      \n      const [appointmentsData, timeBlocksData, blockedDaysData] = await Promise.all([\n        getAppointments(startDate, endDate),\n        getTimeBlocks(startDate, endDate),\n        getBlockedDays(startDate, endDate)\n      ]);\n      \n      setAppointments(appointmentsData);\n      setTimeBlocks(timeBlocksData);\n      setBlockedDays(blockedDaysData);\n    } catch (err) {\n      console.error('Error fetching schedule data:', err);\n      setError(err instanceof Error ? err.message : 'Failed to fetch schedule data');\n    } finally {\n      setLoading(false);\n    }\n  }, [selectedDate, viewMode]);\n\n  useEffect(() => {\n    void fetchScheduleData();\n  }, [fetchScheduleData]);\n\n  const refreshData = useCallback(() => {\n    if (!selectedDate) return;\n    \n    setLoading(true);\n    setError(null);\n    \n    const { startDate, endDate } = getDateRange(selectedDate, viewMode);\n    \n    Promise.all([\n      getAppointments(startDate, endDate),\n      getTimeBlocks(startDate, endDate),\n      getBlockedDays(startDate, endDate)\n    ]).then(([appointmentsData, timeBlocksData, blockedDaysData]) => {\n      setAppointments(appointmentsData);\n      setTimeBlocks(timeBlocksData);\n      setBlockedDays(blockedDaysData);\n    }).catch((err: unknown) => {\n      console.error('Error fetching schedule data:', err);\n      setError(err instanceof Error ? err.message : 'Failed to fetch schedule data');\n    }).finally(() => {\n      setLoading(false);\n    });\n  }, [selectedDate, viewMode]);\n\n  return { \n    appointments, \n    timeBlocks, \n    blockedDays,\n    loading, \n    error, \n    refreshData \n  };\n};","import React, { startTransition, useCallback, useEffect, useState } from 'react';\n\nimport { toggleBlockedDay } from './api';\nimport { AppointmentModal } from './components/modals/AppointmentModal';\nimport { ScheduleGrid } from './components/ScheduleGrid';\nimport { ScheduleHeader } from './components/ScheduleHeader';\nimport { ScheduleSidebar } from './components/ScheduleSidebar';\nimport { useScheduleData } from './hooks/useScheduleData';\nimport type { Appointment } from './types';\n\n// Small safe date helpers (no timezone shifts)\nconst toYmd = (d: Date) =>\n  `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, '0')}-${String(d.getDate()).padStart(2, '0')}`;\n\nexport const ScheduleTab: React.FC = () => {\n  const [selectedDate, setSelectedDate] = useState(() => toYmd(new Date()));\n  const [viewMode, setViewMode] = useState<'day' | 'week' | 'month'>('day');\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [editingAppointment, setEditingAppointment] = useState<Appointment | null>(null);\n  const [selectedTime, setSelectedTime] = useState<string | undefined>();\n\n  // Make sure your hook exposes \"isInitialLoading\" and \"isRefetching\" separately if possible.\n  const {\n    appointments,\n    timeBlocks,\n    blockedDays: apiBlockedDays,\n    isInitialLoading,   // <- only true on first load\n    isRefetching,       // <- true on background refresh\n    error: _error,\n    refreshData\n  } = useScheduleData(selectedDate, viewMode);\n\n  // Local optimistic blocked days\n  const [blockedDaysLocal, setBlockedDaysLocal] = useState<Set<string>>(new Set());\n  const [isMutatingBlock, setIsMutatingBlock] = useState(false);\n\n  // Sync local set with API when not in the middle of a mutation\n  useEffect(() => {\n    if (isMutatingBlock) return; // keep user’s optimistic view\n    const next = new Set<string>(\n      apiBlockedDays.map(d => toYmd(new Date(d.blocked_date)))\n    );\n    setBlockedDaysLocal(next);\n  }, [apiBlockedDays, isMutatingBlock]);\n\n  const toggleDayBlock = useCallback(async (date: string) => {\n    // optimistic flip\n    setIsMutatingBlock(true);\n    setBlockedDaysLocal(prev => {\n      const next = new Set(prev);\n      if (next.has(date)) next.delete(date);\n      else next.add(date);\n      return next;\n    });\n\n    try {\n      await toggleBlockedDay(date);\n      // background refresh, but keep grid visible (no flash)\n      refreshData();\n    } catch (e) {\n      // revert on failure\n      setBlockedDaysLocal(prev => {\n        const next = new Set(prev);\n        if (next.has(date)) next.delete(date);\n        else next.add(date);\n        return next;\n      });\n      console.error('Error toggling blocked day:', e);\n    } finally {\n      setIsMutatingBlock(false);\n    }\n  }, [refreshData]);\n\n  const handleCreateAppointment = useCallback((time?: string, date?: string) => {\n    setSelectedTime(time);\n    if (date) setSelectedDate(date);\n    setEditingAppointment(null);\n    setIsModalOpen(true);\n  }, []);\n\n  const handleEditAppointment = useCallback((appointment: Appointment) => {\n    setEditingAppointment(appointment);\n    setSelectedTime(undefined);\n    setIsModalOpen(true);\n  }, []);\n\n  const handleModalClose = useCallback(() => {\n    setIsModalOpen(false);\n    setEditingAppointment(null);\n    setSelectedTime(undefined);\n  }, []);\n\n  const handleModalSuccess = useCallback(() => {\n    // keep grid up; do a gentle background refresh\n    refreshData();\n  }, [refreshData]);\n\n  const goToToday = useCallback(() => {\n    startTransition(() => { setSelectedDate(toYmd(new Date())); });\n  }, []);\n\n  const navigateWeek = useCallback((direction: 'prev' | 'next') => {\n    startTransition(() => {\n      const [y, m, d] = selectedDate.split('-').map(Number);\n      const dt = new Date(y, m - 1, d);\n      dt.setDate(dt.getDate() + (direction === 'prev' ? -7 : 7));\n      setSelectedDate(toYmd(dt));\n    });\n  }, [selectedDate]);\n\n  const navigateMonth = useCallback((direction: 'prev' | 'next') => {\n    startTransition(() => {\n      const [y, m, d] = selectedDate.split('-').map(Number);\n      const dt = new Date(y, m - 1, d);\n      dt.setMonth(dt.getMonth() + (direction === 'prev' ? -1 : 1));\n      setSelectedDate(toYmd(dt));\n    });\n  }, [selectedDate]);\n\n  // IMPORTANT: pass the optimistic set, not a freshly constructed Set every render.\n  const blockedDaysSet = blockedDaysLocal;\n\n  return (\n    <div className=\"space-y-6\">\n      <ScheduleHeader\n        selectedDate={selectedDate}\n        setSelectedDate={(v) => { startTransition(() => { setSelectedDate(v); }); }}\n        viewMode={viewMode}\n        setViewMode={(v) => { startTransition(() => { setViewMode(v); }); }}\n        onCreateAppointment={() => { handleCreateAppointment(); }}\n        onGoToToday={goToToday}\n      />\n\n      <ScheduleGrid\n        selectedDate={selectedDate}\n        appointments={appointments}\n        timeBlocks={timeBlocks}\n        // Only show \"loading\" for initial mount, not refetches\n        loading={!!isInitialLoading}\n        viewMode={viewMode}\n        onEditAppointment={handleEditAppointment}\n        onCreateAppointment={handleCreateAppointment}\n        blockedDays={blockedDaysSet}\n        onToggleDayBlock={toggleDayBlock}\n        onNavigateMonth={navigateMonth}\n        onNavigateWeek={navigateWeek}\n        // If you want, expose an \"isRefreshing\" to draw a subtle top progress bar\n        isRefreshing={!!isRefetching || isMutatingBlock}\n      />\n\n      <ScheduleSidebar viewMode={viewMode} />\n\n      <AppointmentModal\n        isOpen={isModalOpen}\n        onClose={handleModalClose}\n        onSuccess={handleModalSuccess}\n        appointment={editingAppointment}\n        selectedDate={selectedDate}\n        selectedTime={selectedTime}\n      />\n    </div>\n  );\n};\n\nexport default ScheduleTab;\n","import React from 'react';\n\nimport type { Category } from '../types';\n\ninterface CategorySelectorProps {\n  categories: Category[];\n  selectedCategory: string;\n  onCategoryChange: (categoryId: string) => void;\n}\n\nexport const CategorySelector: React.FC<CategorySelectorProps> = ({\n  categories,\n  selectedCategory,\n  onCategoryChange\n}) => {\n\n  return (\n    <div className=\"p-4\">\n      {categories.map((category) => {\n        const isSelected = selectedCategory === category.id;\n        \n        return (\n          <button\n            key={category.id}\n            onClick={() => { onCategoryChange(category.id); }}\n            className={`w-full flex items-center space-x-3 p-3 mb-2 rounded-lg text-left transition-colors ${\n              isSelected \n                ? 'bg-blue-600 text-white' \n                : 'text-gray-300 hover:bg-stone-700 hover:text-white'\n            }`}\n          >\n            <span>{category.name}</span>\n          </button>\n        );\n      })}\n    </div>\n  );\n};","import React from 'react';\r\nimport { AlertTriangle, X } from 'lucide-react';\r\n\r\nimport { Button } from '@/shared/ui';\r\n\r\ninterface DeleteServiceModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onConfirm: () => void;\r\n  serviceName: string;\r\n  loading: boolean;\r\n}\r\n\r\nexport const DeleteServiceModal: React.FC<DeleteServiceModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  onConfirm,\r\n  serviceName,\r\n  loading\r\n}) => {\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n      <div className=\"bg-stone-800 rounded-lg p-6 max-w-md w-full mx-4 border border-stone-700\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <div className=\"flex items-center space-x-3\">\r\n            <AlertTriangle className=\"h-6 w-6 text-red-500\" />\r\n            <h3 className=\"text-lg font-semibold text-white\">Delete Service</h3>\r\n          </div>\r\n          <Button\r\n            onClick={onClose}\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            className=\"text-gray-400 hover:text-white p-1\"\r\n            disabled={loading}\r\n          >\r\n            <X className=\"h-5 w-5\" />\r\n          </Button>\r\n        </div>\r\n        \r\n        <p className=\"text-gray-300 mb-6\">\r\n          Are you sure you want to delete <span className=\"font-semibold text-white\">&ldquo;{serviceName}&rdquo;</span>? \r\n          This action cannot be undone and will remove all associated service tiers.\r\n        </p>\r\n        \r\n        <div className=\"flex space-x-3\">\r\n          <Button\r\n            onClick={onClose}\r\n            variant=\"outline\"\r\n            size=\"md\"\r\n            className=\"flex-1 px-4 py-2 text-gray-300 border-gray-600 hover:bg-gray-700\"\r\n            disabled={loading}\r\n          >\r\n            Cancel\r\n          </Button>\r\n          <Button\r\n            onClick={onConfirm}\r\n            variant=\"destructive\"\r\n            size=\"md\"\r\n            className=\"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700\"\r\n            loading={loading}\r\n            disabled={loading}\r\n          >\r\n            Delete Service\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport { ChevronDown } from 'lucide-react';\r\n\r\n// Disabled affiliate services imports\r\n// import { CAR_SERVICE_OPTIONS, type ServiceOption } from '@/data/affiliate-services/cars/service/features';\r\n// import { \r\n//   CAR_ADDON_SERVICE_OPTIONS,\r\n//   CAR_INTERIOR_TRIM_SERVICE_OPTIONS,\r\n//   CAR_WINDOWS_SERVICE_OPTIONS,\r\n//   CAR_WHEELS_SERVICE_OPTIONS,\r\n//   type AddonServiceOption \r\n// } from '@/data/affiliate-services/cars/addons/features';\r\n\r\n// Fallback types and data\r\ninterface ServiceOption {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  explanation: string;\r\n  image: string;\r\n  duration: number;\r\n  features: string[];\r\n}\r\n\r\ninterface AddonServiceOption {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  explanation: string;\r\n  image: string;\r\n  duration: number;\r\n  features: string[];\r\n}\r\n\r\n// Empty fallback data\r\nconst CAR_SERVICE_OPTIONS: ServiceOption[] = [];\r\nconst CAR_ADDON_SERVICE_OPTIONS: AddonServiceOption[] = [];\r\nconst CAR_INTERIOR_TRIM_SERVICE_OPTIONS: AddonServiceOption[] = [];\r\nconst CAR_WINDOWS_SERVICE_OPTIONS: AddonServiceOption[] = [];\r\nconst CAR_WHEELS_SERVICE_OPTIONS: AddonServiceOption[] = [];\r\n\r\n// TODO: Add other vehicle types as they are implemented\r\nconst VEHICLE_SERVICES = {\r\n  cars: CAR_SERVICE_OPTIONS,\r\n  // trucks: TRUCK_SERVICE_OPTIONS,\r\n  // rvs: RV_SERVICE_OPTIONS,\r\n  // boats: BOAT_SERVICE_OPTIONS,\r\n  // motorcycles: MOTORCYCLE_SERVICE_OPTIONS,\r\n  // offroad: OFFROAD_SERVICE_OPTIONS,\r\n  // other: OTHER_SERVICE_OPTIONS,\r\n};\r\n\r\n// Addon services for different vehicle types (flattened)\r\nconst VEHICLE_ADDON_SERVICES = {\r\n  cars: CAR_ADDON_SERVICE_OPTIONS,\r\n  // trucks: TRUCK_ADDON_SERVICE_OPTIONS,\r\n  // rvs: RV_ADDON_SERVICE_OPTIONS,\r\n  // boats: BOAT_ADDON_SERVICE_OPTIONS,\r\n  // motorcycles: MOTORCYCLE_ADDON_SERVICE_OPTIONS,\r\n  // offroad: OFFROAD_ADDON_SERVICE_OPTIONS,\r\n  // other: OTHER_ADDON_SERVICE_OPTIONS,\r\n};\r\n\r\n// Map service names to specific addon categories\r\nconst getAddonServicesForService = (serviceName: string): AddonServiceOption[] => {\r\n  const serviceNameLower = serviceName.toLowerCase();\r\n  \r\n  // Map service names to addon categories\r\n  if (serviceNameLower.includes('trim') || \r\n      serviceNameLower.includes('interior-trim') ||\r\n      serviceNameLower.includes('interior trim') ||\r\n      serviceNameLower.includes('dash') ||\r\n      serviceNameLower.includes('console') ||\r\n      serviceNameLower.includes('panel')) {\r\n    return CAR_INTERIOR_TRIM_SERVICE_OPTIONS;\r\n  } else if (serviceNameLower.includes('window') || \r\n             serviceNameLower.includes('glass') ||\r\n             serviceNameLower.includes('windshield') ||\r\n             serviceNameLower.includes('tinted') ||\r\n             serviceNameLower.includes('tint')) {\r\n    return CAR_WINDOWS_SERVICE_OPTIONS;\r\n  } else if (serviceNameLower.includes('wheel') || \r\n             serviceNameLower.includes('rim') ||\r\n             serviceNameLower.includes('tire') ||\r\n             serviceNameLower.includes('brake') ||\r\n             serviceNameLower.includes('caliper')) {\r\n    return CAR_WHEELS_SERVICE_OPTIONS;\r\n  }\r\n  \r\n  // Default to all addon services if no specific match\r\n  return CAR_ADDON_SERVICE_OPTIONS;\r\n};\r\n\r\ninterface FeatureDropdownProps {\r\n  selectedFeatures: string[];\r\n  onFeaturesChange: (features: string[]) => void;\r\n  vehicleType?: string;\r\n  categoryType?: 'service-packages' | 'addons';\r\n  serviceName?: string;\r\n  disabled?: boolean;\r\n}\r\n\r\nexport const FeatureDropdown: React.FC<FeatureDropdownProps> = ({\r\n  selectedFeatures,\r\n  onFeaturesChange,\r\n  vehicleType = 'cars',\r\n  categoryType = 'service-packages',\r\n  serviceName,\r\n  disabled = false\r\n}) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [dropdownPosition, setDropdownPosition] = useState({ top: 0, left: 0 });\r\n  const dropdownRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Get services for the current vehicle type and category\r\n  const availableServices = categoryType === 'addons' \r\n    ? (serviceName ? getAddonServicesForService(serviceName) : VEHICLE_ADDON_SERVICES[vehicleType as keyof typeof VEHICLE_ADDON_SERVICES])\r\n    : VEHICLE_SERVICES[vehicleType as keyof typeof VEHICLE_SERVICES];\r\n\r\n  // Use all available services since we removed search\r\n  const filteredServices = availableServices;\r\n\r\n  // Get selected service objects (only service IDs)\r\n  const selectedServiceObjects = selectedFeatures\r\n    .map(id => availableServices.find(s => s.id === id))\r\n    .filter(Boolean) as (ServiceOption | AddonServiceOption)[];\r\n\r\n  // Handle service selection\r\n  const handleServiceToggle = (serviceId: string) => {\r\n    if (selectedFeatures.includes(serviceId)) {\r\n      // Remove service\r\n      onFeaturesChange(selectedFeatures.filter(id => id !== serviceId));\r\n    } else {\r\n      // Add service\r\n      onFeaturesChange([...selectedFeatures, serviceId]);\r\n    }\r\n  };\r\n\r\n\r\n  // Close dropdown when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      // Check if the click is outside both the button and the dropdown\r\n      const target = event.target as Node;\r\n      const isInsideButton = dropdownRef.current?.contains(target);\r\n      const isInsideDropdown = document.querySelector('[data-dropdown-portal]')?.contains(target);\r\n      \r\n      if (!isInsideButton && !isInsideDropdown) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n    }\r\n    \r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n    };\r\n  }, [isOpen]);\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      <label className=\"block text-sm font-medium text-gray-300\">\r\n        {categoryType === 'addons' ? 'Addon Services' : 'Service Options'}\r\n      </label>\r\n      \r\n      {/* Selected Services Display */}\r\n      {selectedServiceObjects.length > 0 && (\r\n        <div className=\"space-y-2\">\r\n          <div className=\"text-xs text-gray-400\">\r\n            {selectedServiceObjects.length} service{selectedServiceObjects.length !== 1 ? 's' : ''} selected:\r\n          </div>\r\n          <div className=\"flex flex-wrap gap-2\">\r\n            {selectedServiceObjects.map((service) => (\r\n              <div\r\n                key={service.id}\r\n                className=\"inline-flex items-center gap-2 bg-blue-900 text-blue-200 px-3 py-1 rounded-full text-sm\"\r\n              >\r\n                <span>{service.name}</span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Dropdown */}\r\n      <div className=\"relative\" ref={dropdownRef}>\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => {\r\n            if (!isOpen && dropdownRef.current) {\r\n              const rect = dropdownRef.current.getBoundingClientRect();\r\n              setDropdownPosition({\r\n                top: rect.bottom + window.scrollY + 4,\r\n                left: rect.left + window.scrollX\r\n              });\r\n            }\r\n            setIsOpen(!isOpen);\r\n          }}\r\n          disabled={disabled}\r\n          className=\"w-full bg-gray-600 border border-gray-500 rounded px-3 py-2 text-left text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-between\"\r\n        >\r\n          <span className=\"text-gray-300\">\r\n            {selectedServiceObjects.length > 0 \r\n              ? `Add more ${categoryType === 'addons' ? 'addons' : 'services'} (${selectedServiceObjects.length} selected)`\r\n              : `Select ${categoryType === 'addons' ? 'addons' : 'services'}...`\r\n            }\r\n          </span>\r\n          <ChevronDown className={`h-4 w-4 text-gray-400 transition-transform ${isOpen ? 'rotate-180' : ''}`} />\r\n        </button>\r\n\r\n        {isOpen && createPortal(\r\n          <div \r\n            data-dropdown-portal\r\n            className=\"fixed z-[60] w-96 bg-gray-700 border border-gray-600 rounded-lg shadow-lg\" \r\n            style={{ \r\n              top: dropdownPosition.top,\r\n              left: dropdownPosition.left\r\n            }}\r\n          >\r\n            {/* Services List */}\r\n            <div>\r\n              {filteredServices.length > 0 ? (\r\n                <div className=\"py-1\">\r\n                  <div className=\"grid grid-cols-2 gap-0\">\r\n                    {filteredServices.map((service) => {\r\n                      const isSelected = selectedFeatures.includes(service.id);\r\n                      return (\r\n                        <button\r\n                          key={service.id}\r\n                          type=\"button\"\r\n                          onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            handleServiceToggle(service.id);\r\n                          }}\r\n                          className={`w-full text-left px-3 py-2 hover:bg-gray-600 transition-colors flex items-center gap-2 ${\r\n                            isSelected ? 'bg-blue-900 text-blue-200' : 'text-gray-300'\r\n                          }`}\r\n                        >\r\n                          <div className={`w-4 h-4 rounded border-2 flex items-center justify-center ${\r\n                            isSelected \r\n                              ? 'bg-blue-500 border-blue-500' \r\n                              : 'border-gray-400'\r\n                          }`}>\r\n                            {isSelected && (\r\n                              <div className=\"w-2 h-2 bg-white rounded-sm\" />\r\n                            )}\r\n                          </div>\r\n                          <span className=\"text-sm\">{service.name}</span>\r\n                        </button>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"px-3 py-4 text-center text-gray-400 text-sm\">\r\n                  No services available\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Footer */}\r\n            <div className=\"p-3 border-t border-gray-600 bg-gray-800\">\r\n              <div className=\"text-xs text-gray-400 text-center\">\r\n                Select {categoryType === 'addons' ? 'addons' : 'services'} to add to this service tier\r\n              </div>\r\n            </div>\r\n          </div>,\r\n          document.body\r\n        )}\r\n      </div>\r\n\r\n      {/* Help Text */}\r\n      <div className=\"text-xs text-gray-400\">\r\n        Choose from our standardized {categoryType === 'addons' ? 'addon' : 'service'} list to ensure consistent service descriptions for customers.\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","// JSON representation interfaces\ninterface TierJSON {\n  id: string;\n  name: string;\n  price: number;\n  duration: number;\n  serviceOptions?: string[];\n  enabled: boolean;\n  popular: boolean;\n}\n\ninterface ServiceJSON {\n  id: string;\n  name: string;\n  tiers: TierJSON[];\n}\n\nexport class Tier {\n  id: string;\n  name: string;\n  price: number;\n  duration: number;\n  serviceOptions: string[]; // Only service IDs from service.json\n  enabled: boolean;\n  popular: boolean;\n\n  constructor(id: string, name: string, price: number, duration: number) {\n    this.id = id;\n    this.name = name;\n    this.price = price;\n    this.duration = duration;\n    this.serviceOptions = [];\n    this.enabled = true;\n    this.popular = false;\n  }\n\n  // Add a service option (only service IDs from service.json)\n  addServiceOption(option: string) {\n    if (!this.serviceOptions.includes(option)) {\n      this.serviceOptions.push(option);\n    }\n  }\n\n\n  // Get all features (just the serviceOptions, no complex logic)\n  get all_features(): string[] {\n    return [...this.serviceOptions];\n  }\n\n  // Get all service IDs (all options are service IDs now)\n  getServiceIds(availableServices: Array<{id: string, name: string}>): string[] {\n    return this.serviceOptions.filter(option => \n      availableServices.some(service => service.id === option)\n    );\n  }\n}\n\nexport class Service {\n  id: string;\n  name: string;\n  tiers: Tier[];\n\n  constructor(id: string, name: string) {\n    this.id = id;\n    this.name = name;\n    this.tiers = [];\n  }\n\n  addTier(tier: Tier) {\n    this.tiers.push(tier);\n  }\n\n  getTierById(id: string): Tier | undefined {\n    return this.tiers.find(tier => tier.id === id);\n  }\n\n  getTierNames(): string[] {\n    return this.tiers.map(tier => tier.name);\n  }\n\n  toJSON() {\n    return {\n      id: this.id,\n      name: this.name,\n      tiers: this.tiers.map(tier => ({\n        id: tier.id,\n        name: tier.name,\n        price: tier.price,\n        duration: tier.duration,\n        serviceOptions: tier.serviceOptions,\n        enabled: tier.enabled,\n        popular: tier.popular\n      }))\n    };\n  }\n\n  static fromJSON(data: ServiceJSON): Service {\n    const service = new Service(data.id, data.name);\n    service.tiers = data.tiers.map((tierData: TierJSON) => {\n      const tier = new Tier(tierData.id, tierData.name, tierData.price, tierData.duration);\n      tier.enabled = tierData.enabled;\n      tier.popular = tierData.popular;\n      tier.serviceOptions = tierData.serviceOptions || [];\n      return tier;\n    });\n    return service;\n  }\n}","import React, { useEffect,useRef, useState } from 'react';\nimport { Edit2, Plus, Save, Trash2, X } from 'lucide-react';\n\nimport { Button } from '@/shared/ui';\n\nimport { FeatureDropdown } from './FeatureDropdown';\n// Disabled affiliate services import\n// import { CAR_SERVICE_OPTIONS } from '@/data/affiliate-services/cars/service/features';\n\n// Fallback empty data\nconst CAR_SERVICE_OPTIONS: Array<{ id: string; name: string }> = [];\nimport { Service, Tier } from '../types/ServiceClasses';\n\n// Using Service and Tier classes from ServiceClasses.ts\n\n// Plain tier object structure (for deserialization)\ninterface TierData {\n  id: string;\n  name: string;\n  price: number;\n  duration: number;\n  features?: string[];\n  serviceOptions?: string[];\n  tierCopies?: Record<string, string>;\n  enabled: boolean;\n  popular: boolean;\n}\n\ninterface MultiTierPricingModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSubmit: (serviceName: string, tiers: Tier[]) => void;\n  initialTiers?: TierData[];\n  initialServiceName?: string;\n  loading?: boolean;\n  error?: string | null;\n  vehicleType?: string;\n  categoryType?: 'service-packages' | 'addons';\n}\n\nexport const MultiTierPricingModal: React.FC<MultiTierPricingModalProps> = ({\n  isOpen,\n  onClose,\n  onSubmit,\n  initialTiers = [],\n  initialServiceName = '',\n  loading = false,\n  error = null,\n  vehicleType = 'cars',\n  categoryType = 'service-packages'\n}) => {\n  const [serviceName, setServiceName] = useState<string>(initialServiceName);\n  const [service, setService] = useState<Service>(() => {\n    if (initialTiers.length > 0) {\n      const service = new Service('temp-id', initialServiceName);\n        initialTiers.forEach(tierData => {\n          const tier = new Tier(tierData.id, tierData.name, tierData.price, tierData.duration);\n          tier.serviceOptions = tierData.serviceOptions || [];\n          tier.enabled = tierData.enabled;\n          tier.popular = tierData.popular;\n          service.addTier(tier);\n        });\n      return service;\n    } else {\n      const service = new Service('temp-id', initialServiceName);\n      service.addTier(createDefaultTier());\n      return service;\n    }\n  });\n  const [editingTierId, setEditingTierId] = useState<string | null>(null);\n  const [editingTier, setEditingTier] = useState<Tier | null>(null);\n  const scrollContainerRef = useRef<HTMLDivElement>(null);\n  const prevInitialTiersRef = useRef<TierData[] | undefined>(initialTiers);\n  const prevInitialServiceNameRef = useRef<string | undefined>(initialServiceName);\n\n  // Update tiers and service name when initial values change (for editing existing services)\n  useEffect(() => {\n    // Force update when initialTiers has data, regardless of comparison\n    const hasInitialTiers = initialTiers.length > 0;\n    const tiersChanged = JSON.stringify(prevInitialTiersRef.current) !== JSON.stringify(initialTiers);\n    const serviceNameChanged = prevInitialServiceNameRef.current !== initialServiceName;\n    \n    if (tiersChanged || hasInitialTiers) {\n      if (initialTiers.length > 0) {\n        // Convert old format to new Service class format\n        const service = new Service('temp-id', initialServiceName);\n        initialTiers.forEach(tierData => {\n          const tier = new Tier(tierData.id, tierData.name, tierData.price, tierData.duration);\n          // Convert features to serviceOptions for the new structure\n          tier.serviceOptions = tierData.serviceOptions || [];\n          tier.enabled = tierData.enabled;\n          tier.popular = tierData.popular;\n          service.addTier(tier);\n        });\n        setService(service);\n      } else {\n        const service = new Service('temp-id', initialServiceName);\n        service.addTier(createDefaultTier());\n        setService(service);\n      }\n      // Reset editing state when switching between create/edit modes\n      setEditingTierId(null);\n      setEditingTier(null);\n      prevInitialTiersRef.current = initialTiers;\n    }\n    \n    if (serviceNameChanged) {\n      setServiceName(initialServiceName);\n      prevInitialServiceNameRef.current = initialServiceName;\n    }\n  }, [initialTiers, initialServiceName]);\n\n  function createDefaultTier(): Tier {\n    return new Tier(\n      `tier-${Date.now().toString()}-${Math.random().toString(36).substring(2, 11)}`,\n      '',\n      0,\n      60\n    );\n  }\n\n  // Helper function to ensure tier is a Tier class instance\n  const ensureTierInstance = (tier: Tier | TierData): Tier => {\n    if (tier instanceof Tier) {\n      return tier;\n    } else {\n      // Convert plain object back to Tier instance\n      const tierInstance = new Tier(tier.id, tier.name, tier.price, tier.duration);\n      tierInstance.serviceOptions = tier.serviceOptions || [];\n      tierInstance.tierCopies = tier.tierCopies || {};\n      tierInstance.enabled = tier.enabled;\n      tierInstance.popular = tier.popular;\n      return tierInstance;\n    }\n  }\n\n  const addTier = () => {\n    setService(prev => {\n      const newService = new Service(prev.id, prev.name);\n      prev.tiers.forEach(tier => {\n        newService.addTier(ensureTierInstance(tier));\n      });\n      newService.addTier(createDefaultTier());\n      return newService;\n    });\n    // Scroll to the right to show the new tier\n    setTimeout(() => {\n      if (scrollContainerRef.current) {\n        scrollContainerRef.current.scrollLeft = scrollContainerRef.current.scrollWidth;\n      }\n    }, 100);\n  };\n\n  const removeTier = (tierId: string) => {\n    if (service.tiers.length > 1) {\n    setService(prev => {\n      const newService = new Service(prev.id, prev.name);\n      prev.tiers.forEach(tier => {\n        if (tier.id !== tierId) {\n          newService.addTier(ensureTierInstance(tier));\n        }\n      });\n      return newService;\n    });\n      if (editingTierId === tierId) {\n        setEditingTierId(null);\n        setEditingTier(null);\n      }\n    }\n  };\n\n  const startEditing = (tier: Tier) => {\n    setEditingTierId(tier.id);\n    setEditingTier({ ...tier });\n  };\n\n  const saveTier = () => {\n    if (editingTier) {\n    setService(prev => {\n      const newService = new Service(prev.id, prev.name);\n      prev.tiers.forEach(tier => {\n        if (tier.id === editingTier.id) {\n          newService.addTier(editingTier);\n        } else {\n          newService.addTier(ensureTierInstance(tier));\n        }\n      });\n      return newService;\n    });\n      setEditingTierId(null);\n      setEditingTier(null);\n    }\n  };\n\n  const cancelEditing = () => {\n    setEditingTierId(null);\n    setEditingTier(null);\n  };\n\n  const updateEditingTier = (field: keyof Tier, value: string | number | boolean | string[]) => {\n    if (editingTier) {\n      setEditingTier({ ...editingTier, [field]: value });\n    }\n  };\n\n\n  const handleSubmit = () => {\n    // Validate service name\n    if (!serviceName.trim()) {\n      return;\n    }\n    \n    // Filter out tiers with empty names and convert to backend format\n    const validTiers = service.tiers\n      .filter(tier => tier.name.trim() !== '')\n      .map(tier => ({\n        id: tier.id,\n        name: tier.name,\n        price: tier.price,\n        duration: tier.duration,\n        features: tier.serviceOptions, // Convert serviceOptions to features for backend\n        enabled: tier.enabled,\n        popular: tier.popular\n      }));\n    \n    if (validTiers.length > 0) {\n      onSubmit(serviceName.trim(), validTiers);\n    }\n  };\n\n  const handleClose = () => {\n    // Reset to initial state when closing\n    if (initialTiers.length > 0) {\n      const service = new Service('temp-id', initialServiceName);\n      initialTiers.forEach(tierData => {\n        const tier = new Tier(tierData.id, tierData.name, tierData.price, tierData.duration);\n        tier.serviceOptions = tierData.serviceOptions || [];\n        tier.enabled = tierData.enabled;\n        tier.popular = tierData.popular;\n        service.addTier(tier);\n      });\n      setService(service);\n    } else {\n      const service = new Service('temp-id', initialServiceName);\n      service.addTier(createDefaultTier());\n      setService(service);\n    }\n    setServiceName(initialServiceName);\n    setEditingTierId(null);\n    setEditingTier(null);\n    onClose();\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-gray-800 rounded-lg w-full max-w-6xl max-h-[90vh] overflow-hidden\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-700\">\n          <h2 className=\"text-xl font-semibold text-white\">Multi-Tier Pricing</h2>\n          <Button\n            onClick={handleClose}\n            variant=\"ghost\"\n            size=\"sm\"\n            className=\"text-gray-400 hover:text-white p-2\"\n          >\n            <X className=\"h-6 w-6\" />\n          </Button>\n        </div>\n\n        {/* Content */}\n        <div className=\"p-6 overflow-y-auto max-h-[calc(90vh-140px)]\">\n          {/* Error Display */}\n          {error && (\n            <div className=\"mb-4 p-3 bg-red-900 border border-red-700 rounded-lg\">\n              <div className=\"text-red-200 text-sm\">\n                <strong>Error:</strong> {error}\n              </div>\n            </div>\n          )}\n          \n          {/* Service Name */}\n          <div className=\"mb-6\">\n            <label htmlFor=\"service-name\" className=\"block text-sm font-medium text-gray-300 mb-2\">\n              Service Name\n            </label>\n            <input\n              id=\"service-name\"\n              type=\"text\"\n              value={serviceName}\n              onChange={(e) => { setServiceName(e.target.value); }}\n              className=\"w-full bg-gray-600 border border-gray-500 rounded px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              placeholder=\"e.g., Premium Auto Detail, Basic Wash, etc.\"\n            />\n          </div>\n          \n          {/* Tiers Container */}\n          <div className=\"mb-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-lg font-medium text-white\">Service Tiers</h3>\n              <Button\n                onClick={addTier}\n                variant=\"primary\"\n                size=\"md\"\n                className=\"px-4 py-2\"\n                leftIcon={<Plus className=\"h-4 w-4\" />}\n              >\n                Add Tier\n              </Button>\n            </div>\n\n            {/* Scrollable Tiers */}\n            <div \n              ref={scrollContainerRef}\n              className=\"flex gap-4 overflow-x-auto pb-4\"\n              style={{ \n                scrollbarWidth: 'thin',\n                scrollbarColor: '#6B7280 #374151'\n              }}\n            >\n              {service.tiers.map((tier, index) => {\n                // Ensure tier is a Tier class instance\n                const tierInstance = ensureTierInstance(tier);\n                return (\n                <div\n                  key={tierInstance.id}\n                  className={`min-w-[300px] bg-gray-700 rounded-lg p-4 border-2 ${\n                    editingTierId === tierInstance.id ? 'border-blue-500' : 'border-gray-600'\n                  }`}\n                >\n                  {/* Tier Header */}\n                  <div className=\"flex items-center justify-between mb-3\">\n                    <span className=\"text-sm text-gray-400\">Tier {index + 1}</span>\n                    <div className=\"flex gap-2\">\n                      {editingTierId === tier.id ? (\n                        <>\n                          <Button\n                            onClick={saveTier}\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            className=\"text-green-400 hover:text-green-300 p-1\"\n                            title=\"Save\"\n                          >\n                            <Save className=\"h-4 w-4\" />\n                          </Button>\n                          <Button\n                            onClick={cancelEditing}\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            className=\"text-gray-400 hover:text-gray-300 p-1\"\n                            title=\"Cancel\"\n                          >\n                            <X className=\"h-4 w-4\" />\n                          </Button>\n                        </>\n                      ) : (\n                        <Button\n                          onClick={() => { startEditing(tier); }}\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          className=\"text-blue-400 hover:text-blue-300 p-1\"\n                          title=\"Edit\"\n                        >\n                          <Edit2 className=\"h-4 w-4\" />\n                        </Button>\n                      )}\n                      {service.tiers.length > 1 && (\n                        <Button\n                          onClick={() => { removeTier(tier.id); }}\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          className=\"text-red-400 hover:text-red-300 p-1\"\n                          title=\"Remove Tier\"\n                        >\n                          <Trash2 className=\"h-4 w-4\" />\n                        </Button>\n                      )}\n                    </div>\n                  </div>\n\n                  {/* Tier Content */}\n                  {editingTierId === tier.id && editingTier ? (\n                    <div className=\"space-y-3\">\n                      {/* Tier Name */}\n                      <div>\n                        <label htmlFor={`tier-name-${tier.id}`} className=\"block text-sm font-medium text-gray-300 mb-1\">\n                          Tier Name\n                        </label>\n                        <input\n                          id={`tier-name-${tier.id}`}\n                          type=\"text\"\n                          value={editingTier.name}\n                          onChange={(e) => { updateEditingTier('name', e.target.value); }}\n                          className=\"w-full bg-gray-600 border border-gray-500 rounded px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                          placeholder=\"e.g., Basic, Premium, Ultimate\"\n                        />\n                      </div>\n\n                      {/* Price */}\n                      <div>\n                        <label htmlFor={`tier-price-${tier.id}`} className=\"block text-sm font-medium text-gray-300 mb-1\">\n                          Price ($)\n                        </label>\n                        <input\n                          id={`tier-price-${tier.id}`}\n                          type=\"text\"\n                          value={editingTier.price}\n                          onChange={(e) => {\n                            const value = e.target.value;\n                            // Allow numbers, decimal point, and empty string\n                            if (value === '' || /^\\d*\\.?\\d*$/.test(value)) {\n                              const numValue = value === '' ? 0 : parseFloat(value) || 0;\n                              updateEditingTier('price', numValue);\n                            }\n                          }}\n                          className=\"w-full bg-gray-600 border border-gray-500 rounded px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                          placeholder=\"0.00\"\n                        />\n                      </div>\n\n                      {/* Duration */}\n                      <div>\n                        <label htmlFor={`tier-duration-${tier.id}`} className=\"block text-sm font-medium text-gray-300 mb-1\">\n                          Duration (minutes)\n                        </label>\n                        <input\n                          id={`tier-duration-${tier.id}`}\n                          type=\"text\"\n                          value={editingTier.duration}\n                          onChange={(e) => {\n                            const value = e.target.value;\n                            // Only allow numbers and empty string\n                            if (value === '' || /^\\d+$/.test(value)) {\n                              const numValue = value === '' ? 0 : parseInt(value, 10);\n                              updateEditingTier('duration', numValue);\n                            }\n                          }}\n                          className=\"w-full bg-gray-600 border border-gray-500 rounded px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                          placeholder=\"60\"\n                        />\n                      </div>\n\n                      {/* Features */}\n                      <FeatureDropdown\n                        selectedFeatures={editingTier.serviceOptions}\n                        onFeaturesChange={(features) => { updateEditingTier('serviceOptions', features); }}\n                        vehicleType={vehicleType}\n                        categoryType={categoryType}\n                        serviceName={serviceName}\n                        disabled={false}\n                      />\n\n                      {/* Toggles */}\n                      <div className=\"flex gap-4\">\n                        <label className=\"flex items-center gap-2\">\n                          <input\n                            type=\"checkbox\"\n                            checked={editingTier.enabled}\n                            onChange={(e) => { updateEditingTier('enabled', e.target.checked); }}\n                            className=\"rounded border-gray-500 text-blue-500 focus:ring-blue-500\"\n                          />\n                          <span className=\"text-sm text-gray-300\">Enabled</span>\n                        </label>\n                        <label className=\"flex items-center gap-2\">\n                          <input\n                            type=\"checkbox\"\n                            checked={editingTier.popular}\n                            onChange={(e) => { updateEditingTier('popular', e.target.checked); }}\n                            className=\"rounded border-gray-500 text-blue-500 focus:ring-blue-500\"\n                          />\n                          <span className=\"text-sm text-gray-300\">Popular</span>\n                        </label>\n                      </div>\n                    </div>\n                  ) : (\n                    <div className=\"space-y-3\">\n                      {/* Display Mode */}\n                      <div>\n                        <h4 className=\"font-medium text-white mb-2\">\n                          {tierInstance.name || `Tier ${(index + 1).toString()}`}\n                        </h4>\n                        <div className=\"text-2xl font-bold text-green-400\">\n                          ${tierInstance.price.toFixed(2)}\n                        </div>\n                        <div className=\"text-sm text-gray-400\">\n                          {tierInstance.duration} minutes\n                        </div>\n                      </div>\n\n                      {/* Features */}\n                      {tierInstance.serviceOptions.length > 0 && (\n                        <div>\n                          <h5 className=\"text-sm font-medium text-gray-300 mb-2\">Features:</h5>\n                          <ul className=\"space-y-1\">\n                            {tierInstance.serviceOptions.map(option => {\n                              const serviceOption = CAR_SERVICE_OPTIONS.find(s => s.id === option);\n                              \n                              return (\n                                <li key={option} className=\"text-sm text-gray-300 flex items-center\">\n                                  <span className=\"w-2 h-2 bg-gray-400 rounded-full mr-2\"></span>\n                                  {serviceOption?.name || option}\n                                </li>\n                              );\n                            })}\n                          </ul>\n                        </div>\n                      )}\n\n                      {/* Status */}\n                      <div className=\"flex gap-2\">\n                        {!tier.enabled && (\n                          <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-900 text-red-200\">\n                            Disabled\n                          </span>\n                        )}\n                        {tier.popular && (\n                          <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-900 text-yellow-200\">\n                            Popular\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                  )}\n                </div>\n                );\n              })}\n            </div>\n          </div>\n\n          \n        </div>\n\n        {/* Footer */}\n        <div className=\"flex items-center justify-end gap-3 p-6 border-t border-gray-700\">\n          <Button\n            onClick={handleClose}\n            variant=\"ghost\"\n            size=\"md\"\n            className=\"px-4 py-2 text-gray-300 hover:text-white\"\n          >\n            Cancel\n          </Button>\n          <Button\n            onClick={handleSubmit}\n            variant=\"primary\"\n            size=\"md\"\n            loading={loading}\n            disabled={!serviceName.trim() || service.tiers.filter(t => t.name.trim()).length === 0}\n            className=\"px-6 py-2\"\n          >\n            {loading ? 'Saving...' : 'Save Service'}\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\n\nimport type { Service } from '../types';\n\ninterface ServiceSelectorProps {\n  services: Service[];\n  selectedService: string;\n  onServiceChange: (serviceId: string) => void;\n}\n\nexport const ServiceSelector: React.FC<ServiceSelectorProps> = ({\n  services,\n  selectedService,\n  onServiceChange\n}) => {\n  return (\n    <div className=\"p-4\">\n      {services.map((service) => {\n        const isSelected = selectedService === service.id;\n        \n        return (\n          <button\n            key={service.id}\n            onClick={() => { onServiceChange(service.id); }}\n              className={`w-full flex items-center space-x-3 p-3 mb-2 rounded-lg text-left transition-colors ${\n              isSelected \n                ? 'bg-purple-600 text-white' \n                : 'text-gray-300 hover:bg-stone-700 hover:text-white'\n            }`}\n          >\n            <span>{service.name}</span>\n          </button>\n        );\n      })}\n    </div>\n  );\n};","import React from 'react';\n\nimport type { Vehicle } from '../types';\n\ninterface VehicleSelectorProps {\n  vehicles: Vehicle[];\n  selectedVehicle: string;\n  onVehicleChange: (vehicleId: string) => void;\n}\n\nexport const VehicleSelector: React.FC<VehicleSelectorProps> = ({\n  vehicles,\n  selectedVehicle,\n  onVehicleChange\n}) => {\n  return (\n    <div className=\"p-4\">\n      {vehicles.map((vehicle) => {\n        const VehicleIcon = vehicle.icon as React.ComponentType<{ className?: string }>;\n        const isSelected = selectedVehicle === vehicle.id;\n        \n        return (\n          <button\n            key={vehicle.id}\n            onClick={() => { onVehicleChange(vehicle.id); }}\n              className={`w-full flex items-center space-x-3 p-3 mb-2 rounded-lg text-left transition-colors ${\n              isSelected \n                ? 'bg-green-600 text-white' \n                : 'text-gray-300 hover:bg-stone-700 hover:text-white'\n            }`}\n          >\n            <VehicleIcon className=\"h-5 w-5\" />\n            <span>{vehicle.name}</span>\n          </button>\n        );\n      })}\n    </div>\n  );\n};","import { useCallback, useState } from 'react';\r\nimport { Bike, Bot as Boat, Car, HelpCircle, Home, Mountain, Truck } from 'lucide-react';\r\n\r\nimport { servicesApi } from '@/shared/api/services.api';\r\n\r\nimport type { Vehicle } from '../types';\r\n\r\n// interface ApiResponse<T = unknown> {\r\n//   data: T;\r\n//   message?: string;\r\n// }\r\n\r\ninterface ServiceTier {\r\n  id: string;\r\n  name: string;\r\n  price: number;\r\n  duration: number;\r\n  features: string[];\r\n  enabled: boolean;\r\n  popular: boolean;\r\n  description?: string;\r\n}\r\n\r\ninterface ServiceData {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  base_price_cents: number;\r\n  tiers?: ServiceTier[];\r\n  tenant_id: number;\r\n  vehicle_id: number;\r\n  service_category_id: number;\r\n}\r\n\r\n// Mapping from frontend IDs to database IDs\r\nconst VEHICLE_ID_MAP: Record<string, number> = {\r\n  'cars': 1,\r\n  'suv': 3, // SUV has its own database ID\r\n  'trucks': 2,\r\n  'rvs': 4,\r\n  'boats': 5,\r\n  'motorcycles': 6,\r\n  'offroad': 7,\r\n  'other': 8\r\n};\r\n\r\nconst CATEGORY_ID_MAP: Record<string, number> = {\r\n  'interior': 1,\r\n  'exterior': 2, \r\n  'service-packages': 3,\r\n  'addons': 7,\r\n  'ceramic-coating': 4,\r\n  'paint-correction': 5,\r\n  'paint-protection-film': 6\r\n};\r\n\r\n// New hook for fetching services data from database\r\nexport const useServicesAPI = (tenantId?: string) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [isFetching, setIsFetching] = useState(false);\r\n\r\n  const fetchServices = useCallback(async (vehicleId: string, categoryId: string) => {\r\n    // Prevent multiple simultaneous calls\r\n    if (isFetching) {\r\n      return null;\r\n    }\r\n    \r\n    // Validate tenant ID is provided\r\n    if (!tenantId || tenantId === '') {\r\n      // Don't set error for missing tenant ID - just return early\r\n      return null;\r\n    }\r\n    \r\n    setIsFetching(true);\r\n    setLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n      // Convert frontend IDs to database IDs\r\n      const dbVehicleId = VEHICLE_ID_MAP[vehicleId];\r\n      const dbCategoryId = CATEGORY_ID_MAP[categoryId];\r\n      \r\n      if (!dbVehicleId || !dbCategoryId) {\r\n        throw new Error('Invalid vehicle or category ID');\r\n      }\r\n      \r\n      const services = await servicesApi.getServices(tenantId, vehicleId, dbCategoryId.toString());\r\n      return services as ServiceData[];\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to fetch services');\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n      setIsFetching(false);\r\n    }\r\n  }, [tenantId, isFetching]);\r\n\r\n  const createService = useCallback(async (vehicleId: string, categoryId: string, serviceTitle: string, tiers?: ServiceTier[]) => {\r\n    // Validate tenant ID is provided\r\n    if (!tenantId || tenantId === '') {\r\n      // Don't set error for missing tenant ID - just return early\r\n      return null;\r\n    }\r\n    \r\n    setLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n      // Convert frontend IDs to database IDs\r\n      const dbVehicleId = VEHICLE_ID_MAP[vehicleId];\r\n      const dbCategoryId = CATEGORY_ID_MAP[categoryId];\r\n      \r\n      if (!dbVehicleId || !dbCategoryId) {\r\n        throw new Error('Invalid vehicle or category ID');\r\n      }\r\n      \r\n      const requestBody: Partial<ServiceData> = {\r\n        tenant_id: parseInt(tenantId),\r\n        vehicle_id: dbVehicleId, // Send the database vehicle ID\r\n        service_category_id: dbCategoryId,\r\n        base_price_cents: 0, // Default base price, can be updated later\r\n        name: serviceTitle,\r\n        description: `${serviceTitle} service for ${vehicleId} ${categoryId}`\r\n      };\r\n      \r\n      // Add tiers if provided\r\n      if (tiers && tiers.length > 0) {\r\n        requestBody.tiers = tiers;\r\n      }\r\n      \r\n      const service = await servicesApi.createService(requestBody);\r\n      return service as ServiceData;\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to create service');\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [tenantId]);\r\n\r\n  const fetchServiceById = useCallback(async (serviceId: string) => {\r\n    // Validate tenant ID is provided\r\n    if (!tenantId || tenantId === '') {\r\n      // Don't set error for missing tenant ID - just return early\r\n      return null;\r\n    }\r\n    \r\n    setLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n      const service = await servicesApi.getService(serviceId);\r\n      return service as ServiceData;\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to fetch service');\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [tenantId]);\r\n\r\n  const updateService = useCallback(async (serviceId: string, serviceData: Partial<ServiceData>) => {\r\n    // Validate tenant ID is provided\r\n    if (!tenantId || tenantId === '') {\r\n      return null;\r\n    }\r\n    \r\n    setLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n      const service = await servicesApi.updateService(serviceId, serviceData);\r\n      return service as ServiceData;\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to update service');\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [tenantId]);\r\n\r\n  const deleteService = useCallback(async (serviceId: string) => {\r\n    // Validate tenant ID is provided\r\n    if (!tenantId || tenantId === '') {\r\n      return false;\r\n    }\r\n    \r\n    setLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n      await servicesApi.deleteService(serviceId);\r\n      return true;\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to delete service');\r\n      return false;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [tenantId]);\r\n\r\n  return {\r\n    fetchServices,\r\n    fetchServiceById,\r\n    createService,\r\n    updateService,\r\n    deleteService,\r\n    loading,\r\n    error\r\n  };\r\n};\r\n\r\nexport const useServicesData = () => {\r\n  const [vehicles] = useState<Vehicle[]>([\r\n    {\r\n      id: 'cars',\r\n      name: 'Cars',\r\n      icon: Car,\r\n      categories: [\r\n        {\r\n          id: 'service-packages',\r\n          name: 'Service Packages',\r\n          color: 'bg-green-600',\r\n          services: []\r\n        },\r\n        {\r\n          id: 'addons',\r\n          name: 'Addons',\r\n          color: 'bg-indigo-600',\r\n          services: []\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      id: 'suv',\r\n      name: 'SUV',\r\n      icon: Car,\r\n      categories: [\r\n        {\r\n          id: 'service-packages',\r\n          name: 'Service Packages',\r\n          color: 'bg-green-600',\r\n          services: []\r\n        },\r\n        {\r\n          id: 'addons',\r\n          name: 'Addons',\r\n          color: 'bg-indigo-600',\r\n          services: []\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      id: 'trucks',\r\n      name: 'Trucks',\r\n      icon: Truck,\r\n      categories: [\r\n        {\r\n          id: 'service-packages',\r\n          name: 'Service Packages',\r\n          color: 'bg-green-600',\r\n          services: []\r\n        },\r\n        {\r\n          id: 'addons',\r\n          name: 'Addons',\r\n          color: 'bg-indigo-600',\r\n          services: []\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      id: 'rvs',\r\n      name: 'RVs',\r\n      icon: Home,\r\n      categories: [\r\n        {\r\n          id: 'service-packages',\r\n          name: 'Service Packages',\r\n          color: 'bg-green-600',\r\n          services: []\r\n        },\r\n        {\r\n          id: 'addons',\r\n          name: 'Addons',\r\n          color: 'bg-indigo-600',\r\n          services: []\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      id: 'boats',\r\n      name: 'Boats',\r\n      icon: Boat,\r\n      categories: [\r\n        {\r\n          id: 'service-packages',\r\n          name: 'Service Packages',\r\n          color: 'bg-green-600',\r\n          services: []\r\n        },\r\n        {\r\n          id: 'addons',\r\n          name: 'Addons',\r\n          color: 'bg-indigo-600',\r\n          services: []\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      id: 'motorcycles',\r\n      name: 'Motorcycles',\r\n      icon: Bike,\r\n      categories: [\r\n        {\r\n          id: 'service-packages',\r\n          name: 'Service Packages',\r\n          color: 'bg-green-600',\r\n          services: []\r\n        },\r\n        {\r\n          id: 'addons',\r\n          name: 'Addons',\r\n          color: 'bg-indigo-600',\r\n          services: []\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      id: 'offroad',\r\n      name: 'Off-Road',\r\n      icon: Mountain,\r\n      categories: [\r\n        {\r\n          id: 'service-packages',\r\n          name: 'Service Packages',\r\n          color: 'bg-green-600',\r\n          services: []\r\n        },\r\n        {\r\n          id: 'addons',\r\n          name: 'Addons',\r\n          color: 'bg-indigo-600',\r\n          services: []\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      id: 'other',\r\n      name: 'Other',\r\n      icon: HelpCircle,\r\n      categories: [\r\n        {\r\n          id: 'service-packages',\r\n          name: 'Service Packages',\r\n          color: 'bg-green-600',\r\n          services: []\r\n        },\r\n        {\r\n          id: 'addons',\r\n          name: 'Addons',\r\n          color: 'bg-indigo-600',\r\n          services: []\r\n        }\r\n      ]\r\n    }\r\n  ]);\r\n\r\n  const toggleTierEnabled = () => {\r\n    // Implementation for toggling tier enabled/disabled state\r\n  };\r\n\r\n  return {\r\n    vehicles,\r\n    toggleTierEnabled\r\n  };\r\n};","import React, { useCallback, useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { Plus, Settings, Trash2 } from 'lucide-react';\r\n\r\nimport { useAuth } from '@/shared/hooks';\r\nimport { Button } from '@/shared/ui';\r\n\r\nimport { CategorySelector } from './components/CategorySelector';\r\nimport { DeleteServiceModal } from './components/DeleteServiceModal';\r\nimport { MultiTierPricingModal } from './components/MultiTierPricingModal';\r\nimport { ServiceSelector } from './components/ServiceSelector';\r\nimport { VehicleSelector } from './components/VehicleSelector';\r\nimport { useServicesData } from './hooks/useServicesData';\r\nimport type { Service } from './types';\r\n\r\nconst SimpleFixedServicesTab: React.FC = () => {\r\n  const [selectedVehicle, setSelectedVehicle] = useState<string>('cars');\r\n  const [selectedCategory, setSelectedCategory] = useState<string>('service-packages');\r\n  const [selectedService, setSelectedService] = useState<string>('');\r\n  const [currentServiceData, setCurrentServiceData] = useState<Service | null>(null);\r\n  const [availableServices, setAvailableServices] = useState<Service[]>([]);\r\n  const [isMultiTierModalOpen, setIsMultiTierModalOpen] = useState(false);\r\n  const [isDeleteServiceModalOpen, setIsDeleteServiceModalOpen] = useState(false);\r\n  const [isEditingService, setIsEditingService] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  \r\n  // Prevent infinite loops\r\n  const lastFetchRef = React.useRef<string>('');\r\n  \r\n  // Get tenant ID from AuthContext or URL params for admin users\r\n  const authContext = useAuth();\r\n  const user = authContext.user;\r\n  const { businessSlug } = useParams<{ businessSlug: string }>();\r\n  \r\n  // For tenant users, get ID from auth context\r\n  // For admin users, we'll need to fetch tenant ID from the business slug\r\n  const [adminTenantId, setAdminTenantId] = useState<string | null>(null);\r\n  \r\n  // Fetch tenant ID for admin users\r\n  useEffect(() => {\r\n    // Only fetch if user is admin and we have a business slug\r\n    if (user?.role === 'admin' && businessSlug && !adminTenantId) {\r\n      const fetchTenantId = async () => {\r\n        try {\r\n          const response = await fetch(`/api/tenants/${businessSlug}`);\r\n          \r\n          if (response.ok) {\r\n            const data = await response.json() as {\r\n              success: boolean;\r\n              tenant?: {\r\n                id: number;\r\n              };\r\n            };\r\n            \r\n            if (data.success && data.tenant?.id) {\r\n              setAdminTenantId(data.tenant.id.toString());\r\n            }\r\n          }\r\n        } catch (err: unknown) {\r\n          console.error('Error fetching tenant ID:', err);\r\n        }\r\n      };\r\n      void fetchTenantId();\r\n    }\r\n  }, [user?.role, businessSlug, adminTenantId]);\r\n  \r\n  // Get tenant ID from user context or admin lookup\r\n  const tenantId = user?.tenant_id?.toString() ?? adminTenantId ?? undefined;\r\n\r\n  const { vehicles } = useServicesData();\r\n  \r\n  // Direct API call function to avoid hook dependency issues\r\n  const fetchServicesDirect = useCallback(async (vehicleId: string, categoryId: string) => {\r\n    if (!tenantId) return null;\r\n    \r\n    setLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n      // Convert frontend IDs to database IDs\r\n      const VEHICLE_ID_MAP: Record<string, number> = {\r\n        'cars': 1,\r\n        'suv': 3, // SUV has its own database ID\r\n        'trucks': 2,\r\n        'rvs': 4,\r\n        'boats': 5,\r\n        'motorcycles': 6,\r\n        'offroad': 7,\r\n        'other': 8\r\n      };\r\n      \r\n      const CATEGORY_ID_MAP: Record<string, number> = {\r\n        'interior': 1,\r\n        'exterior': 2, \r\n        'service-packages': 3,\r\n        'addons': 7,\r\n        'ceramic-coating': 4,\r\n        'paint-correction': 5,\r\n        'paint-protection-film': 6\r\n      };\r\n      \r\n      const dbVehicleId = VEHICLE_ID_MAP[vehicleId];\r\n      const dbCategoryId = CATEGORY_ID_MAP[categoryId];\r\n      \r\n      if (!dbVehicleId || !dbCategoryId) {\r\n        throw new Error('Invalid vehicle or category ID');\r\n      }\r\n      \r\n      const response = await fetch(`/api/services/tenant/${tenantId}/vehicle/${vehicleId}/category/${dbCategoryId}`);\r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch services');\r\n      }\r\n      \r\n      const data = await response.json() as { success: boolean; data: unknown[] };\r\n      return data.data;\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to fetch services');\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [tenantId]);\r\n  \r\n  // Effect to fetch services when vehicle or category changes\r\n  useEffect(() => {\r\n    if (selectedVehicle && selectedCategory && tenantId) {\r\n      const fetchKey = `${selectedVehicle}-${selectedCategory}-${tenantId}`;\r\n      \r\n      // Prevent duplicate calls\r\n      if (lastFetchRef.current === fetchKey) {\r\n        return;\r\n      }\r\n      \r\n      lastFetchRef.current = fetchKey;\r\n      \r\n      void fetchServicesDirect(selectedVehicle, selectedCategory).then((data: unknown) => {\r\n        if (data && Array.isArray(data) && data.length > 0) {\r\n          // Convert API data to frontend Service format\r\n          const services = data.map((serviceData: unknown) => {\r\n            const service = serviceData as {\r\n              id: number;\r\n              name: string;\r\n              tiers?: Array<{\r\n                id: number;\r\n                name: string;\r\n                price: number;\r\n                duration: number;\r\n                features?: string[];\r\n                enabled: boolean;\r\n                popular?: boolean;\r\n              }>;\r\n            };\r\n            return {\r\n              id: service.id.toString(),\r\n              name: service.name,\r\n              tiers: service.tiers && service.tiers.length > 0 ? service.tiers.map((tier) => ({\r\n                id: tier.id.toString(),\r\n                name: tier.name,\r\n                price: tier.price,\r\n                duration: tier.duration,\r\n                features: tier.features || [],\r\n                enabled: tier.enabled,\r\n                popular: tier.popular || false\r\n              })) : []\r\n            };\r\n          });\r\n          \r\n          setAvailableServices(services);\r\n          \r\n          // If no service is currently selected, select the first one\r\n          if (!selectedService && services.length > 0) {\r\n            const firstService = services[0];\r\n            if (firstService) {\r\n              setSelectedService(firstService.id);\r\n              setCurrentServiceData(firstService);\r\n            }\r\n          } else if (selectedService) {\r\n            // Find the currently selected service in the new list\r\n            const currentService = services.find(s => s.id === selectedService);\r\n            if (currentService) {\r\n              setCurrentServiceData(currentService);\r\n            } else if (services.length > 0) {\r\n              // If the selected service is not in the new list, select the first one\r\n              const firstService = services[0];\r\n              if (firstService) {\r\n                setSelectedService(firstService.id);\r\n                setCurrentServiceData(firstService);\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          setCurrentServiceData(null);\r\n          setAvailableServices([]);\r\n          setSelectedService('');\r\n        }\r\n      });\r\n    }\r\n  }, [selectedVehicle, selectedCategory, tenantId, fetchServicesDirect, selectedService]);\r\n\r\n  // Effect to handle service selection changes\r\n  useEffect(() => {\r\n    if (selectedService && availableServices.length > 0) {\r\n      const selectedServiceData = availableServices.find(service => service.id === selectedService);\r\n      if (selectedServiceData) {\r\n        setCurrentServiceData(selectedServiceData);\r\n      }\r\n    }\r\n  }, [selectedService, availableServices]);\r\n\r\n  // Add the missing variable declarations here\r\n  const selectedVehicleData = vehicles.find(v => v.id === selectedVehicle);\r\n  const selectedCategoryData = selectedVehicleData?.categories.find(c => c.id === selectedCategory);\r\n\r\n  if (user?.role === 'admin' && businessSlug && !tenantId) {\r\n    return (\r\n      <div className=\"text-center py-12\">\r\n        <div className=\"text-gray-400 mb-4\">Loading affiliate data...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!tenantId) {\r\n    return (\r\n      <div className=\"text-center py-12\">\r\n        <div className=\"text-red-400 mb-4\">Configuration Error</div>\r\n        <h3 className=\"text-lg font-medium text-white mb-2\">Affiliate ID not found</h3>\r\n        <p className=\"text-gray-400 mb-4\">\r\n          {user?.role === 'admin' \r\n            ? 'Unable to load affiliate data. Please check the URL and try again.'\r\n            : 'Please log in again or contact support'\r\n          }\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const handleVehicleChange = (vehicleId: string) => {\r\n    setSelectedVehicle(vehicleId);\r\n    const vehicle = vehicles.find(v => v.id === vehicleId);\r\n    if (vehicle && vehicle.categories.length > 0) {\r\n      setSelectedCategory(vehicle.categories[0]?.id || 'service-packages');\r\n      setSelectedService(''); // Reset service selection\r\n    }\r\n  };\r\n\r\n  const handleCategoryChange = (categoryId: string) => {\r\n    setSelectedCategory(categoryId);\r\n    setSelectedService(''); // Reset service selection\r\n  };\r\n\r\n  const handleEditService = () => {\r\n    if (currentServiceData) {\r\n      setIsEditingService(true);\r\n      setIsMultiTierModalOpen(true);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Unified Three Column Container with Action Buttons */}\r\n      <div className=\"bg-stone-800 rounded-lg border border-stone-700 overflow-hidden\">\r\n        {/* Header Row with Column Titles and Action Buttons */}\r\n        <div className=\"p-4 border-b border-stone-700\">\r\n          <div className=\"grid grid-cols-[200px_200px_200px_auto] gap-0\">\r\n            <h3 className=\"text-lg font-semibold text-white px-4\">Vehicle</h3>\r\n            <h3 className=\"text-lg font-semibold text-white px-4\">Category</h3>\r\n            <h3 className=\"text-lg font-semibold text-white px-4\">Service</h3>\r\n            <div className=\"flex items-center justify-end space-x-2\">\r\n              <Button \r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                className=\"p-2 text-gray-400 hover:text-white\"\r\n                title=\"Edit Service\"\r\n                onClick={handleEditService}\r\n                disabled={!selectedService || !currentServiceData}\r\n              >\r\n                <Settings className=\"h-5 w-5\" />\r\n              </Button>\r\n              <Button \r\n                variant=\"primary\"\r\n                size=\"sm\"\r\n                className=\"p-2 bg-green-500 hover:bg-green-600\"\r\n                title=\"Add Service\"\r\n                onClick={() => {\r\n                  setIsEditingService(false);\r\n                  setIsMultiTierModalOpen(true);\r\n                }}\r\n                leftIcon={<Plus className=\"h-5 w-5\" />}\r\n              />\r\n              <Button \r\n                variant=\"destructive\"\r\n                size=\"sm\"\r\n                className=\"p-2 bg-red-500 hover:bg-red-600\"\r\n                title=\"Delete Service\"\r\n                onClick={() => { setIsDeleteServiceModalOpen(true); }}\r\n                disabled={!selectedService || !currentServiceData}\r\n                leftIcon={<Trash2 className=\"h-5 w-5\" />}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"grid grid-cols-[200px_200px_200px_auto] gap-0 min-h-[400px]\">\r\n          <div>\r\n            <VehicleSelector\r\n              vehicles={vehicles}\r\n              selectedVehicle={selectedVehicle}\r\n              onVehicleChange={handleVehicleChange}\r\n            />\r\n          </div>\r\n          \r\n          <div>\r\n            <CategorySelector\r\n              categories={selectedVehicleData?.categories || []}\r\n              selectedCategory={selectedCategory}\r\n              onCategoryChange={handleCategoryChange}\r\n            />\r\n          </div>\r\n          \r\n          <div>\r\n            <ServiceSelector\r\n              services={availableServices}\r\n              selectedService={selectedService}\r\n              onServiceChange={setSelectedService}\r\n            />\r\n          </div>\r\n          <div></div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Selected Service Display */}\r\n      {currentServiceData && (\r\n        <div className=\"bg-stone-800 rounded-lg border border-stone-700 p-6\">\r\n          <h3 className=\"text-lg font-semibold text-white mb-4\">Selected Service: {currentServiceData.name}</h3>\r\n          \r\n          {currentServiceData.tiers.length > 0 ? (\r\n            <div className=\"space-y-4\">\r\n              <div className=\"text-sm text-gray-400 mb-2\">\r\n                {currentServiceData.tiers.length} tier{currentServiceData.tiers.length !== 1 ? 's' : ''} configured:\r\n              </div>\r\n              <div className=\"space-y-4\">\r\n                {currentServiceData.tiers.map((tier, index) => (\r\n                  <div key={tier.id} className=\"bg-stone-700 rounded-lg p-4 border border-stone-600\">\r\n                    <div className=\"flex items-center justify-between mb-2\">\r\n                      <h4 className=\"font-medium text-white\">{tier.name}</h4>\r\n                      <span className=\"text-xs text-gray-400\">Tier {index + 1}</span>\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                      <div className=\"text-2xl font-bold text-green-400\">\r\n                        ${Number(tier.price).toFixed(2)}\r\n                      </div>\r\n                      <div className=\"text-sm text-gray-400\">\r\n                        {tier.duration} minutes\r\n                      </div>\r\n                      {tier.features.length > 0 && (\r\n                        <div className=\"text-sm text-gray-300\">\r\n                          <div className=\"font-medium mb-2\">Features:</div>\r\n                          <ul className=\"list-disc list-inside space-y-1\">\r\n                            {tier.features.map((feature, idx) => (\r\n                              <li key={idx} className=\"text-gray-400\">{feature}</li>\r\n                            ))}\r\n                          </ul>\r\n                        </div>\r\n                      )}\r\n                      <div className=\"flex gap-2 mt-3\">\r\n                        {tier.enabled && (\r\n                          <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-900 text-green-200\">\r\n                            Enabled\r\n                          </span>\r\n                        )}\r\n                        {tier.popular && (\r\n                          <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-900 text-yellow-200\">\r\n                            Popular\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-gray-400\">No tiers configured for this service.</div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Loading State */}\r\n      {loading && (\r\n        <div className=\"text-center py-12\">\r\n          <div className=\"text-gray-400 mb-4\">Loading services...</div>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Error State */}\r\n      {error && (\r\n        <div className=\"text-center py-12\">\r\n          <div className=\"text-red-400 mb-4\">Error: {error}</div>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Empty State */}\r\n      {availableServices.length === 0 && !loading && !error && selectedCategoryData && (\r\n        <div className=\"text-center py-12\">\r\n          <div className=\"text-gray-400 mb-4\">\r\n            No services configured for this category yet.\r\n          </div>\r\n          <h3 className=\"text-lg font-medium text-white mb-2\">Add Your First Service</h3>\r\n          <p className=\"text-gray-400 mb-4\">Click the + button above to create your first service and pricing tiers.</p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Multi-Tier Pricing Modal */}\r\n      <MultiTierPricingModal\r\n        key={`${isEditingService ? 'edit' : 'create'}-${currentServiceData?.id || 'new'}`}\r\n        isOpen={isMultiTierModalOpen}\r\n        onClose={() => {\r\n          setIsMultiTierModalOpen(false);\r\n          setIsEditingService(false);\r\n        }}\r\n        onSubmit={(_serviceName, _tiers) => {\r\n          setIsMultiTierModalOpen(false);\r\n          setIsEditingService(false);\r\n        }}\r\n        initialTiers={isEditingService ? currentServiceData?.tiers : undefined}\r\n        initialServiceName={isEditingService ? currentServiceData?.name || '' : ''}\r\n        loading={loading || false}\r\n        error={error}\r\n        vehicleType={selectedVehicle}\r\n        categoryType={selectedCategory as 'service-packages' | 'addons'}\r\n      />\r\n\r\n      {/* Delete Service Modal */}\r\n      <DeleteServiceModal\r\n        isOpen={isDeleteServiceModalOpen}\r\n        onClose={() => { setIsDeleteServiceModalOpen(false); }}\r\n        onConfirm={() => {\r\n          setIsDeleteServiceModalOpen(false);\r\n        }}\r\n        serviceName={currentServiceData?.name || ''}\r\n        loading={loading || false}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SimpleFixedServicesTab;\r\n","// API functions for website content management\r\n\r\nimport type { WebsiteContentData } from '@/shared/api/websiteContent.api';\r\n\r\n// Save website content for a tenant\r\nexport const saveWebsiteContent = async (tenantSlug: string, contentData: Partial<WebsiteContentData>): Promise<{ success: boolean; message?: string }> => {\r\n  try {\r\n    // Backend expects flat structure, so just pass contentData as is\r\n    // The WebsiteContentTab component already manages the flat structure\r\n    const response = await fetch(`/api/website-content/${tenantSlug}`, {\r\n      method: 'PUT',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(contentData),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const errorData = await response.json() as { error?: string };\r\n      throw new Error(errorData.error || 'Failed to save website content');\r\n    }\r\n\r\n    const result = await response.json() as { success: boolean; message?: string };\r\n    return result;\r\n  } catch (error) {\r\n    console.error('Error saving website content:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Get website content for a tenant\r\nexport const getWebsiteContent = async (tenantSlug: string): Promise<WebsiteContentData> => {\r\n  try {\r\n    const response = await fetch(`/api/website-content/${tenantSlug}`);\r\n\r\n    if (!response.ok) {\r\n      const errorData = await response.json() as { error?: string };\r\n      throw new Error(errorData.error || 'Failed to fetch website content');\r\n    }\r\n\r\n    const result = await response.json() as { success: boolean; content?: WebsiteContentData };\r\n    // Backend returns { success: true, content: {...} }\r\n    // Return the content directly or throw if missing\r\n    if (!result.content) {\r\n      throw new Error('No content data received from server');\r\n    }\r\n    return result.content;\r\n  } catch (error) {\r\n    console.error('Error fetching website content:', error);\r\n    throw error;\r\n  }\r\n};\r\n","/**\r\n * API client for tenant dashboard reviews\r\n */\r\n\r\nexport interface TenantReviewData {\r\n  customer_name: string;\r\n  rating: number;\r\n  comment: string;\r\n  reviewer_url?: string;\r\n  vehicle_type?: 'car' | 'truck' | 'suv' | 'boat' | 'rv' | 'motorcycle';\r\n  paint_correction?: boolean;\r\n  ceramic_coating?: boolean;\r\n  paint_protection_film?: boolean;\r\n  source?: 'website' | 'google' | 'yelp' | 'facebook';\r\n  avatar_filename?: string;\r\n}\r\n\r\nexport interface TenantReview {\r\n  id: number;\r\n  tenant_slug: string;\r\n  customer_name: string;\r\n  rating: number;\r\n  comment: string;\r\n  reviewer_url?: string;\r\n  vehicle_type?: string;\r\n  paint_correction: boolean;\r\n  ceramic_coating: boolean;\r\n  paint_protection_film: boolean;\r\n  source: string;\r\n  avatar_filename?: string;\r\n  status: 'pending' | 'approved' | 'rejected';\r\n  created_at: string;\r\n  updated_at: string;\r\n  published_at?: string;\r\n}\r\n\r\nexport interface CreateReviewResponse {\r\n  success: boolean;\r\n  data: TenantReview;\r\n  message: string;\r\n}\r\n\r\nexport interface GetReviewsResponse {\r\n  success: boolean;\r\n  data: TenantReview[];\r\n  pagination: {\r\n    total: number;\r\n    limit: number;\r\n    offset: number;\r\n    hasMore: boolean;\r\n  };\r\n}\r\n\r\nexport interface BusinessData {\r\n  id: number;\r\n  slug: string;\r\n  business_name: string;\r\n  application_status: string;\r\n  phone: string;\r\n  sms_phone: string;\r\n  twilio_phone: string;\r\n  service_areas: Array<{ city: string; state: string; zip?: string; primary?: boolean }>;\r\n  owner: string;\r\n  business_email: string;\r\n  personal_email: string;\r\n  first_name: string;\r\n  last_name: string;\r\n  personal_phone: string;\r\n  business_start_date: string;\r\n  website: string;\r\n  gbp_url: string;\r\n  google_maps_url: string;\r\n  facebook_url: string;\r\n  youtube_url: string;\r\n  tiktok_url: string;\r\n  instagram_url: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface GetBusinessResponse {\r\n  success: boolean;\r\n  data: BusinessData;\r\n}\r\n\r\n/**\r\n * Create a new review\r\n * Note: No authentication required - reviews are public submissions\r\n */\r\nexport const createReview = async (\r\n  tenantSlug: string,\r\n  reviewData: TenantReviewData\r\n): Promise<CreateReviewResponse> => {\r\n  const response = await fetch('/api/tenant-reviews', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({\r\n      tenant_slug: tenantSlug,\r\n      ...reviewData,\r\n    }),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({})) as { message?: string };\r\n    throw new Error(errorData.message || `HTTP error! status: ${response.status}`);\r\n  }\r\n\r\n  return response.json() as Promise<CreateReviewResponse>;\r\n};\r\n\r\n/**\r\n * Delete a review\r\n */\r\nexport const deleteReview = async (reviewId: number): Promise<{ success: boolean; message: string }> => {\r\n  const response = await fetch(`/api/tenant-reviews/${reviewId}`, {\r\n    method: 'DELETE',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({})) as { message?: string };\r\n    throw new Error(errorData.message || `HTTP error! status: ${response.status}`);\r\n  }\r\n\r\n  return response.json() as Promise<{ success: boolean; message: string }>;\r\n};\r\n\r\n/**\r\n * Upload avatar for a review\r\n */\r\nexport const uploadAvatar = async (\r\n  avatarFile: File,\r\n  customerName: string,\r\n  reviewId: number\r\n): Promise<{ success: boolean; message: string; avatarUrl?: string; filename?: string }> => {\r\n  const formData = new FormData();\r\n  formData.append('avatar', avatarFile);\r\n  formData.append('customerName', customerName);\r\n  formData.append('reviewId', reviewId.toString());\r\n\r\n  const response = await fetch('/api/tenant-reviews/upload-avatar', {\r\n    method: 'POST',\r\n    body: formData,\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({})) as { message?: string };\r\n    throw new Error(errorData.message || `HTTP error! status: ${response.status}`);\r\n  }\r\n\r\n  return response.json() as Promise<{ success: boolean; message: string; avatarUrl?: string; filename?: string }>;\r\n};\r\n\r\n/**\r\n * Get reviews for a specific tenant (public endpoint)\r\n */\r\nexport const getReviews = async (\r\n  tenantSlug: string,\r\n  options: {\r\n    limit?: number;\r\n    offset?: number;\r\n  } = {}\r\n): Promise<GetReviewsResponse> => {\r\n  const params = new URLSearchParams();\r\n  \r\n  if (options.limit) params.append('limit', options.limit.toString());\r\n  if (options.offset) params.append('offset', options.offset.toString());\r\n\r\n  const response = await fetch(`/api/tenant-reviews/${tenantSlug}?${params}`, {\r\n    method: 'GET',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({})) as { message?: string };\r\n    throw new Error(errorData.message || `HTTP error! status: ${response.status}`);\r\n  }\r\n\r\n  return response.json() as Promise<GetReviewsResponse>;\r\n};\r\n\r\n/**\r\n * Get reviews for a specific tenant (authenticated endpoint)\r\n */\r\nexport const getTenantReviews = async (\r\n  tenantSlug: string,\r\n  options: {\r\n    status?: 'pending' | 'approved' | 'rejected';\r\n    limit?: number;\r\n    offset?: number;\r\n  } = {}\r\n): Promise<GetReviewsResponse> => {\r\n  const params = new URLSearchParams();\r\n  \r\n  if (options.status) params.append('status', options.status);\r\n  if (options.limit) params.append('limit', options.limit.toString());\r\n  if (options.offset) params.append('offset', options.offset.toString());\r\n\r\n  const response = await fetch(`/api/tenant-reviews/${tenantSlug}?${params}`, {\r\n    method: 'GET',\r\n    headers: {\r\n      'Authorization': `Bearer ${localStorage.getItem('token') || ''}`,\r\n    },\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({})) as { message?: string };\r\n    throw new Error(errorData.message || `HTTP error! status: ${response.status}`);\r\n  }\r\n\r\n  return response.json() as Promise<GetReviewsResponse>;\r\n};\r\n\r\n/**\r\n * Get business data for a specific tenant (including GBP URL)\r\n */\r\nexport const getBusinessData = async (tenantSlug: string): Promise<GetBusinessResponse> => {\r\n  const response = await fetch(`/api/tenants/${tenantSlug}`, {\r\n    method: 'GET',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({})) as { error?: string };\r\n    throw new Error(errorData.error || `HTTP error! status: ${response.status}`);\r\n  }\r\n\r\n  return response.json() as Promise<GetBusinessResponse>;\r\n};\r\n\r\n/**\r\n * Scrape Google Business Profile or Google Maps for rating and review count\r\n */\r\nexport const scrapeGoogleBusinessProfile = async (\r\n  url: string,\r\n  tenantSlug?: string\r\n): Promise<{\r\n  success: boolean;\r\n  data?: {\r\n    averageRating: string | null;\r\n    totalReviews: string | null;\r\n    businessName: string | null;\r\n    gbpUrl: string;\r\n  };\r\n  message: string;\r\n}> => {\r\n  const response = await fetch('/api/tenant-reviews/scrape-google-business', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({\r\n      gbpUrl: url, // Backend still expects gbpUrl parameter name\r\n      tenantSlug,\r\n    }),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({})) as { message?: string };\r\n    throw new Error(errorData.message || `HTTP error! status: ${response.status}`);\r\n  }\r\n\r\n  return response.json() as Promise<{\r\n    success: boolean;\r\n    data?: {\r\n      averageRating: string | null;\r\n      totalReviews: string | null;\r\n      businessName: string | null;\r\n      gbpUrl: string;\r\n    };\r\n    message: string;\r\n  }>;\r\n};\r\n\r\n/**\r\n * Update review status (admin/tenant only)\r\n */\r\nexport const updateReviewStatus = async (\r\n  reviewId: number,\r\n  status: 'pending' | 'approved' | 'rejected'\r\n): Promise<{ success: boolean; data: TenantReview; message: string }> => {\r\n  const response = await fetch(`/api/tenant-reviews/${reviewId}/status`, {\r\n    method: 'PUT',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${localStorage.getItem('token') || ''}`,\r\n    },\r\n    body: JSON.stringify({ status }),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({})) as { message?: string };\r\n    throw new Error(errorData.message || `HTTP error! status: ${response.status}`);\r\n  }\r\n\r\n  return response.json() as Promise<{ success: boolean; data: TenantReview; message: string }>;\r\n};\r\n","import React, { useState } from 'react';\r\nimport { AlertCircle, Link, MessageSquare, Send, Star, Upload,User } from 'lucide-react';\r\n\r\nimport { createReview, type TenantReviewData,uploadAvatar } from '../../../api/reviewsApi';\r\n\r\ninterface ReviewFormData {\r\n  customerName: string;\r\n  reviewerUrl: string;\r\n  rating: number;\r\n  comment: string;\r\n  vehicleType: string;\r\n  paintCorrection: boolean;\r\n  ceramicCoating: boolean;\r\n  paintProtectionFilm: boolean;\r\n  source: 'website' | 'google' | 'yelp' | 'facebook';\r\n  avatarFile?: File;\r\n}\r\n\r\ninterface AddReviewFormProps {\r\n  tenantSlug?: string;\r\n}\r\n\r\nexport const AddReviewForm: React.FC<AddReviewFormProps> = ({ tenantSlug }) => {\r\n  const [formData, setFormData] = useState<ReviewFormData>({\r\n    customerName: '',\r\n    reviewerUrl: '',\r\n    rating: 0,\r\n    comment: '',\r\n    vehicleType: 'car',\r\n    paintCorrection: false,\r\n    ceramicCoating: false,\r\n    paintProtectionFilm: false,\r\n    source: 'website',\r\n  });\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [submitMessage, setSubmitMessage] = useState<{\r\n    type: 'success' | 'error';\r\n    message: string;\r\n  } | null>(null);\r\n\r\n  const vehicleTypes = [\r\n    { value: 'car', label: 'Car' },\r\n    { value: 'truck', label: 'Truck' },\r\n    { value: 'suv', label: 'SUV' },\r\n    { value: 'boat', label: 'Boat' },\r\n    { value: 'rv', label: 'RV' },\r\n    { value: 'motorcycle', label: 'Motorcycle' },\r\n  ];\r\n\r\n  const detectReviewSource = (url: string): 'website' | 'google' | 'yelp' | 'facebook' => {\r\n    if (!url) return 'website';\r\n    \r\n    const lowerUrl = url.toLowerCase();\r\n    \r\n    if (lowerUrl.includes('google.com') || lowerUrl.includes('maps.google') || lowerUrl.includes('google.com/maps')) {\r\n      return 'google';\r\n    }\r\n    if (lowerUrl.includes('yelp.com')) {\r\n      return 'yelp';\r\n    }\r\n    if (lowerUrl.includes('facebook.com') || lowerUrl.includes('fb.com')) {\r\n      return 'facebook';\r\n    }\r\n    \r\n    return 'website';\r\n  };\r\n\r\n  const handleInputChange = (\r\n    e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>\r\n  ) => {\r\n    const { name, value, type } = e.target;\r\n    \r\n    setFormData(prev => {\r\n      const newData = {\r\n        ...prev,\r\n        [name]: type === 'checkbox' ? (e.target as HTMLInputElement).checked : value,\r\n      };\r\n      \r\n      // Auto-detect review source when reviewer URL changes\r\n      if (name === 'reviewerUrl') {\r\n        newData.source = detectReviewSource(value);\r\n      }\r\n      \r\n      return newData;\r\n    });\r\n  };\r\n\r\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      // Validate file size (5MB limit)\r\n      if (file.size > 5 * 1024 * 1024) {\r\n        setSubmitMessage({\r\n          type: 'error',\r\n          message: 'Avatar file must be less than 5MB',\r\n        });\r\n        return;\r\n      }\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        avatarFile: file,\r\n      }));\r\n    }\r\n  };\r\n\r\n  const handleRatingClick = (rating: number) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      rating,\r\n    }));\r\n  };\r\n\r\n  const renderStars = (rating: number, interactive = false) => {\r\n    return Array.from({ length: 5 }, (_, index) => (\r\n      <button\r\n        key={index}\r\n        type=\"button\"\r\n        onClick={() => { if (interactive) handleRatingClick(index + 1); }}\r\n        disabled={!interactive}\r\n        className={`h-8 w-8 transition-colors ${\r\n          index < rating\r\n            ? 'text-yellow-400 fill-current'\r\n            : 'text-gray-300 hover:text-yellow-300'\r\n        } ${interactive ? 'cursor-pointer hover:scale-110' : 'cursor-default'}`}\r\n      >\r\n        <Star className=\"h-full w-full\" />\r\n      </button>\r\n    ));\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (formData.rating === 0) {\r\n      setSubmitMessage({\r\n        type: 'error',\r\n        message: 'Please select a rating',\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (!tenantSlug) {\r\n      setSubmitMessage({\r\n        type: 'error',\r\n        message: 'Tenant information is missing. Please refresh the page.',\r\n      });\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    setSubmitMessage(null);\r\n\r\n    try {\r\n      // Step 1: Create the review first (without avatar)\r\n      const reviewData: TenantReviewData = {\r\n        customer_name: formData.customerName,\r\n        rating: formData.rating,\r\n        comment: formData.comment,\r\n        reviewer_url: formData.reviewerUrl || undefined,\r\n        vehicle_type: formData.vehicleType as TenantReviewData['vehicle_type'],\r\n        paint_correction: formData.paintCorrection,\r\n        ceramic_coating: formData.ceramicCoating,\r\n        paint_protection_film: formData.paintProtectionFilm,\r\n        source: formData.source,\r\n        // Don't include avatar_filename yet - we'll upload the file first\r\n      };\r\n\r\n      const createResponse = await createReview(tenantSlug, reviewData);\r\n      const reviewId = createResponse.data.id;\r\n\r\n      // Step 2: Upload avatar if provided\r\n      if (formData.avatarFile && reviewId) {\r\n        try {\r\n          const _avatarResult = await uploadAvatar(formData.avatarFile, formData.customerName, reviewId);\r\n        } catch (avatarError) {\r\n          // Avatar upload failed, but review was created successfully\r\n          console.warn('Avatar upload failed:', avatarError);\r\n          // Don't fail the entire operation for avatar upload failure\r\n        }\r\n      }\r\n      \r\n      setSubmitMessage({\r\n        type: 'success',\r\n        message: 'Review published successfully!',\r\n      });\r\n      \r\n      // Reset form\r\n      setFormData({\r\n        customerName: '',\r\n        reviewerUrl: '',\r\n        rating: 0,\r\n        comment: '',\r\n        vehicleType: 'car',\r\n        paintCorrection: false,\r\n        ceramicCoating: false,\r\n        paintProtectionFilm: false,\r\n        source: 'website',\r\n      });\r\n    } catch (error) {\r\n      setSubmitMessage({\r\n        type: 'error',\r\n        message: error instanceof Error ? error.message : 'Failed to add review. Please try again.',\r\n      });\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const isFormValid = formData.customerName.trim() && \r\n                     formData.rating > 0 && \r\n                     formData.comment.trim();\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div>\r\n        <h3 className=\"text-lg font-semibold text-white\">Add New Review</h3>\r\n        <p className=\"text-gray-400 text-sm\">\r\n          Add a customer review to showcase your services\r\n        </p>\r\n      </div>\r\n\r\n      {/* Form */}\r\n      <div className=\"bg-stone-800 rounded-xl border border-stone-700 p-6\">\r\n        <form onSubmit={(e) => { e.preventDefault(); void handleSubmit(e); }} className=\"space-y-6\">\r\n          {/* Customer Information */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            <div>\r\n              <label htmlFor=\"customerName\" className=\"flex items-center text-sm font-medium text-white mb-2\">\r\n                <User className=\"h-4 w-4 mr-2\" />\r\n                Customer Name *\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"customerName\"\r\n                name=\"customerName\"\r\n                value={formData.customerName}\r\n                onChange={handleInputChange}\r\n                className=\"w-full px-4 py-3 bg-stone-700 border border-stone-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                placeholder=\"Enter customer name\"\r\n                required\r\n              />\r\n            </div>\r\n            \r\n            <div>\r\n              <label htmlFor=\"reviewerUrl\" className=\"flex items-center text-sm font-medium text-white mb-2\">\r\n                <Link className=\"h-4 w-4 mr-2\" />\r\n                Reviewer Profile URL\r\n              </label>\r\n              <input\r\n                type=\"url\"\r\n                id=\"reviewerUrl\"\r\n                name=\"reviewerUrl\"\r\n                value={formData.reviewerUrl}\r\n                onChange={handleInputChange}\r\n                className=\"w-full px-4 py-3 bg-stone-700 border border-stone-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                placeholder=\"e.g., https://www.google.com/maps/contrib/123456789\"\r\n              />\r\n              <p className=\"text-xs text-gray-400 mt-1\">\r\n                Link to reviewer&apos;s profile page (Google, Yelp, etc.)\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Vehicle Type */}\r\n          <div>\r\n            <label htmlFor=\"vehicleType\" className=\"block text-sm font-medium text-white mb-2\">\r\n              Vehicle Type\r\n            </label>\r\n            <select\r\n              id=\"vehicleType\"\r\n              name=\"vehicleType\"\r\n              value={formData.vehicleType}\r\n              onChange={handleInputChange}\r\n              className=\"w-1/4 px-3 py-2 bg-stone-700 border border-stone-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n            >\r\n              {vehicleTypes.map((type) => (\r\n                <option key={type.value} value={type.value}>\r\n                  {type.label}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          {/* Service Types */}\r\n          <div>\r\n            <div className=\"block text-sm font-medium text-white mb-3\">\r\n              Service Types\r\n            </div>\r\n            <div className=\"space-y-3\">\r\n              <div className=\"flex items-center\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  id=\"paintCorrection\"\r\n                  name=\"paintCorrection\"\r\n                  checked={formData.paintCorrection}\r\n                  onChange={handleInputChange}\r\n                  className=\"h-4 w-4 text-orange-500 bg-stone-700 border-stone-600 rounded focus:ring-orange-500 focus:ring-2\"\r\n                />\r\n                <label htmlFor=\"paintCorrection\" className=\"ml-2 text-sm text-white\">\r\n                  Paint Correction\r\n                </label>\r\n              </div>\r\n              \r\n              <div className=\"flex items-center\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  id=\"ceramicCoating\"\r\n                  name=\"ceramicCoating\"\r\n                  checked={formData.ceramicCoating}\r\n                  onChange={handleInputChange}\r\n                  className=\"h-4 w-4 text-orange-500 bg-stone-700 border-stone-600 rounded focus:ring-orange-500 focus:ring-2\"\r\n                />\r\n                <label htmlFor=\"ceramicCoating\" className=\"ml-2 text-sm text-white\">\r\n                  Ceramic Coating\r\n                </label>\r\n              </div>\r\n              \r\n              <div className=\"flex items-center\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  id=\"paintProtectionFilm\"\r\n                  name=\"paintProtectionFilm\"\r\n                  checked={formData.paintProtectionFilm}\r\n                  onChange={handleInputChange}\r\n                  className=\"h-4 w-4 text-orange-500 bg-stone-700 border-stone-600 rounded focus:ring-orange-500 focus:ring-2\"\r\n                />\r\n                <label htmlFor=\"paintProtectionFilm\" className=\"ml-2 text-sm text-white\">\r\n                  Paint Protection Film\r\n                </label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Review Source */}\r\n          <div>\r\n            <label htmlFor=\"source\" className=\"block text-sm font-medium text-white mb-2\">\r\n              Review Source\r\n              {formData.reviewerUrl && (\r\n                <span className=\"text-xs text-gray-400 ml-2\">(auto-detected)</span>\r\n              )}\r\n            </label>\r\n            <select\r\n              id=\"source\"\r\n              name=\"source\"\r\n              value={formData.source}\r\n              onChange={handleInputChange}\r\n              className=\"w-1/4 px-3 py-2 bg-stone-700 border border-stone-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n            >\r\n              <option value=\"website\">Website</option>\r\n              <option value=\"google\">Google</option>\r\n              <option value=\"yelp\">Yelp</option>\r\n              <option value=\"facebook\">Facebook</option>\r\n            </select>\r\n            {formData.reviewerUrl && (\r\n              <p className=\"text-xs text-gray-400 mt-1\">\r\n                Automatically detected from profile URL. You can change this manually if needed.\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          {/* Rating */}\r\n          <div>\r\n            <div className=\"block text-sm font-medium text-white mb-3\">\r\n              Rating *\r\n            </div>\r\n            <div className=\"flex items-center space-x-1\">\r\n              {renderStars(formData.rating, true)}\r\n              {formData.rating > 0 && (\r\n                <span className=\"ml-3 text-gray-300\">\r\n                  {formData.rating} out of 5 stars\r\n                </span>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Comment */}\r\n          <div>\r\n            <label htmlFor=\"comment\" className=\"flex items-center text-sm font-medium text-white mb-2\">\r\n              <MessageSquare className=\"h-4 w-4 mr-2\" />\r\n              Review Comment *\r\n            </label>\r\n            <textarea\r\n              id=\"comment\"\r\n              name=\"comment\"\r\n              value={formData.comment}\r\n              onChange={handleInputChange}\r\n              rows={4}\r\n              className=\"w-full px-4 py-3 bg-stone-700 border border-stone-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none\"\r\n              placeholder=\"Enter the customer's review comment...\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n\r\n          {/* Avatar Image Upload */}\r\n          <div>\r\n            <label htmlFor=\"avatarFile\" className=\"flex items-center text-sm font-medium text-white mb-2\">\r\n              <Upload className=\"h-4 w-4 mr-2\" />\r\n              Avatar Image (Optional)\r\n            </label>\r\n            <input\r\n              type=\"file\"\r\n              id=\"avatarFile\"\r\n              name=\"avatarFile\"\r\n              accept=\"image/*\"\r\n              onChange={handleFileChange}\r\n              className=\"w-full px-4 py-3 bg-stone-700 border border-stone-600 rounded-lg text-white file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-orange-600 file:text-white hover:file:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n            />\r\n            {formData.avatarFile && (\r\n              <div className=\"mt-2 text-sm text-gray-400\">\r\n                Selected: {formData.avatarFile.name} ({(formData.avatarFile.size / 1024 / 1024).toFixed(2)} MB)\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Submit Message */}\r\n          {submitMessage && (\r\n            <div className={`flex items-center space-x-2 p-4 rounded-lg ${\r\n              submitMessage.type === 'success'\r\n                ? 'bg-green-900/20 border border-green-700 text-green-400'\r\n                : 'bg-red-900/20 border border-red-700 text-red-400'\r\n            }`}>\r\n              <AlertCircle className=\"h-5 w-5\" />\r\n              <span>{submitMessage.message}</span>\r\n            </div>\r\n          )}\r\n\r\n          {/* Submit Button */}\r\n          <div className=\"flex justify-end\">\r\n            <button\r\n              type=\"submit\"\r\n              disabled={!isFormValid || isSubmitting}\r\n              className={`flex items-center space-x-2 px-6 py-3 rounded-lg font-medium transition-all duration-200 ${\r\n                isFormValid && !isSubmitting\r\n                  ? 'bg-orange-500 hover:bg-orange-600 text-white shadow-lg hover:shadow-xl'\r\n                  : 'bg-gray-600 text-gray-400 cursor-not-allowed'\r\n              }`}\r\n            >\r\n              <Send className=\"h-4 w-4\" />\r\n              <span>{isSubmitting ? 'Adding Review...' : 'Add Review'}</span>\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import { useEffect, useState } from 'react';\r\n\r\nimport { config } from '@/../config/env';\r\nimport type { WebsiteContentData } from '@/shared/api/websiteContent.api';\r\n\r\ninterface UseWebsiteContentDataReturn {\r\n  contentData: WebsiteContentData | null;\r\n  loading: boolean;\r\n  error: string | null;\r\n  updateContent: (data: Partial<WebsiteContentData>) => Promise<boolean>;\r\n  isUpdating: boolean;\r\n  refetch: () => Promise<void>;\r\n}\r\n\r\nexport const useWebsiteContentData = (tenantSlug?: string): UseWebsiteContentDataReturn => {\r\n  const [contentData, setContentData] = useState<WebsiteContentData | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [isUpdating, setIsUpdating] = useState(false);\r\n  const [refetchTrigger, setRefetchTrigger] = useState(0);\r\n\r\n  // Fetch website content data\r\n  useEffect(() => {\r\n    const fetchContentData = async () => {\r\n      if (!tenantSlug) {\r\n        setError('Tenant slug is required');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        const response = await fetch(`${config.apiUrl}/api/website-content/${tenantSlug}`);\r\n        \r\n        if (!response.ok) {\r\n          if (response.status === 404) {\r\n            throw new Error('Website content not found');\r\n          }\r\n          throw new Error(`Failed to fetch website content: ${response.statusText}`);\r\n        }\r\n\r\n        const result = await response.json() as { content?: WebsiteContentData };\r\n        const data = result.content;\r\n        \r\n        if (!data) {\r\n          throw new Error('No website content received');\r\n        }\r\n        \r\n        setContentData(data);\r\n      } catch (err) {\r\n        const errorMessage = err instanceof Error ? err.message : 'Failed to fetch website content';\r\n        setError(errorMessage);\r\n        console.error('Error fetching website content:', err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    void fetchContentData();\r\n  }, [tenantSlug, refetchTrigger]);\r\n\r\n  // Refetch function\r\n  const refetch = () => {\r\n    setRefetchTrigger(prev => prev + 1);\r\n    return Promise.resolve();\r\n  };\r\n\r\n  // Update website content data\r\n  const updateContent = async (data: Partial<WebsiteContentData>): Promise<boolean> => {\r\n    if (!tenantSlug) {\r\n      setError('Tenant slug is required');\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      setIsUpdating(true);\r\n      setError(null);\r\n\r\n      // Send the partial data to update\r\n      const response = await fetch(`${config.apiUrl}/api/website-content/${tenantSlug}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ ...contentData, ...data }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Failed to update website content: ${response.statusText}`);\r\n      }\r\n\r\n      const result = await response.json() as { content?: WebsiteContentData };\r\n      const updatedData = result.content;\r\n      \r\n      if (updatedData) {\r\n        setContentData(updatedData);\r\n      }\r\n      \r\n      return true;\r\n    } catch (err) {\r\n      const errorMessage = err instanceof Error ? err.message : 'Failed to update website content';\r\n      setError(errorMessage);\r\n      console.error('Error updating website content:', err);\r\n      return false;\r\n    } finally {\r\n      setIsUpdating(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    contentData,\r\n    loading,\r\n    error,\r\n    updateContent,\r\n    isUpdating,\r\n    refetch,\r\n  };\r\n};\r\n\r\n","import React, { createContext, useContext } from 'react';\r\n\r\nimport type { WebsiteContentData } from '@/shared/api/websiteContent.api';\r\n\r\nimport { useWebsiteContentData } from '../hooks/useWebsiteContentData';\r\n\r\ninterface WebsiteContentContextValue {\r\n  contentData: WebsiteContentData | null;\r\n  loading: boolean;\r\n  error: string | null;\r\n  updateContent: (data: Partial<WebsiteContentData>) => Promise<boolean>;\r\n  isUpdating: boolean;\r\n  refetch: () => Promise<void>;\r\n}\r\n\r\nconst WebsiteContentContext = createContext<WebsiteContentContextValue | undefined>(undefined);\r\n\r\ninterface WebsiteContentProviderProps {\r\n  tenantSlug: string;\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport const WebsiteContentProvider: React.FC<WebsiteContentProviderProps> = ({ \r\n  tenantSlug, \r\n  children \r\n}) => {\r\n  const value = useWebsiteContentData(tenantSlug);\r\n\r\n  return (\r\n    <WebsiteContentContext.Provider value={value}>\r\n      {children}\r\n    </WebsiteContentContext.Provider>\r\n  );\r\n};\r\n\r\n// eslint-disable-next-line react-refresh/only-export-components -- Hook is part of the provider pattern\r\nexport const useWebsiteContent = () => {\r\n  const context = useContext(WebsiteContentContext);\r\n  if (!context) {\r\n    throw new Error('useWebsiteContent must be used within WebsiteContentProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\n","import React from 'react';\r\nimport { AlertCircle, CheckCircle, Loader2 } from 'lucide-react';\r\n\r\nimport type { FAQItem } from '@/shared/api/websiteContent.api';\r\nimport { useAutoSave } from '@/shared/utils';\r\n\r\nimport { useWebsiteContent } from '../contexts/WebsiteContentContext';\r\n\r\ninterface FAQItemAutoSaveFieldProps {\r\n  faqIndex: number;\r\n  field: 'question' | 'answer';\r\n  label: string;\r\n  type?: 'text' | 'textarea';\r\n  placeholder?: string;\r\n  rows?: number;\r\n}\r\n\r\nexport const FAQItemAutoSaveField: React.FC<FAQItemAutoSaveFieldProps> = ({\r\n  faqIndex,\r\n  field,\r\n  label,\r\n  type = 'text',\r\n  placeholder,\r\n  rows = 3,\r\n}) => {\r\n  const { contentData, updateContent } = useWebsiteContent();\r\n  \r\n  const getInitialValue = (): string => {\r\n    if (!contentData?.faq_items) return '';\r\n    const faqItem = contentData.faq_items[faqIndex];\r\n    if (!faqItem) return '';\r\n    return faqItem[field] || '';\r\n  };\r\n\r\n  const saveField = async (value: string) => {\r\n    if (!contentData?.faq_items) return;\r\n    \r\n    const currentItem = contentData.faq_items[faqIndex];\r\n    if (!currentItem) return;\r\n    \r\n    // Create updated FAQ items array\r\n    const updatedFaqItems: FAQItem[] = [...contentData.faq_items];\r\n    updatedFaqItems[faqIndex] = {\r\n      ...currentItem,\r\n      [field]: value\r\n    };\r\n    \r\n    // Update the entire faq_items array\r\n    await updateContent({ faq_items: updatedFaqItems });\r\n  };\r\n\r\n  const { value, setValue, isSaving, error } = useAutoSave(\r\n    getInitialValue(),\r\n    saveField,\r\n    { debounce: 1000 }\r\n  );\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n    setValue(e.target.value);\r\n  };\r\n\r\n  const getStatusIcon = () => {\r\n    if (isSaving) {\r\n      return <Loader2 className=\"h-4 w-4 text-blue-500 animate-spin\" />;\r\n    }\r\n    if (error) {\r\n      return <AlertCircle className=\"h-4 w-4 text-red-500\" />;\r\n    }\r\n    if (value && value.trim() !== '') {\r\n      return <CheckCircle className=\"h-4 w-4 text-green-500\" />;\r\n    }\r\n    return null;\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      <label className=\"block text-xs font-medium text-gray-300 mb-1\">{label}</label>\r\n      <div className=\"relative\">\r\n        {type === 'textarea' ? (\r\n          <textarea\r\n            value={value}\r\n            onChange={handleChange}\r\n            placeholder={placeholder}\r\n            rows={rows}\r\n            className={`w-full px-3 py-2 pr-10 bg-stone-600 border rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none ${\r\n              error ? 'border-red-500' : 'border-stone-500'\r\n            }`}\r\n          />\r\n        ) : (\r\n          <input\r\n            type={type}\r\n            value={value}\r\n            onChange={handleChange}\r\n            placeholder={placeholder}\r\n            className={`w-full px-3 py-2 pr-10 bg-stone-600 border rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent ${\r\n              error ? 'border-red-500' : 'border-stone-500'\r\n            }`}\r\n          />\r\n        )}\r\n        <div className=\"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none\">\r\n          {getStatusIcon()}\r\n        </div>\r\n      </div>\r\n      {error && (\r\n        <p className=\"mt-1 text-xs text-red-400\">{error}</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n","import type { WebsiteContentData } from '@/shared/api/websiteContent.api';\r\nimport { useAutoSave } from '@/shared/utils';\r\n\r\nimport { useWebsiteContent } from '../contexts/WebsiteContentContext';\r\n\r\ntype WebsiteContentField = keyof WebsiteContentData;\r\n\r\ninterface UseWebsiteContentFieldOptions {\r\n  debounce?: number;\r\n  field: WebsiteContentField;\r\n}\r\n\r\nexport function useWebsiteContentField(options: UseWebsiteContentFieldOptions) {\r\n  const { debounce = 1000, field } = options;\r\n  const { updateContent, contentData } = useWebsiteContent();\r\n  \r\n  // Get the initial value for this field\r\n  const getInitialValue = (): string => {\r\n    if (!contentData) return '';\r\n    const value = contentData[field];\r\n    // Convert numbers to strings for the input field\r\n    if (typeof value === 'number') return String(value);\r\n    if (typeof value === 'string') return value;\r\n    return '';\r\n  };\r\n\r\n  const saveField = async (value: string) => {\r\n    if (!contentData) return;\r\n    \r\n    // Convert string back to appropriate type for saving\r\n    let saveValue: string | number = value;\r\n    if (field === 'reviews_avg_rating') {\r\n      saveValue = parseFloat(value) || 0;\r\n    } else if (field === 'reviews_total_count') {\r\n      saveValue = parseInt(value, 10) || 0;\r\n    }\r\n    \r\n    // Create a partial update object with just this field\r\n    const updateData = { [field]: saveValue };\r\n    \r\n    const success = await updateContent(updateData);\r\n    if (!success) {\r\n      throw new Error(`Failed to save ${field}`);\r\n    }\r\n  };\r\n\r\n  return useAutoSave(getInitialValue(), saveField, { debounce });\r\n}\r\n\r\n","import React from 'react';\r\nimport { AlertCircle, CheckCircle, Loader2 } from 'lucide-react';\r\n\r\nimport { useWebsiteContentField } from '../hooks/useWebsiteContentField';\r\n\r\ntype WebsiteContentField = \r\n  | 'hero_title'\r\n  | 'hero_subtitle'\r\n  | 'services_title'\r\n  | 'services_subtitle'\r\n  | 'services_auto_description'\r\n  | 'services_marine_description'\r\n  | 'services_rv_description'\r\n  | 'services_ceramic_description'\r\n  | 'services_correction_description'\r\n  | 'services_ppf_description'\r\n  | 'reviews_title'\r\n  | 'reviews_subtitle'\r\n  | 'reviews_avg_rating'\r\n  | 'reviews_total_count'\r\n  | 'faq_title'\r\n  | 'faq_subtitle';\r\n\r\ninterface WebsiteAutoSaveFieldProps {\r\n  field: WebsiteContentField;\r\n  label: string;\r\n  type?: 'text' | 'textarea' | 'number';\r\n  placeholder?: string;\r\n  className?: string;\r\n  debounce?: number;\r\n  rows?: number;\r\n  step?: string;\r\n}\r\n\r\nexport const WebsiteAutoSaveField: React.FC<WebsiteAutoSaveFieldProps> = ({\r\n  field,\r\n  label,\r\n  type = 'text',\r\n  placeholder,\r\n  className = '',\r\n  debounce = 1000,\r\n  rows = 3,\r\n  step,\r\n}) => {\r\n  const { value, setValue, isSaving, error } = useWebsiteContentField({ \r\n    field, \r\n    debounce \r\n  });\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n    setValue(e.target.value);\r\n  };\r\n\r\n  const getStatusIcon = () => {\r\n    if (isSaving) {\r\n      return <Loader2 className=\"h-4 w-4 text-blue-500 animate-spin\" />;\r\n    }\r\n    if (error) {\r\n      return <AlertCircle className=\"h-4 w-4 text-red-500\" />;\r\n    }\r\n    if (value && value.trim() !== '') {\r\n      return <CheckCircle className=\"h-4 w-4 text-green-500\" />;\r\n    }\r\n    return null;\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      <label className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n        {label}\r\n      </label>\r\n      <div className=\"relative\">\r\n        {type === 'textarea' ? (\r\n          <textarea\r\n            value={value}\r\n            onChange={handleChange}\r\n            placeholder={placeholder}\r\n            rows={rows}\r\n            className={`w-full px-3 py-2 pr-10 border rounded-md bg-stone-700 text-white focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none ${\r\n              error ? 'border-red-500' : 'border-stone-600'\r\n            } ${className}`}\r\n          />\r\n        ) : (\r\n          <input\r\n            type={type}\r\n            value={value}\r\n            onChange={handleChange}\r\n            placeholder={placeholder}\r\n            step={step}\r\n            className={`w-full px-3 py-2 pr-10 border rounded-md bg-stone-700 text-white focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent ${\r\n              error ? 'border-red-500' : 'border-stone-600'\r\n            } ${className}`}\r\n          />\r\n        )}\r\n        <div className=\"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none\">\r\n          {getStatusIcon()}\r\n        </div>\r\n      </div>\r\n      {error && (\r\n        <p className=\"mt-1 text-sm text-red-400\">{error}</p>\r\n      )}\r\n      {isSaving && (\r\n        <p className=\"mt-1 text-sm text-blue-400\">Saving...</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n","import React, { useMemo, useState } from 'react';\r\nimport { ChevronDown, ChevronRight, Eye, FileText, HelpCircle, Plus, Save, X } from 'lucide-react';\r\n\r\nimport { useData } from '@/shared/hooks';\r\nimport { loadIndustryFAQs } from '@/shared/utils/faqLoader';\r\n\r\nimport { FAQItemAutoSaveField } from './FAQItemAutoSaveField';\r\nimport { WebsiteAutoSaveField } from './WebsiteAutoSaveField';\r\n\r\ninterface FAQItem {\r\n  category: string;\r\n  question: string;\r\n  answer: string;\r\n}\r\n\r\ninterface FAQSectionProps {\r\n  faqContent?: FAQItem[];\r\n  onUpdateContent: (field: string, value: unknown) => void;\r\n  onResetToDefault: () => void;\r\n}\r\n\r\nexport const FAQSection: React.FC<FAQSectionProps> = ({\r\n  faqContent,\r\n  onUpdateContent,\r\n  onResetToDefault,\r\n}) => {\r\n  const [isCollapsed, setIsCollapsed] = useState(true);\r\n  const [activeTab, setActiveTab] = useState<'content' | 'categories'>('content');\r\n  const [activeCategory, setActiveCategory] = useState<string>('Services');\r\n\r\n  const faqCategories = [\r\n    'Services',\r\n    'Pricing', \r\n    'Scheduling',\r\n    'Locations',\r\n    'Preparation',\r\n    'Payments',\r\n    'Warranty',\r\n    'Aftercare',\r\n    'General'\r\n  ];\r\n\r\n  // Load industry-specific FAQs for template picker\r\n  const { industry } = useData();\r\n  const [industryFAQs, setIndustryFAQs] = React.useState<Array<{ question: string; answer: string; category: string }>>([]);\r\n  \r\n  React.useEffect(() => {\r\n    if (!industry) return;\r\n    loadIndustryFAQs(industry)\r\n      .then(setIndustryFAQs)\r\n      .catch(() => {\r\n        setIndustryFAQs([]);\r\n      });\r\n  }, [industry]);\r\n  \r\n  const _categoryFaqMap = useMemo(() => {\r\n    const map: Record<string, typeof industryFAQs> = {};\r\n    industryFAQs.forEach(faq => {\r\n      if (!map[faq.category]) {\r\n        map[faq.category] = [];\r\n      }\r\n      map[faq.category].push(faq);\r\n    });\r\n    return map;\r\n  }, [industryFAQs]);\r\n\r\n  const handleAddFAQ = () => {\r\n    const currentContent = faqContent || [];\r\n    const newContent = [...currentContent, { \r\n      question: `New ${activeCategory} question`, \r\n      answer: `New ${activeCategory} answer`, \r\n      category: activeCategory \r\n    }];\r\n    onUpdateContent('content', newContent);\r\n  };\r\n\r\n  const handleRemoveFAQ = (globalIndex: number) => {\r\n    const currentContent = faqContent || [];\r\n    const newContent = currentContent.filter((_item, i) => i !== globalIndex);\r\n    onUpdateContent('content', newContent);\r\n  };\r\n\r\n  const customFaqs = (faqContent || []).filter((faq) => faq.category === activeCategory);\r\n\r\n  return (\r\n    <div className=\"bg-stone-800 rounded-lg p-6 border border-stone-700\">\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <div className=\"flex items-center\">\r\n          <HelpCircle className=\"h-5 w-5 text-orange-400 mr-3\" />\r\n          <h3 className=\"text-lg font-semibold text-white\">FAQ</h3>\r\n        </div>\r\n        <div className=\"flex items-center space-x-2\">\r\n          <button\r\n            onClick={() => { /* Preview functionality */ }}\r\n            className=\"flex items-center px-3 py-1 text-sm text-gray-400 hover:text-white transition-colors\"\r\n          >\r\n            <Eye className=\"h-4 w-4 mr-1\" />\r\n            Preview\r\n          </button>\r\n          <button\r\n            onClick={onResetToDefault}\r\n            className=\"flex items-center px-3 py-1 text-sm text-gray-400 hover:text-white transition-colors\"\r\n          >\r\n            <Save className=\"h-4 w-4 mr-1\" />\r\n            Default\r\n          </button>\r\n          <button\r\n            onClick={() => { setIsCollapsed(!isCollapsed); }}\r\n            className=\"flex items-center px-3 py-1 text-sm text-gray-400 hover:text-white transition-colors\"\r\n          >\r\n            {isCollapsed ? (\r\n              <ChevronRight className=\"h-4 w-4 mr-1\" />\r\n            ) : (\r\n              <ChevronDown className=\"h-4 w-4 mr-1\" />\r\n            )}\r\n            {isCollapsed ? 'Expand' : 'Collapse'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {!isCollapsed && (\r\n        <div className=\"space-y-4\">\r\n          {/* FAQ Sub-tabs */}\r\n          <div className=\"flex space-x-1 bg-stone-800 rounded-lg p-1 mb-4\">\r\n            <button\r\n              onClick={() => { setActiveTab('content'); }}\r\n              className={`flex items-center px-4 py-2 rounded-md text-sm font-medium transition-colors ${\r\n                activeTab === 'content'\r\n                  ? 'bg-orange-500 text-white'\r\n                  : 'text-gray-400 hover:text-white hover:bg-stone-700'\r\n              }`}\r\n            >\r\n              <FileText className=\"h-4 w-4 mr-2\" />\r\n              Content\r\n            </button>\r\n            <button\r\n              onClick={() => { setActiveTab('categories'); }}\r\n              className={`flex items-center px-4 py-2 rounded-md text-sm font-medium transition-colors ${\r\n                activeTab === 'categories'\r\n                  ? 'bg-orange-500 text-white'\r\n                  : 'text-gray-400 hover:text-white hover:bg-stone-700'\r\n              }`}\r\n            >\r\n              <HelpCircle className=\"h-4 w-4 mr-2\" />\r\n              Categories\r\n            </button>\r\n          </div>\r\n\r\n          {/* FAQ Sub-tab Content */}\r\n          <div className=\"transition-all duration-300 ease-in-out\">\r\n            {activeTab === 'content' && (\r\n              <div className=\"space-y-4\">\r\n                <div className=\"w-2/5\">\r\n                  <WebsiteAutoSaveField\r\n                    field=\"faq_title\"\r\n                    label=\"FAQ Title\"\r\n                    placeholder=\"Enter FAQ title\"\r\n                  />\r\n                </div>\r\n                <div className=\"w-2/5\">\r\n                  <WebsiteAutoSaveField\r\n                    field=\"faq_subtitle\"\r\n                    label=\"FAQ Subtitle\"\r\n                    placeholder=\"Enter FAQ subtitle\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {activeTab === 'categories' && (\r\n              <div className=\"space-y-4\">\r\n                {/* FAQ Category Sub-tabs */}\r\n                <div className=\"flex flex-wrap gap-1 bg-stone-800 rounded-lg p-1 mb-4\">\r\n                  {faqCategories.map((category) => (\r\n                    <button\r\n                      key={category}\r\n                      onClick={() => { setActiveCategory(category); }}\r\n                      className={`flex items-center px-3 py-2 rounded-md text-xs font-medium transition-colors ${\r\n                        activeCategory === category\r\n                          ? 'bg-orange-500 text-white'\r\n                          : 'text-gray-400 hover:text-white hover:bg-stone-700'\r\n                      }`}\r\n                    >\r\n                      {category}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n                \r\n                {/* Category-specific FAQ Content */}\r\n                <div>\r\n                  <div className=\"flex items-center justify-between mb-4\">\r\n                    <div className=\"block text-sm font-medium text-gray-300\">\r\n                      {activeCategory} FAQs\r\n                    </div>\r\n                    <button\r\n                      onClick={handleAddFAQ}\r\n                      className=\"flex items-center px-3 py-1 bg-orange-500 text-white rounded text-xs hover:bg-orange-600 transition-colors\"\r\n                    >\r\n                      <Plus className=\"h-3 w-3 mr-1\" />\r\n                      Add {activeCategory} FAQ\r\n                    </button>\r\n                  </div>\r\n                  \r\n                  <div className=\"space-y-3\">\r\n                    {customFaqs.map((faq, categoryIndex) => {\r\n                      const currentContent = faqContent || [];\r\n                      const globalIndex = currentContent.findIndex((item) => item === faq);\r\n                      \r\n                      return (\r\n                        <div key={`${activeCategory}-${categoryIndex}`} className=\"rounded-lg p-4 bg-stone-700 border border-stone-600\">\r\n                          <div className=\"grid grid-cols-1 gap-3\">\r\n                            <FAQItemAutoSaveField\r\n                              faqIndex={globalIndex}\r\n                              field=\"question\"\r\n                              label=\"Question\"\r\n                              placeholder={`Enter ${activeCategory.toLowerCase()} question...`}\r\n                            />\r\n                            \r\n                            <FAQItemAutoSaveField\r\n                              faqIndex={globalIndex}\r\n                              field=\"answer\"\r\n                              label=\"Answer\"\r\n                              type=\"textarea\"\r\n                              rows={3}\r\n                              placeholder={`Enter ${activeCategory.toLowerCase()} answer...`}\r\n                            />\r\n                            <div className=\"flex justify-end\">\r\n                              <button\r\n                                onClick={() => { handleRemoveFAQ(globalIndex); }}\r\n                                className=\"flex items-center px-2 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700 transition-colors\"\r\n                              >\r\n                                <X className=\"h-3 w-3 mr-1\" />\r\n                                Remove\r\n                              </button>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      );\r\n                    })}\r\n                    \r\n                    {/* Show message if no FAQs in this category */}\r\n                    {customFaqs.length === 0 && (\r\n                      <div className=\"text-center py-8 text-gray-400\">\r\n                        <HelpCircle className=\"h-8 w-8 mx-auto mb-2 opacity-50\" />\r\n                        <p className=\"text-sm\">No {activeCategory} FAQs yet</p>\r\n                        <p className=\"text-xs mt-1\">Click &quot;Add {activeCategory} FAQ&quot; to get started</p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n","import React, { useState } from 'react';\r\nimport { ChevronDown, ChevronRight, Eye, Image, Plus } from 'lucide-react';\r\n\r\ninterface GalleryImage {\r\n  src: string;\r\n  alt: string;\r\n}\r\n\r\ninterface GallerySectionProps {\r\n  stockImages: GalleryImage[];\r\n  customImages: GalleryImage[];\r\n  onAddCustomImage: () => void;\r\n}\r\n\r\nexport const GallerySection: React.FC<GallerySectionProps> = ({\r\n  stockImages,\r\n  customImages,\r\n  onAddCustomImage,\r\n}) => {\r\n  const [isCollapsed, setIsCollapsed] = useState(true);\r\n  const [activeTab, setActiveTab] = useState<'stock' | 'custom'>('stock');\r\n\r\n  return (\r\n    <div className=\"bg-stone-800 rounded-lg p-6 border border-stone-700\">\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <div className=\"flex items-center\">\r\n          <Image className=\"h-5 w-5 text-orange-400 mr-3\" />\r\n          <h3 className=\"text-lg font-semibold text-white\">Gallery</h3>\r\n        </div>\r\n        <div className=\"flex items-center space-x-2\">\r\n          <button\r\n            onClick={() => { /* Preview functionality */ }}\r\n            className=\"flex items-center px-3 py-1 text-sm text-gray-400 hover:text-white transition-colors\"\r\n          >\r\n            <Eye className=\"h-4 w-4 mr-1\" />\r\n            Preview\r\n          </button>\r\n          <button\r\n            onClick={() => { setIsCollapsed(!isCollapsed); }}\r\n            className=\"flex items-center px-3 py-1 text-sm text-gray-400 hover:text-white transition-colors\"\r\n          >\r\n            {isCollapsed ? (\r\n              <ChevronRight className=\"h-4 w-4 mr-1\" />\r\n            ) : (\r\n              <ChevronDown className=\"h-4 w-4 mr-1\" />\r\n            )}\r\n            {isCollapsed ? 'Expand' : 'Collapse'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {!isCollapsed && (\r\n        <div className=\"space-y-4\">\r\n          {/* Gallery Sub-tabs */}\r\n          <div className=\"flex space-x-1 bg-stone-800 rounded-lg p-1 mb-4\">\r\n            <button\r\n              onClick={() => { setActiveTab('stock'); }}\r\n              className={`flex items-center px-4 py-2 rounded-md text-sm font-medium transition-colors ${\r\n                activeTab === 'stock'\r\n                  ? 'bg-orange-500 text-white'\r\n                  : 'text-gray-400 hover:text-white hover:bg-stone-700'\r\n              }`}\r\n            >\r\n              <Image className=\"h-4 w-4 mr-2\" />\r\n              Stock\r\n            </button>\r\n            <button\r\n              onClick={() => { setActiveTab('custom'); }}\r\n              className={`flex items-center px-4 py-2 rounded-md text-sm font-medium transition-colors ${\r\n                activeTab === 'custom'\r\n                  ? 'bg-orange-500 text-white'\r\n                  : 'text-gray-400 hover:text-white hover:bg-stone-700'\r\n              }`}\r\n            >\r\n              <Plus className=\"h-4 w-4 mr-2\" />\r\n              Custom\r\n            </button>\r\n          </div>\r\n\r\n          {/* Gallery Sub-tab Content */}\r\n          <div className=\"transition-all duration-300 ease-in-out\">\r\n            {activeTab === 'stock' && (\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <div className=\"block text-sm font-medium text-gray-300 mb-2\">Stock Gallery Images</div>\r\n                  <div className=\"grid grid-cols-4 gap-4 max-w-6xl\">\r\n                    {stockImages.map((imageItem, index) => (\r\n                      <div\r\n                        key={`stock-${index}`}\r\n                        className=\"relative cursor-pointer rounded-lg overflow-hidden border-2 border-stone-600 hover:border-stone-500 transition-all duration-200\"\r\n                      >\r\n                        <div className=\"aspect-square bg-stone-700 relative\">\r\n                          <img\r\n                            src={imageItem.src}\r\n                            alt={imageItem.alt}\r\n                            className=\"w-full h-full object-cover\"\r\n                            onError={(e) => {\r\n                              const target = e.target as HTMLImageElement;\r\n                              target.style.display = 'none';\r\n                              const fallback = document.createElement('div');\r\n                              fallback.className = 'w-full h-full flex items-center justify-center text-gray-400 text-sm';\r\n                              fallback.textContent = 'Image not found';\r\n                              target.parentNode?.appendChild(fallback);\r\n                            }}\r\n                          />\r\n                        </div>\r\n                        <div className=\"p-2 bg-stone-800\">\r\n                          <p className=\"text-xs text-gray-300 truncate\">\r\n                            {imageItem.alt}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                  <p className=\"text-xs text-gray-500 mt-2\">\r\n                    {stockImages.length} stock gallery images loaded from gallery.json\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {activeTab === 'custom' && (\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <div className=\"flex items-center justify-between mb-4\">\r\n                    <div className=\"block text-sm font-medium text-gray-300\">Custom Gallery Images</div>\r\n                    <button\r\n                      onClick={onAddCustomImage}\r\n                      className=\"flex items-center px-3 py-1 bg-orange-500 text-white rounded text-xs hover:bg-orange-600 transition-colors\"\r\n                    >\r\n                      <Plus className=\"h-3 w-3 mr-1\" />\r\n                      Add Custom Image\r\n                    </button>\r\n                  </div>\r\n                  \r\n                  <div className=\"grid grid-cols-4 gap-4 max-w-6xl\">\r\n                    {customImages.map((imageItem, index) => (\r\n                      <div\r\n                        key={index}\r\n                        className=\"relative cursor-pointer rounded-lg overflow-hidden border-2 border-stone-600 hover:border-stone-500 transition-all duration-200\"\r\n                      >\r\n                        <div className=\"aspect-square bg-stone-700 relative\">\r\n                          {imageItem.src ? (\r\n                            <img\r\n                              src={imageItem.src}\r\n                              alt={imageItem.alt || 'Custom gallery image'}\r\n                              className=\"w-full h-full object-cover\"\r\n                              onError={(e) => {\r\n                                const target = e.target as HTMLImageElement;\r\n                                target.style.display = 'none';\r\n                                const fallback = document.createElement('div');\r\n                                fallback.className = 'w-full h-full flex items-center justify-center text-gray-400 text-sm';\r\n                                fallback.textContent = 'Image not found';\r\n                                target.parentNode?.appendChild(fallback);\r\n                              }}\r\n                            />\r\n                          ) : (\r\n                            <div className=\"w-full h-full flex items-center justify-center text-gray-400 text-sm\">\r\n                              <div className=\"text-center\">\r\n                                <Plus className=\"h-8 w-8 mx-auto mb-2 opacity-50\" />\r\n                                <p>Add Image</p>\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                        <div className=\"p-2 bg-stone-800\">\r\n                          <p className=\"text-xs text-gray-300 truncate\">\r\n                            {imageItem.alt || 'Custom Image'}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                  \r\n                  {customImages.length === 0 && (\r\n                    <div className=\"text-center py-8 text-gray-400\">\r\n                      <Image className=\"h-8 w-8 mx-auto mb-2 opacity-50\" />\r\n                      <p className=\"text-sm\">No custom images yet</p>\r\n                      <p className=\"text-xs mt-1\">Click &quot;Add Custom Image&quot; to get started</p>\r\n                    </div>\r\n                  )}\r\n                  \r\n                  <p className=\"text-xs text-gray-500 mt-2\">\r\n                    {customImages.length} custom gallery images\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n","/**\r\n * API client for tenant dashboard health monitoring\r\n */\r\n\r\nexport interface HealthData {\r\n  tenantSlug: string;\r\n  hasData: boolean;\r\n  lastUpdated?: string;\r\n  performance?: {\r\n    mobile?: PerformanceData;\r\n    desktop?: PerformanceData;\r\n  };\r\n  overall?: {\r\n    score: number;\r\n    status: string;\r\n    checkedAt: string;\r\n    errorMessage?: string;\r\n  };\r\n  message?: string;\r\n}\r\n\r\nexport interface PerformanceData {\r\n  overallScore: number;\r\n  performanceScore: number;\r\n  accessibilityScore: number;\r\n  bestPracticesScore: number;\r\n  seoScore: number;\r\n  coreWebVitals: {\r\n    lcp: { value: number; score: number };\r\n    fid: { value: number; score: number };\r\n    cls: { value: number; score: number };\r\n    fcp: { value: number; score: number };\r\n    ttfb: { value: number; score: number };\r\n  };\r\n  metrics: {\r\n    speedIndex: { value: number; score: number };\r\n    interactive: { value: number; score: number };\r\n    totalBlockingTime: { value: number; score: number };\r\n  };\r\n  status: string;\r\n  checkedAt: string;\r\n  opportunities: OptimizationOpportunity[];\r\n  diagnostics: DiagnosticItem[];\r\n  cruxData?: Record<string, unknown>;\r\n}\r\n\r\nexport interface OptimizationOpportunity {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  savings: number;\r\n  savingsBytes: number;\r\n}\r\n\r\nexport interface DiagnosticItem {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  score: number;\r\n  displayValue?: string;\r\n}\r\n\r\nexport interface HealthHistoryItem {\r\n  check_type: string;\r\n  strategy: string;\r\n  overall_score: number;\r\n  performance_score: number;\r\n  accessibility_score: number;\r\n  best_practices_score: number;\r\n  seo_score: number;\r\n  status: string;\r\n  checked_at: string;\r\n}\r\n\r\nexport interface HealthHistoryResponse {\r\n  success: boolean;\r\n  data: {\r\n    tenantSlug: string;\r\n    history: HealthHistoryItem[];\r\n    period: string;\r\n    totalRecords: number;\r\n  };\r\n}\r\n\r\nexport interface HealthScanResponse {\r\n  success: boolean;\r\n  message: string;\r\n  data: {\r\n    tenantSlug: string;\r\n    url: string;\r\n    overallScore: number;\r\n    summary: {\r\n      status: string;\r\n      priority: string[];\r\n      recommendations: OptimizationOpportunity[];\r\n    };\r\n    timestamp: string;\r\n  };\r\n}\r\n\r\n/**\r\n * Get current health status for a tenant\r\n */\r\nexport const getHealthStatus = async (tenantSlug: string): Promise<{ success: boolean; data: HealthData }> => {\r\n  const response = await fetch(`/api/health-monitoring/${tenantSlug}`, {\r\n    method: 'GET',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({})) as { error?: string };\r\n    throw new Error(errorData.error || `HTTP error! status: ${response.status}`);\r\n  }\r\n\r\n  return response.json() as Promise<{ success: boolean; data: HealthData }>;\r\n};\r\n\r\n/**\r\n * Trigger a comprehensive health scan for a tenant\r\n */\r\nexport const triggerHealthScan = async (tenantSlug: string): Promise<HealthScanResponse> => {\r\n  const response = await fetch(`/api/health-monitoring/${tenantSlug}/scan`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({})) as { error?: string };\r\n    throw new Error(errorData.error || `HTTP error! status: ${response.status}`);\r\n  }\r\n\r\n  return response.json() as Promise<HealthScanResponse>;\r\n};\r\n\r\n/**\r\n * Get health monitoring history for a tenant\r\n */\r\nexport const getHealthHistory = async (\r\n  tenantSlug: string,\r\n  options: { days?: number; limit?: number } = {}\r\n): Promise<HealthHistoryResponse> => {\r\n  const params = new URLSearchParams();\r\n  \r\n  if (options.days) params.append('days', options.days.toString());\r\n  if (options.limit) params.append('limit', options.limit.toString());\r\n\r\n  const response = await fetch(`/api/health-monitoring/${tenantSlug}/history?${params}`, {\r\n    method: 'GET',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({})) as { error?: string };\r\n    throw new Error(errorData.error || `HTTP error! status: ${response.status}`);\r\n  }\r\n\r\n  return response.json() as Promise<HealthHistoryResponse>;\r\n};\r\n\r\n/**\r\n * Helper function to get score color based on value\r\n */\r\nexport const getScoreColor = (score: number): string => {\r\n  if (score >= 90) return 'text-green-500';\r\n  if (score >= 70) return 'text-yellow-500';\r\n  if (score >= 50) return 'text-orange-500';\r\n  return 'text-red-500';\r\n};\r\n\r\n/**\r\n * Helper function to get score background color\r\n */\r\nexport const getScoreBgColor = (score: number): string => {\r\n  if (score >= 90) return 'bg-green-500';\r\n  if (score >= 70) return 'bg-yellow-500';\r\n  if (score >= 50) return 'bg-orange-500';\r\n  return 'bg-red-500';\r\n};\r\n\r\n/**\r\n * Helper function to get status color\r\n */\r\nexport const getStatusColor = (status: string): string => {\r\n  switch (status) {\r\n    case 'healthy':\r\n      return 'text-green-500 bg-green-100';\r\n    case 'warning':\r\n      return 'text-yellow-600 bg-yellow-100';\r\n    case 'critical':\r\n      return 'text-red-600 bg-red-100';\r\n    case 'error':\r\n      return 'text-red-800 bg-red-200';\r\n    default:\r\n      return 'text-gray-600 bg-gray-100';\r\n  }\r\n};\r\n\r\n/**\r\n * Helper function to format display values\r\n */\r\nexport const formatDisplayValue = (value: number | string | null | undefined, unit: string = ''): string => {\r\n  if (value === null || value === undefined) return 'N/A';\r\n  \r\n  // Convert string to number if needed\r\n  const numericValue = typeof value === 'string' ? parseFloat(value) : value;\r\n  if (isNaN(numericValue)) return 'N/A';\r\n  \r\n  if (unit === 'ms') {\r\n    return `${Math.round(numericValue)}ms`;\r\n  } else if (unit === 's') {\r\n    return `${(numericValue / 1000).toFixed(2)}s`;\r\n  } else if (unit === 'bytes') {\r\n    if (numericValue > 1024 * 1024) {\r\n      return `${(numericValue / (1024 * 1024)).toFixed(1)}MB`;\r\n    } else if (numericValue > 1024) {\r\n      return `${(numericValue / 1024).toFixed(1)}KB`;\r\n    }\r\n    return `${numericValue}B`;\r\n  }\r\n  \r\n  return numericValue.toString();\r\n};\r\n","import React, { useCallback, useEffect,useState } from 'react';\r\nimport { AlertTriangle, CheckCircle, Clock,RefreshCw, XCircle } from 'lucide-react';\r\n\r\nimport { \r\n  formatDisplayValue,\r\n  getHealthStatus, \r\n  getScoreColor, \r\n  type HealthData,\r\n  type HealthScanResponse,\r\n  triggerHealthScan} from '../../../api/healthApi';\r\n\r\ninterface HealthTabProps {\r\n  tenantSlug?: string;\r\n}\r\n\r\nexport const HealthTab: React.FC<HealthTabProps> = ({ tenantSlug }) => {\r\n  const [healthData, setHealthData] = useState<HealthData | null>(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isScanning, setIsScanning] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [scanResult, setScanResult] = useState<HealthScanResponse['data'] | null>(null);\r\n\r\n  const loadHealthData = useCallback(async () => {\r\n    if (!tenantSlug) return;\r\n\r\n    setIsLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await getHealthStatus(tenantSlug);\r\n      setHealthData(response.data);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to load health data');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [tenantSlug]);\r\n\r\n  const handleScan = async () => {\r\n    if (!tenantSlug) return;\r\n\r\n    setIsScanning(true);\r\n    setError(null);\r\n    setScanResult(null);\r\n\r\n    try {\r\n      const response = await triggerHealthScan(tenantSlug);\r\n      setScanResult(response.data);\r\n      \r\n      // Reload health data after scan\r\n      setTimeout(() => {\r\n        void loadHealthData();\r\n      }, 1000);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to run health scan');\r\n    } finally {\r\n      setIsScanning(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    void loadHealthData();\r\n  }, [loadHealthData]);\r\n\r\n  const getStatusIcon = (status: string) => {\r\n    switch (status) {\r\n      case 'healthy':\r\n        return <CheckCircle className=\"h-4 w-4 text-green-500\" />;\r\n      case 'warning':\r\n        return <AlertTriangle className=\"h-4 w-4 text-yellow-500\" />;\r\n      case 'critical':\r\n      case 'error':\r\n        return <XCircle className=\"h-4 w-4 text-red-500\" />;\r\n      default:\r\n        return <Clock className=\"h-4 w-4 text-gray-500\" />;\r\n    }\r\n  };\r\n\r\n  const renderScoreRing = (score: number, size: string = 'w-16 h-16') => {\r\n    const radius = 28;\r\n    const circumference = 2 * Math.PI * radius;\r\n    const strokeDasharray = circumference;\r\n    const strokeDashoffset = circumference - score / 100 * circumference;\r\n    \r\n    return (\r\n      <div className={`${size} relative`}>\r\n        <svg className=\"w-full h-full transform -rotate-90\" viewBox=\"0 0 60 60\">\r\n          {/* Background circle */}\r\n          <circle\r\n            cx=\"30\"\r\n            cy=\"30\"\r\n            r={radius}\r\n            stroke=\"currentColor\"\r\n            strokeWidth=\"4\"\r\n            fill=\"none\"\r\n            className=\"text-gray-700\"\r\n          />\r\n          {/* Progress circle */}\r\n          <circle\r\n            cx=\"30\"\r\n            cy=\"30\"\r\n            r={radius}\r\n            stroke=\"currentColor\"\r\n            strokeWidth=\"4\"\r\n            fill=\"none\"\r\n            strokeDasharray={strokeDasharray}\r\n            strokeDashoffset={strokeDashoffset}\r\n            strokeLinecap=\"round\"\r\n            className={`transition-all duration-300 ${getScoreColor(score).replace('text-', '')}`}\r\n            style={{\r\n              stroke: score >= 90 ? '#10b981' : score >= 50 ? '#f59e0b' : '#ef4444'\r\n            }}\r\n          />\r\n        </svg>\r\n        {/* Score text in center */}\r\n        <div className=\"absolute inset-0 flex items-center justify-center\">\r\n          <span className={`text-sm font-bold ${getScoreColor(score)}`}>\r\n            {score}\r\n          </span>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderScoreCard = (title: string, score: number, _color?: string) => (\r\n    <div className=\"bg-stone-800 rounded-lg p-4\">\r\n      <div className=\"flex items-center gap-4\">\r\n        {renderScoreRing(score)}\r\n        <div className=\"flex-1\">\r\n          <h4 className=\"text-sm font-medium text-gray-300\">{title}</h4>\r\n          <div className=\"text-xs text-gray-500 mt-1\">\r\n            {score >= 90 ? 'Good' : score >= 50 ? 'Needs Improvement' : 'Poor'}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const renderCoreWebVitals = (data: {\r\n    lcp: { score: number; value: number };\r\n    fid: { score: number; value: number };\r\n    cls: { score: number; value: number | string };\r\n    fcp: { score: number; value: number };\r\n  }) => (\r\n    <div className=\"space-y-3\">\r\n      <h4 className=\"text-sm font-medium text-gray-300\">Core Web Vitals</h4>\r\n      <div className=\"grid grid-cols-2 gap-3\">\r\n        <div className=\"bg-stone-800 rounded-lg p-3\">\r\n          <div className=\"flex items-center gap-3\">\r\n            {renderScoreRing(Math.round(data.lcp.score * 100), 'w-12 h-12')}\r\n            <div className=\"flex-1\">\r\n              <div className=\"flex items-center justify-between mb-1\">\r\n                <span className=\"text-xs text-gray-400\">LCP</span>\r\n                <span className={`text-xs font-medium ${getScoreColor(data.lcp.score * 100)}`}>\r\n                  {formatDisplayValue(data.lcp.value, 'ms')}\r\n                </span>\r\n              </div>\r\n              <div className=\"text-xs text-gray-500\">Largest Contentful Paint</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"bg-stone-800 rounded-lg p-3\">\r\n          <div className=\"flex items-center gap-3\">\r\n            {renderScoreRing(Math.round(data.fid.score * 100), 'w-12 h-12')}\r\n            <div className=\"flex-1\">\r\n              <div className=\"flex items-center justify-between mb-1\">\r\n                <span className=\"text-xs text-gray-400\">FID</span>\r\n                <span className={`text-xs font-medium ${getScoreColor(data.fid.score * 100)}`}>\r\n                  {formatDisplayValue(data.fid.value, 'ms')}\r\n                </span>\r\n              </div>\r\n              <div className=\"text-xs text-gray-500\">First Input Delay</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"bg-stone-800 rounded-lg p-3\">\r\n          <div className=\"flex items-center gap-3\">\r\n            {renderScoreRing(Math.round(data.cls.score * 100), 'w-12 h-12')}\r\n            <div className=\"flex-1\">\r\n              <div className=\"flex items-center justify-between mb-1\">\r\n                <span className=\"text-xs text-gray-400\">CLS</span>\r\n                <span className={`text-xs font-medium ${getScoreColor(data.cls.score * 100)}`}>\r\n                  {data.cls.value ? (typeof data.cls.value === 'number' ? data.cls.value.toFixed(3) : parseFloat(data.cls.value).toFixed(3)) : 'N/A'}\r\n                </span>\r\n              </div>\r\n              <div className=\"text-xs text-gray-500\">Cumulative Layout Shift</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"bg-stone-800 rounded-lg p-3\">\r\n          <div className=\"flex items-center gap-3\">\r\n            {renderScoreRing(Math.round(data.fcp.score * 100), 'w-12 h-12')}\r\n            <div className=\"flex-1\">\r\n              <div className=\"flex items-center justify-between mb-1\">\r\n                <span className=\"text-xs text-gray-400\">FCP</span>\r\n                <span className={`text-xs font-medium ${getScoreColor(data.fcp.score * 100)}`}>\r\n                  {formatDisplayValue(data.fcp.value, 'ms')}\r\n                </span>\r\n              </div>\r\n              <div className=\"text-xs text-gray-500\">First Contentful Paint</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const renderOpportunities = (opportunities: Array<{ title: string; savings: number; description: string }>) => (\r\n    <div className=\"space-y-3\">\r\n      <h4 className=\"text-sm font-medium text-gray-300\">Top Optimization Opportunities</h4>\r\n      {opportunities.slice(0, 3).map((opp, index) => (\r\n        <div key={index} className=\"bg-stone-800 rounded-lg p-3\">\r\n          <div className=\"flex items-center justify-between mb-1\">\r\n            <h5 className=\"text-sm font-medium text-white\">{opp.title}</h5>\r\n            <span className=\"text-xs text-green-400\">\r\n              Save {formatDisplayValue(opp.savings, 'ms')}\r\n            </span>\r\n          </div>\r\n          <p className=\"text-xs text-gray-400\">{opp.description}</p>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n\r\n  if (!tenantSlug) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-64\">\r\n        <p className=\"text-gray-400\">No tenant selected</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h3 className=\"text-lg font-semibold text-white\">Website Health</h3>\r\n          <p className=\"text-sm text-gray-400\">Monitor your website&apos;s performance and Core Web Vitals</p>\r\n        </div>\r\n        <button\r\n          onClick={() => void handleScan()}\r\n          disabled={isScanning || isLoading}\r\n          className=\"px-4 py-2 bg-orange-600 hover:bg-orange-700 disabled:bg-orange-800 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors flex items-center gap-2\"\r\n        >\r\n          <RefreshCw className={`h-4 w-4 ${isScanning ? 'animate-spin' : ''}`} />\r\n          {isScanning ? 'Scanning...' : 'Run Health Scan'}\r\n        </button>\r\n      </div>\r\n\r\n      {/* Error Message */}\r\n      {error && (\r\n        <div className=\"bg-red-900 text-red-300 border border-red-700 rounded-lg p-4\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <XCircle className=\"h-4 w-4\" />\r\n            <span className=\"font-medium\">Error</span>\r\n          </div>\r\n          <p className=\"text-sm mt-1\">{error}</p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Scan Result */}\r\n      {scanResult && (\r\n        <div className=\"bg-green-900 text-green-300 border border-green-700 rounded-lg p-4\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <CheckCircle className=\"h-4 w-4\" />\r\n            <span className=\"font-medium\">Scan Completed</span>\r\n          </div>\r\n          <p className=\"text-sm mt-1\">\r\n            Overall Score: <span className=\"font-bold\">{scanResult.overallScore}</span>\r\n          </p>\r\n          {scanResult.summary.priority.length > 0 && (\r\n            <div className=\"mt-2\">\r\n              <p className=\"text-xs text-green-400\">Priority Issues:</p>\r\n              <ul className=\"text-xs mt-1 space-y-1\">\r\n                {scanResult.summary.priority.map((item, index) => (\r\n                  <li key={index}>• {item}</li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Loading State */}\r\n      {isLoading && !healthData && (\r\n        <div className=\"flex items-center justify-center h-64\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <RefreshCw className=\"h-5 w-5 animate-spin text-orange-500\" />\r\n            <span className=\"text-gray-400\">Loading health data...</span>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* No Data State */}\r\n      {!isLoading && healthData && !healthData.hasData && (\r\n        <div className=\"flex items-center justify-center h-64\">\r\n          <div className=\"text-center\">\r\n            <Clock className=\"h-12 w-12 text-gray-500 mx-auto mb-4\" />\r\n            <h4 className=\"text-lg font-medium text-white mb-2\">No Health Data</h4>\r\n            <p className=\"text-gray-400 mb-4\">{healthData.message}</p>\r\n            <button\r\n              onClick={() => void handleScan()}\r\n              className=\"px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg font-medium transition-colors\"\r\n            >\r\n              Run First Health Scan\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Health Data */}\r\n      {healthData && healthData.hasData && (\r\n        <div className=\"space-y-6\">\r\n          {/* Overall Status */}\r\n          {healthData.overall && (\r\n            <div className=\"bg-stone-800 rounded-lg p-6\">\r\n              <div className=\"flex items-center gap-6\">\r\n                {renderScoreRing(healthData.overall.score, 'w-20 h-20')}\r\n                <div className=\"flex-1\">\r\n                  <div className=\"flex items-center gap-2 mb-2\">\r\n                    {getStatusIcon(healthData.overall.status)}\r\n                    <span className=\"text-lg font-semibold text-white\">Overall Health</span>\r\n                  </div>\r\n                  <p className=\"text-sm text-gray-400 mb-2\">\r\n                    {healthData.overall.score >= 90 ? 'Excellent' : healthData.overall.score >= 50 ? 'Needs Improvement' : 'Poor'}\r\n                  </p>\r\n                  <p className=\"text-xs text-gray-500\">\r\n                    Last updated: {new Date(healthData.lastUpdated || '').toLocaleString()}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Performance Scores */}\r\n          {healthData.performance ? (\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n              {/* Mobile Performance */}\r\n              <div className=\"space-y-4\">\r\n                <h4 className=\"text-lg font-semibold text-white flex items-center gap-2\">\r\n                  📱 Mobile Performance\r\n                </h4>\r\n                \r\n                {healthData.performance.mobile ? (\r\n                  <>\r\n                    <div className=\"grid grid-cols-2 gap-3\">\r\n                      {renderScoreCard('Performance', healthData.performance.mobile.performanceScore || healthData.performance.mobile.overallScore || 0)}\r\n                      {renderScoreCard('Accessibility', healthData.performance.mobile.accessibilityScore || 0)}\r\n                      {renderScoreCard('Best Practices', healthData.performance.mobile.bestPracticesScore || 0)}\r\n                      {renderScoreCard('SEO', healthData.performance.mobile.seoScore || 0)}\r\n                    </div>\r\n\r\n                    {renderCoreWebVitals(healthData.performance.mobile.coreWebVitals)}\r\n                    \r\n                    {healthData.performance.mobile.opportunities.length > 0 && \r\n                      renderOpportunities(healthData.performance.mobile.opportunities)\r\n                    }\r\n                  </>\r\n                ) : (\r\n                  <div className=\"bg-stone-700 rounded-lg p-6 text-center\">\r\n                    <p className=\"text-gray-400\">No mobile performance data available</p>\r\n                    <p className=\"text-xs text-gray-500 mt-1\">Run a health scan to get mobile metrics</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Desktop Performance */}\r\n              <div className=\"space-y-4\">\r\n                <h4 className=\"text-lg font-semibold text-white flex items-center gap-2\">\r\n                  🖥️ Desktop Performance\r\n                </h4>\r\n                \r\n                {healthData.performance.desktop ? (\r\n                  <>\r\n                    <div className=\"grid grid-cols-2 gap-3\">\r\n                      {renderScoreCard('Performance', healthData.performance.desktop.performanceScore || healthData.performance.desktop.overallScore || 0)}\r\n                      {renderScoreCard('Accessibility', healthData.performance.desktop.accessibilityScore || 0)}\r\n                      {renderScoreCard('Best Practices', healthData.performance.desktop.bestPracticesScore || 0)}\r\n                      {renderScoreCard('SEO', healthData.performance.desktop.seoScore || 0)}\r\n                    </div>\r\n\r\n                    {renderCoreWebVitals(healthData.performance.desktop.coreWebVitals)}\r\n                    \r\n                    {healthData.performance.desktop.opportunities.length > 0 && \r\n                      renderOpportunities(healthData.performance.desktop.opportunities)\r\n                    }\r\n                  </>\r\n                ) : (\r\n                  <div className=\"bg-stone-700 rounded-lg p-6 text-center\">\r\n                    <p className=\"text-gray-400\">No desktop performance data available</p>\r\n                    <p className=\"text-xs text-gray-500 mt-1\">Run a health scan to get desktop metrics</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"bg-stone-800 rounded-lg p-8 text-center\">\r\n              <div className=\"text-gray-400 mb-4\">\r\n                <svg className=\"w-16 h-16 mx-auto mb-4 text-gray-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n                </svg>\r\n              </div>\r\n              <h3 className=\"text-lg font-semibold text-white mb-2\">No Performance Data</h3>\r\n              <p className=\"text-gray-400 mb-4\">Run a health scan to get detailed performance metrics for both mobile and desktop.</p>\r\n              <button\r\n                onClick={() => void handleScan()}\r\n                disabled={isScanning}\r\n                className=\"px-4 py-2 bg-orange-600 hover:bg-orange-700 disabled:bg-orange-800 disabled:cursor-not-allowed text-white rounded-lg text-sm font-medium transition-colors flex items-center gap-2 mx-auto\"\r\n              >\r\n                {isScanning ? (\r\n                  <>\r\n                    <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\r\n                    Scanning...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\r\n                    </svg>\r\n                    Run Health Scan\r\n                  </>\r\n                )}\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { Check, ChevronDown, ChevronRight, Eye, FileText, Image } from 'lucide-react';\r\n\r\nimport { WebsiteAutoSaveField } from './WebsiteAutoSaveField';\r\n\r\ninterface HeroSectionProps {\r\n  heroImages?: string[];\r\n  onUpdateContent: (field: string, value: unknown) => void;\r\n}\r\n\r\nexport const HeroSection: React.FC<HeroSectionProps> = ({\r\n  heroImages = [],\r\n  onUpdateContent,\r\n}) => {\r\n  const [isCollapsed, setIsCollapsed] = useState(true);\r\n  const [activeTab, setActiveTab] = useState<'content' | 'images'>('content');\r\n\r\n  const availableImages = [\r\n    { url: '/images/hero/hero1.png', alt: 'Professional mobile detailing service in action' },\r\n    { url: '/images/hero/hero2.png', alt: 'High-quality car detailing and ceramic coating' }\r\n  ];\r\n\r\n  const handleImageSelect = (imageUrl: string, isSelected: boolean) => {\r\n    let newImages;\r\n    if (isSelected) {\r\n      newImages = heroImages.filter(img => img !== imageUrl);\r\n    } else {\r\n      if (heroImages.length < 2) {\r\n        newImages = [...heroImages, imageUrl];\r\n      } else {\r\n        newImages = [imageUrl, heroImages[1]];\r\n      }\r\n    }\r\n    onUpdateContent('images', newImages);\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-stone-800 rounded-lg p-6 border border-stone-700\">\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <div className=\"flex items-center\">\r\n          <Image className=\"h-5 w-5 text-orange-400 mr-3\" />\r\n          <h3 className=\"text-lg font-semibold text-white\">Hero</h3>\r\n        </div>\r\n        <div className=\"flex items-center space-x-2\">\r\n          <button\r\n            onClick={() => { /* Preview functionality */ }}\r\n            className=\"flex items-center px-3 py-1 text-sm text-gray-400 hover:text-white transition-colors\"\r\n          >\r\n            <Eye className=\"h-4 w-4 mr-1\" />\r\n            Preview\r\n          </button>\r\n          <button\r\n            onClick={() => { setIsCollapsed(!isCollapsed); }}\r\n            className=\"flex items-center px-3 py-1 text-sm text-gray-400 hover:text-white transition-colors\"\r\n          >\r\n            {isCollapsed ? (\r\n              <ChevronRight className=\"h-4 w-4 mr-1\" />\r\n            ) : (\r\n              <ChevronDown className=\"h-4 w-4 mr-1\" />\r\n            )}\r\n            {isCollapsed ? 'Expand' : 'Collapse'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {!isCollapsed && (\r\n        <div className=\"space-y-4\">\r\n          {/* Hero Sub-tabs */}\r\n          <div className=\"flex space-x-1 bg-stone-800 rounded-lg p-1 mb-4\">\r\n            <button\r\n              onClick={() => { setActiveTab('content'); }}\r\n              className={`flex items-center px-4 py-2 rounded-md text-sm font-medium transition-colors ${\r\n                activeTab === 'content'\r\n                  ? 'bg-orange-500 text-white'\r\n                  : 'text-gray-400 hover:text-white hover:bg-stone-700'\r\n              }`}\r\n            >\r\n              <FileText className=\"h-4 w-4 mr-2\" />\r\n              Content\r\n            </button>\r\n            <button\r\n              onClick={() => { setActiveTab('images'); }}\r\n              className={`flex items-center px-4 py-2 rounded-md text-sm font-medium transition-colors ${\r\n                activeTab === 'images'\r\n                  ? 'bg-orange-500 text-white'\r\n                  : 'text-gray-400 hover:text-white hover:bg-stone-700'\r\n              }`}\r\n            >\r\n              <Image className=\"h-4 w-4 mr-2\" />\r\n              Images\r\n            </button>\r\n          </div>\r\n\r\n          {/* Hero Sub-tab Content */}\r\n          <div className=\"transition-all duration-300 ease-in-out\">\r\n            {activeTab === 'content' && (\r\n              <div className=\"space-y-4\">\r\n                <div className=\"w-2/5\">\r\n                  <WebsiteAutoSaveField\r\n                    field=\"hero_title\"\r\n                    label=\"Hero Title\"\r\n                    placeholder=\"Enter hero title\"\r\n                  />\r\n                </div>\r\n                <div className=\"w-2/5\">\r\n                  <WebsiteAutoSaveField\r\n                    field=\"hero_subtitle\"\r\n                    label=\"Hero Subtitle\"\r\n                    placeholder=\"Enter hero subtitle\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {activeTab === 'images' && (\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <div className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n                    Hero Images (Select up to 2 images)\r\n                  </div>\r\n                  <div className=\"grid grid-cols-2 gap-4 max-w-2xl\">\r\n                    {availableImages.map((image, index) => {\r\n                      const isSelected = heroImages.includes(image.url);\r\n                      return (\r\n                        <div\r\n                          key={index}\r\n                          role=\"button\"\r\n                          tabIndex={0}\r\n                          className={`relative cursor-pointer rounded-lg overflow-hidden border-2 transition-all duration-200 ${\r\n                            isSelected \r\n                              ? 'border-orange-500 ring-2 ring-orange-500/20' \r\n                              : 'border-stone-600 hover:border-stone-500'\r\n                          }`}\r\n                          onClick={() => { handleImageSelect(image.url, isSelected); }}\r\n                          onKeyDown={(e) => {\r\n                            if (e.key === 'Enter' || e.key === ' ') {\r\n                              e.preventDefault();\r\n                              handleImageSelect(image.url, isSelected);\r\n                            }\r\n                          }}\r\n                        >\r\n                          <div className=\"aspect-video bg-stone-700 relative\">\r\n                            <img\r\n                              src={image.url}\r\n                              alt={image.alt}\r\n                              className=\"w-full h-full object-cover\"\r\n                              onError={(e) => {\r\n                                const target = e.target as HTMLImageElement;\r\n                                target.style.display = 'none';\r\n                                const fallback = document.createElement('div');\r\n                                fallback.className = 'w-full h-full flex items-center justify-center text-gray-400 text-sm';\r\n                                fallback.textContent = 'Image not found';\r\n                                target.parentNode?.appendChild(fallback);\r\n                              }}\r\n                            />\r\n                            {isSelected && (\r\n                              <div className=\"absolute inset-0 bg-orange-500/20 flex items-center justify-center\">\r\n                                <div className=\"bg-orange-500 text-white rounded-full p-2\">\r\n                                  <Check className=\"h-5 w-5\" />\r\n                                </div>\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                  <p className=\"text-xs text-gray-500 mt-2\">\r\n                    These images will rotate as the hero background on your website homepage.\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n","import React, { useCallback, useEffect,useState } from 'react';\r\nimport { Car, ExternalLink, Star, Trash2, Truck, Wrench } from 'lucide-react';\r\n\r\nimport { deleteReview,getReviews } from '../../../api/reviewsApi';\r\n\r\ninterface Review {\r\n  id: number;\r\n  customer_name: string;\r\n  rating: number;\r\n  comment: string;\r\n  reviewer_url?: string;\r\n  vehicle_type?: 'car' | 'truck' | 'suv' | 'boat' | 'rv' | 'motorcycle';\r\n  paint_correction: boolean;\r\n  ceramic_coating: boolean;\r\n  paint_protection_film: boolean;\r\n  source: 'website' | 'google' | 'yelp' | 'facebook';\r\n  avatar_filename?: string;\r\n  created_at: string;\r\n}\r\n\r\ninterface RemoveReviewTabProps {\r\n  tenantSlug?: string;\r\n}\r\n\r\nexport const RemoveReviewTab: React.FC<RemoveReviewTabProps> = ({ tenantSlug }) => {\r\n  const [reviews, setReviews] = useState<Review[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [deletingId, setDeletingId] = useState<number | null>(null);\r\n\r\n  const loadReviews = useCallback(async () => {\r\n    if (!tenantSlug) return;\r\n    \r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      const response = await getReviews(tenantSlug);\r\n      setReviews(response.data);\r\n    } catch (err) {\r\n      setError('Failed to load reviews');\r\n      console.error('Error loading reviews:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [tenantSlug]);\r\n\r\n  useEffect(() => {\r\n    if (tenantSlug) {\r\n      void loadReviews();\r\n    }\r\n  }, [tenantSlug, loadReviews]);\r\n\r\n  const handleDeleteReview = async (reviewId: number) => {\r\n    if (!confirm('Are you sure you want to delete this review? This action cannot be undone.')) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setDeletingId(reviewId);\r\n      await deleteReview(reviewId);\r\n      \r\n      // Remove the review from the local state\r\n      setReviews(prev => prev.filter(review => review.id !== reviewId));\r\n      \r\n    } catch (err) {\r\n      console.error('Error deleting review:', err);\r\n      alert('Failed to delete review. Please try again.');\r\n    } finally {\r\n      setDeletingId(null);\r\n    }\r\n  };\r\n\r\n  const getVehicleIcon = (vehicleType?: string) => {\r\n    switch (vehicleType) {\r\n      case 'car': return <Car className=\"h-4 w-4\" />;\r\n      case 'truck': return <Truck className=\"h-4 w-4\" />;\r\n      default: return <Car className=\"h-4 w-4\" />;\r\n    }\r\n  };\r\n\r\n  const getServiceIcons = (review: Review) => {\r\n    const services = [];\r\n    if (review.paint_correction) services.push('Paint Correction');\r\n    if (review.ceramic_coating) services.push('Ceramic Coating');\r\n    if (review.paint_protection_film) services.push('Paint Protection Film');\r\n    return services.length > 0 ? services.join(', ') : 'No specific services';\r\n  };\r\n\r\n  const formatDate = (dateString: string) => {\r\n    return new Date(dateString).toLocaleDateString('en-US', {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const renderStars = (rating: number) => {\r\n    return Array.from({ length: 5 }, (_, i) => (\r\n      <Star\r\n        key={i}\r\n        className={`h-4 w-4 ${\r\n          i < rating ? 'text-yellow-400 fill-current' : 'text-gray-400'\r\n        }`}\r\n      />\r\n    ));\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-8\">\r\n        <div className=\"text-gray-400\">Loading reviews...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"text-center py-8\">\r\n        <div className=\"text-red-400 mb-4\">{error}</div>\r\n        <button\r\n          onClick={() => void loadReviews()}\r\n          className=\"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors\"\r\n        >\r\n          Try Again\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (reviews.length === 0) {\r\n    return (\r\n      <div className=\"text-center py-8\">\r\n        <div className=\"text-gray-400 mb-4\">No reviews found</div>\r\n        <div className=\"text-sm text-gray-500\">\r\n          Reviews will appear here once they are added.\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h3 className=\"text-lg font-semibold text-white\">\r\n          Manage Reviews ({reviews.length})\r\n        </h3>\r\n        <button\r\n          onClick={() => void loadReviews()}\r\n          className=\"px-3 py-1 text-sm bg-stone-700 text-white rounded-lg hover:bg-stone-600 transition-colors\"\r\n        >\r\n          Refresh\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"space-y-3\">\r\n        {reviews.map((review) => (\r\n          <div\r\n            key={review.id}\r\n            className=\"bg-stone-800 border border-stone-700 rounded-lg p-4\"\r\n          >\r\n            <div className=\"flex items-start justify-between\">\r\n              <div className=\"flex-1\">\r\n                {/* Header with customer name and rating */}\r\n                <div className=\"flex items-center gap-3 mb-2\">\r\n                  <div className=\"font-medium text-white\">{review.customer_name}</div>\r\n                  <div className=\"flex items-center gap-1\">\r\n                    {renderStars(review.rating)}\r\n                  </div>\r\n                  <div className=\"text-sm text-gray-400\">\r\n                    {formatDate(review.created_at)}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Review content */}\r\n                <div className=\"text-gray-300 mb-3\">\r\n                  {review.comment}\r\n                </div>\r\n\r\n                {/* Review details */}\r\n                <div className=\"flex flex-wrap gap-4 text-sm text-gray-400\">\r\n                  {/* Vehicle type */}\r\n                  {review.vehicle_type && (\r\n                    <div className=\"flex items-center gap-1\">\r\n                      {getVehicleIcon(review.vehicle_type)}\r\n                      <span className=\"capitalize\">{review.vehicle_type}</span>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Services */}\r\n                  <div className=\"flex items-center gap-1\">\r\n                    <Wrench className=\"h-4 w-4\" />\r\n                    <span>{getServiceIcons(review)}</span>\r\n                  </div>\r\n\r\n                  {/* Source */}\r\n                  <div className=\"flex items-center gap-1\">\r\n                    <span className=\"capitalize\">{review.source}</span>\r\n                  </div>\r\n\r\n                  {/* Reviewer URL */}\r\n                  {review.reviewer_url && (\r\n                    <a\r\n                      href={review.reviewer_url}\r\n                      target=\"_blank\"\r\n                      rel=\"noopener noreferrer\"\r\n                      className=\"flex items-center gap-1 text-orange-400 hover:text-orange-300\"\r\n                    >\r\n                      <ExternalLink className=\"h-4 w-4\" />\r\n                      Profile\r\n                    </a>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Delete button */}\r\n              <button\r\n                onClick={() => void handleDeleteReview(review.id)}\r\n                disabled={deletingId === review.id}\r\n                className=\"ml-4 p-2 text-red-400 hover:text-red-300 hover:bg-red-900/20 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                title=\"Delete review\"\r\n              >\r\n                {deletingId === review.id ? (\r\n                  <div className=\"animate-spin h-4 w-4 border-2 border-red-400 border-t-transparent rounded-full\" />\r\n                ) : (\r\n                  <Trash2 className=\"h-4 w-4\" />\r\n                )}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { RefreshCw } from 'lucide-react';\r\n\r\nimport { getBusinessData, scrapeGoogleBusinessProfile } from '../../../api/reviewsApi';\r\nimport { useWebsiteContent } from '../contexts/WebsiteContentContext';\r\nimport { WebsiteAutoSaveField } from './WebsiteAutoSaveField';\r\n\r\ninterface ReviewsContentProps {\r\n  tenantSlug: string;\r\n}\r\n\r\nexport const ReviewsContent: React.FC<ReviewsContentProps> = ({ \r\n  tenantSlug\r\n}) => {\r\n  const { updateContent, refetch } = useWebsiteContent();\r\n  const [isUpdating, setIsUpdating] = useState(false);\r\n  const [updateMessage, setUpdateMessage] = useState<{ type: 'success' | 'error'; message: string } | null>(null);\r\n\r\n  const handleUpdateBusinessData = async () => {\r\n    setIsUpdating(true);\r\n    setUpdateMessage(null);\r\n\r\n    try {\r\n      // First, get the business data to find the Google Maps URL\r\n      const businessResponse = await getBusinessData(tenantSlug);\r\n      \r\n      if (!businessResponse.success || !businessResponse.data.google_maps_url) {\r\n        setUpdateMessage({ \r\n          type: 'error', \r\n          message: 'No Google Maps URL found for this business' \r\n        });\r\n        return;\r\n      }\r\n\r\n      const googleMapsUrl = businessResponse.data.google_maps_url;\r\n      \r\n      // Now scrape the Google Business Profile using the Google Maps URL\r\n      const scrapeResponse = await scrapeGoogleBusinessProfile(googleMapsUrl, tenantSlug);\r\n      \r\n      if (scrapeResponse.success && scrapeResponse.data) {\r\n        const { averageRating, totalReviews, businessName } = scrapeResponse.data;\r\n        \r\n        // Update the fields immediately with the scraped data\r\n        const updates: Record<string, number> = {};\r\n        if (averageRating !== null) {\r\n          updates.reviews_avg_rating = parseFloat(averageRating);\r\n        }\r\n        if (totalReviews !== null) {\r\n          updates.reviews_total_count = parseInt(totalReviews, 10);\r\n        }\r\n        \r\n        if (Object.keys(updates).length > 0) {\r\n          await updateContent(updates);\r\n          // Refetch to update all field instances immediately\r\n          await refetch();\r\n        }\r\n        \r\n        // Show success message with the scraped values\r\n        const ratingText = averageRating ? `Rating: ${averageRating}` : '';\r\n        const reviewsText = totalReviews ? `Reviews: ${totalReviews}` : '';\r\n        const separator = ratingText && reviewsText ? ', ' : '';\r\n        const successMessage = `Successfully scraped ${businessName || 'business'}: ${ratingText}${separator}${reviewsText}`.trim();\r\n        \r\n        setUpdateMessage({ \r\n          type: 'success', \r\n          message: successMessage\r\n        });\r\n        \r\n        // Clear message after 8 seconds (longer for more complex message)\r\n        setTimeout(() => { setUpdateMessage(null); }, 8000);\r\n      } else {\r\n        setUpdateMessage({ \r\n          type: 'error', \r\n          message: 'Failed to scrape Google Maps data. Check server logs for details.' \r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Scraping error:', error);\r\n      setUpdateMessage({ \r\n        type: 'error', \r\n        message: error instanceof Error ? error.message : 'Failed to update business data. Check console for details.' \r\n      });\r\n    } finally {\r\n      setIsUpdating(false);\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Section Title */}\r\n      <WebsiteAutoSaveField\r\n        field=\"reviews_title\"\r\n        label=\"Section Title\"\r\n        placeholder=\"Enter reviews section title\"\r\n      />\r\n\r\n      {/* Section Description */}\r\n      <WebsiteAutoSaveField\r\n        field=\"reviews_subtitle\"\r\n        label=\"Section Description\"\r\n        type=\"textarea\"\r\n        rows={3}\r\n        placeholder=\"Enter reviews section description\"\r\n      />\r\n\r\n      {/* Average Review and Total Review Count - Side by Side */}\r\n      <div className=\"space-y-3\">\r\n        <div className=\"flex gap-4 items-end\">\r\n          {/* Average Review */}\r\n          <div className=\"w-32\">\r\n            <WebsiteAutoSaveField\r\n              field=\"reviews_avg_rating\"\r\n              label=\"Avg Rating\"\r\n              type=\"number\"\r\n              step=\"0.01\"\r\n              placeholder=\"4.90\"\r\n            />\r\n          </div>\r\n\r\n          {/* Total Review Count */}\r\n          <div className=\"w-32\">\r\n            <WebsiteAutoSaveField\r\n              field=\"reviews_total_count\"\r\n              label=\"Total\"\r\n              type=\"number\"\r\n              placeholder=\"0\"\r\n            />\r\n          </div>\r\n\r\n          {/* Update Button */}\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => void handleUpdateBusinessData()}\r\n            disabled={isUpdating}\r\n            className=\"px-3 py-2 bg-orange-600 hover:bg-orange-700 disabled:bg-orange-800 disabled:cursor-not-allowed text-white rounded text-sm font-medium transition-colors flex items-center gap-2 whitespace-nowrap\"\r\n            title=\"Scrape Google Maps URL for rating and review count\"\r\n          >\r\n            <RefreshCw className={`h-4 w-4 ${isUpdating ? 'animate-spin' : ''}`} />\r\n            {isUpdating ? 'Loading...' : 'Update from Google'}\r\n          </button>\r\n        </div>\r\n        \r\n        <div className=\"text-xs text-gray-400\">\r\n          <strong className=\"text-gray-300\">Note:</strong> You can manually edit these values or click &quot;Update from Google&quot; to fetch the latest ratings from your Google Business Profile.\r\n        </div>\r\n      </div>\r\n\r\n      {/* Update Message */}\r\n      {updateMessage && (\r\n        <div className={`text-sm p-3 rounded ${\r\n          updateMessage.type === 'success' \r\n            ? 'bg-green-900 text-green-300 border border-green-700' \r\n            : 'bg-red-900 text-red-300 border border-red-700'\r\n        }`}>\r\n          {updateMessage.message}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { ChevronDown, ChevronRight, Eye, FileText, Plus, Star } from 'lucide-react';\r\n\r\nimport { AddReviewForm } from './AddReviewForm';\r\nimport { RemoveReviewTab } from './RemoveReviewTab';\r\nimport { ReviewsContent } from './ReviewsContent';\r\n\r\ninterface ReviewsSectionProps {\r\n  tenantSlug: string;\r\n}\r\n\r\nexport const ReviewsSection: React.FC<ReviewsSectionProps> = ({ tenantSlug }) => {\r\n  const [isCollapsed, setIsCollapsed] = useState(true);\r\n  const [activeTab, setActiveTab] = useState<'content' | 'add-review' | 'remove-review'>('content');\r\n\r\n  return (\r\n    <div className=\"bg-stone-800 rounded-lg p-6 border border-stone-700\">\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <div className=\"flex items-center\">\r\n          <Star className=\"h-5 w-5 text-orange-400 mr-3\" />\r\n          <h3 className=\"text-lg font-semibold text-white\">Reviews</h3>\r\n        </div>\r\n        <div className=\"flex items-center space-x-2\">\r\n          <button\r\n            onClick={() => { /* Preview functionality */ }}\r\n            className=\"flex items-center px-3 py-1 text-sm text-gray-400 hover:text-white transition-colors\"\r\n          >\r\n            <Eye className=\"h-4 w-4 mr-1\" />\r\n            Preview\r\n          </button>\r\n          <button\r\n            onClick={() => { setIsCollapsed(!isCollapsed); }}\r\n            className=\"flex items-center px-3 py-1 text-sm text-gray-400 hover:text-white transition-colors\"\r\n          >\r\n            {isCollapsed ? (\r\n              <ChevronRight className=\"h-4 w-4 mr-1\" />\r\n            ) : (\r\n              <ChevronDown className=\"h-4 w-4 mr-1\" />\r\n            )}\r\n            {isCollapsed ? 'Expand' : 'Collapse'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {!isCollapsed && (\r\n        <div className=\"space-y-4\">\r\n          {/* Reviews Sub-tabs */}\r\n          <div className=\"flex space-x-1 bg-stone-800 rounded-lg p-1 mb-4\">\r\n            <button\r\n              onClick={() => { setActiveTab('content'); }}\r\n              className={`flex items-center px-4 py-2 rounded-md text-sm font-medium transition-colors ${\r\n                activeTab === 'content'\r\n                  ? 'bg-orange-500 text-white'\r\n                  : 'text-gray-400 hover:text-white hover:bg-stone-700'\r\n              }`}\r\n            >\r\n              <Star className=\"h-4 w-4 mr-2\" />\r\n              Content\r\n            </button>\r\n            <button\r\n              onClick={() => { setActiveTab('add-review'); }}\r\n              className={`flex items-center px-4 py-2 rounded-md text-sm font-medium transition-colors ${\r\n                activeTab === 'add-review'\r\n                  ? 'bg-orange-500 text-white'\r\n                  : 'text-gray-400 hover:text-white hover:bg-stone-700'\r\n              }`}\r\n            >\r\n              <Plus className=\"h-4 w-4 mr-2\" />\r\n              Add Review\r\n            </button>\r\n            <button\r\n              onClick={() => { setActiveTab('remove-review'); }}\r\n              className={`flex items-center px-4 py-2 rounded-md text-sm font-medium transition-colors ${\r\n                activeTab === 'remove-review'\r\n                  ? 'bg-orange-500 text-white'\r\n                  : 'text-gray-400 hover:text-white hover:bg-stone-700'\r\n              }`}\r\n            >\r\n              <FileText className=\"h-4 w-4 mr-2\" />\r\n              Remove Review\r\n            </button>\r\n          </div>\r\n\r\n          {/* Reviews Sub-tab Content */}\r\n          <div className=\"transition-all duration-300 ease-in-out\">\r\n            {activeTab === 'content' && (\r\n              <ReviewsContent tenantSlug={tenantSlug} />\r\n            )}\r\n            {activeTab === 'add-review' && (\r\n              <AddReviewForm tenantSlug={tenantSlug} />\r\n            )}\r\n            {activeTab === 'remove-review' && (\r\n              <RemoveReviewTab tenantSlug={tenantSlug} />\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n","import React, { useState } from 'react';\r\nimport { BarChart3, ChevronDown, ChevronRight, Eye } from 'lucide-react';\r\n\r\ninterface ServiceImage {\r\n  slug: string;\r\n  image: string;\r\n  alt: string;\r\n  title: string;\r\n}\r\n\r\ninterface ServicesSectionProps {\r\n  serviceImages?: ServiceImage[];\r\n}\r\n\r\nexport const ServicesSection: React.FC<ServicesSectionProps> = ({\r\n  serviceImages = [],\r\n}) => {\r\n  const [isCollapsed, setIsCollapsed] = useState(true);\r\n\r\n  return (\r\n    <div className=\"bg-stone-800 rounded-lg p-6 border border-stone-700\">\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <div className=\"flex items-center\">\r\n          <BarChart3 className=\"h-5 w-5 text-orange-400 mr-3\" />\r\n          <h3 className=\"text-lg font-semibold text-white\">Services</h3>\r\n        </div>\r\n        <div className=\"flex items-center space-x-2\">\r\n          <button\r\n            onClick={() => { /* Preview functionality */ }}\r\n            className=\"flex items-center px-3 py-1 text-sm text-gray-400 hover:text-white transition-colors\"\r\n          >\r\n            <Eye className=\"h-4 w-4 mr-1\" />\r\n            Preview\r\n          </button>\r\n          <button\r\n            onClick={() => { setIsCollapsed(!isCollapsed); }}\r\n            className=\"flex items-center px-3 py-1 text-sm text-gray-400 hover:text-white transition-colors\"\r\n          >\r\n            {isCollapsed ? (\r\n              <ChevronRight className=\"h-4 w-4 mr-1\" />\r\n            ) : (\r\n              <ChevronDown className=\"h-4 w-4 mr-1\" />\r\n            )}\r\n            {isCollapsed ? 'Expand' : 'Collapse'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {!isCollapsed && (\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <div className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n              Service Images (6 services)\r\n            </div>\r\n            <div className=\"grid grid-cols-3 gap-6 max-w-5xl\">\r\n              {serviceImages.map((service) => (\r\n                <div\r\n                  key={service.slug}\r\n                  className=\"relative cursor-pointer rounded-lg overflow-hidden border-2 border-stone-600 hover:border-stone-500 transition-all duration-200\"\r\n                >\r\n                  <div className=\"aspect-[4/3] bg-stone-700 relative\">\r\n                    <img\r\n                      src={service.image}\r\n                      alt={service.alt}\r\n                      className=\"w-full h-full object-cover\"\r\n                      onError={(e) => {\r\n                        const target = e.target as HTMLImageElement;\r\n                        target.style.display = 'none';\r\n                        const fallback = document.createElement('div');\r\n                        fallback.className = 'w-full h-full flex items-center justify-center text-gray-400 text-sm';\r\n                        fallback.textContent = 'Image not found';\r\n                        target.parentNode?.appendChild(fallback);\r\n                      }}\r\n                    />\r\n                  </div>\r\n                  <div className=\"p-4 bg-stone-800\">\r\n                    <p className=\"text-sm text-gray-300 font-medium text-center\">\r\n                      {service.title}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n            <p className=\"text-xs text-gray-500 mt-2\">\r\n              These 6 service images will be displayed in the services grid on your website.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n","import React, { useEffect, useMemo,useState } from 'react';\n\nimport { useData } from '@/shared/hooks';\nimport { loadIndustryFAQs } from '@/shared/utils/faqLoader';\nimport { useAutoSave } from '@/shared/utils/useAutoSave';\n\nimport { getWebsiteContent, saveWebsiteContent } from '../../api/websiteContentApi';\nimport {\n  FAQSection,\n  GallerySection,\n  HeroSection,\n  ReviewsSection,\n  ServicesSection\n} from './components';\nimport { WebsiteContentProvider } from './contexts/WebsiteContentContext';\n\n// Type definitions\ninterface GalleryImage {\n  src: string;\n  alt: string;\n}\n\ninterface ServiceImage {\n  slug: string;\n  image: string;\n  alt: string;\n  title: string;\n}\n\ninterface FAQItem {\n  category: string;\n  question: string;\n  answer: string;\n}\n\ninterface ContentData {\n  hero_title: string;\n  hero_subtitle: string;\n  services_title: string;\n  services_subtitle: string;\n  services_auto_description: string;\n  services_marine_description: string;\n  services_rv_description: string;\n  services_ceramic_description: string;\n  services_correction_description: string;\n  services_ppf_description: string;\n  reviews_title: string;\n  reviews_subtitle: string;\n  reviews_avg_rating: number;\n  reviews_total_count: number;\n  faq_title: string;\n  faq_subtitle: string;\n  faq_content: FAQItem[];\n  gallery_title?: string;\n  gallery_description?: string;\n  services?: {\n    images?: ServiceImage[];\n    [key: string]: unknown;\n  };\n  [key: string]: unknown;\n}\n\ninterface WebsiteContentTabProps {\n  tenantSlug?: string;\n}\n\nconst WebsiteContentTab: React.FC<WebsiteContentTabProps> = ({ tenantSlug }) => {\n  const [galleryImages, setGalleryImages] = useState<GalleryImage[]>([]);\n  const [customGalleryImages, setCustomGalleryImages] = useState<GalleryImage[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  // Load industry-specific FAQs\n  const { industry } = useData();\n  const [industryFAQs, setIndustryFAQs] = useState<Array<{ question: string; answer: string; category: string }>>([]);\n  \n  useEffect(() => {\n    if (!industry) return;\n    loadIndustryFAQs(industry)\n      .then(setIndustryFAQs)\n      .catch(() => {\n        setIndustryFAQs([]);\n      });\n  }, [industry]);\n  \n  // Group FAQs by category\n  const categoryFaqMap = useMemo(() => {\n    const map: Record<string, typeof industryFAQs> = {};\n    industryFAQs.forEach(faq => {\n      if (!map[faq.category]) {\n        map[faq.category] = [];\n      }\n      map[faq.category].push(faq);\n    });\n    return map;\n  }, [industryFAQs]);\n  \n  // Memoize initial content data to prevent infinite re-renders\n  const initialContentData = useMemo<ContentData>(() => ({\n    hero_title: '',\n    hero_subtitle: '',\n    services_title: '',\n    services_subtitle: '',\n    services_auto_description: '',\n    services_marine_description: '',\n    services_rv_description: '',\n    services_ceramic_description: '',\n    services_correction_description: '',\n    services_ppf_description: '',\n    reviews_title: '',\n    reviews_subtitle: '',\n    reviews_avg_rating: 0,\n    reviews_total_count: 0,\n    faq_title: '',\n    faq_subtitle: '',\n    faq_content: []\n  }), []);\n\n  // Create save function that uses tenant slug\n  const saveContentData = useMemo(() => {\n    return async (data: ContentData) => {\n      if (!tenantSlug) {\n        throw new Error('No tenant selected');\n      }\n\n      // Clean up FAQ content - remove empty FAQs\n      const cleanedFaqContent = data.faq_content.filter((faq: FAQItem) => \n        faq.question && faq.question.trim() !== '' && \n        faq.answer && faq.answer.trim() !== '' &&\n        faq.category && faq.category.trim() !== ''\n      );\n      \n      const cleanedData: ContentData = {\n        ...data,\n        faq_content: cleanedFaqContent\n      };\n\n      const result = await saveWebsiteContent(tenantSlug, cleanedData);\n      \n      return result;\n    };\n  }, [tenantSlug]);\n\n  // Use auto-save hook\n  const { value: contentData, setValue: setContentData } = useAutoSave(\n    initialContentData,\n    saveContentData,\n    { debounce: 1000 }\n  );\n\n  // Load initial data from API\n  useEffect(() => {\n    const loadContentData = async () => {\n      if (!tenantSlug) return;\n      \n      try {\n        setIsLoading(true);\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- getWebsiteContent returns WebsiteContentData which matches ContentData\n        const data = await getWebsiteContent(tenantSlug);\n        setContentData(data as ContentData);\n      } catch (error) {\n        console.error('Failed to load website content:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    void loadContentData();\n  }, [tenantSlug, setContentData]);\n\n  const updateContent = (section: string, field: string, value: unknown) => {\n    setContentData(prev => {\n      // For flat structure (hero, reviews, faq, gallery), use direct field mapping\n      if (section === 'hero') {\n        const fieldMap: { [key: string]: keyof ContentData } = {\n          'title': 'hero_title',\n          'subtitle': 'hero_subtitle'\n        };\n        const dbField = fieldMap[field];\n        if (dbField) {\n          return {\n            ...prev,\n            [dbField]: value\n          };\n        }\n      } else if (section === 'reviews') {\n        const fieldMap: { [key: string]: keyof ContentData } = {\n          'title': 'reviews_title',\n          'subtitle': 'reviews_subtitle',\n          'avg_rating': 'reviews_avg_rating',\n          'total_count': 'reviews_total_count'\n        };\n        const dbField = fieldMap[field];\n        if (dbField) {\n          return {\n            ...prev,\n            [dbField]: value\n          };\n        }\n      } else if (section === 'faq') {\n        const fieldMap: { [key: string]: keyof ContentData } = {\n          'title': 'faq_title',\n          'subtitle': 'faq_subtitle',\n          'content': 'faq_content'\n        };\n        const dbField = fieldMap[field];\n        if (dbField) {\n          return {\n            ...prev,\n            [dbField]: value\n          };\n        }\n      }\n      \n      // Fallback to old nested structure for other sections\n      const sectionKey = section as keyof ContentData;\n      const existingSection = prev[sectionKey];\n      const sectionValue = typeof existingSection === 'object' && existingSection !== null \n        ? { ...existingSection as Record<string, unknown>, [field]: value }\n        : { [field]: value };\n      \n      return {\n        ...prev,\n        [section]: sectionValue\n      } as ContentData;\n    });\n  };\n\n  const resetToDefault = () => {\n    // For FAQ section, load all default FAQs from utils\n    const defaultFaqs = Object.values(categoryFaqMap).flat().map((faq: FAQItem) => ({\n      category: faq.category,\n      question: faq.question,\n      answer: faq.answer\n    }));\n    \n    const updatedContentData: ContentData = {\n      ...contentData,\n      faq_content: defaultFaqs\n    };\n    \n    setContentData(updatedContentData);\n  };\n\n  // Function to load gallery images from gallery.json\n  const loadGalleryImages = async () => {\n    try {\n      const response = await fetch('/mobile-detailing/data/gallery.json');\n      const galleryData = (await response.json()) as GalleryImage[];\n      setGalleryImages(galleryData);\n    } catch {\n      setGalleryImages([]);\n    }\n  };\n\n  useEffect(() => {\n    void loadGalleryImages();\n  }, []);\n\n  const handleAddCustomImage = () => {\n    const newCustomImage = {\n      src: '',\n      alt: '',\n    };\n    setCustomGalleryImages(prev => [...prev, newCustomImage]);\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4\"></div>\n          <p className=\"text-gray-400\">Loading website content...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!tenantSlug) {\n    return <div className=\"text-red-500\">Error: No tenant slug provided</div>;\n  }\n\n  return (\n    <WebsiteContentProvider tenantSlug={tenantSlug}>\n      <div className=\"space-y-6\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-white\">Website Content</h2>\n            <p className=\"text-gray-400 mt-1\">Manage your website sections and content</p>\n          </div>\n        </div>\n\n      {/* Content Sections Grid - Single Column */}\n      <div className=\"grid grid-cols-1 gap-6\">\n          <HeroSection\n            heroTitle={contentData.hero_title || ''}\n            heroSubtitle={contentData.hero_subtitle || ''}\n            heroImages={(contentData.services?.images as string[] | undefined) || []}\n            onUpdateContent={(field, value) => { updateContent('hero', field, value); }}\n          />\n\n          <ServicesSection\n            serviceImages={contentData.services?.images || []}\n          />\n\n          <ReviewsSection tenantSlug={tenantSlug} />\n\n          <FAQSection\n            faqContent={contentData.faq_content}\n            onUpdateContent={(field, value) => { updateContent('faq', field, value); }}\n            onResetToDefault={resetToDefault}\n          />\n\n          <GallerySection\n            stockImages={galleryImages}\n            customImages={customGalleryImages}\n            onAddCustomImage={handleAddCustomImage}\n          />\n      </div>\n      </div>\n    </WebsiteContentProvider>\n  );\n};\n\nexport default WebsiteContentTab;\n","import React, { useState } from 'react';\r\nimport { AlertCircle, Check, Copy, ExternalLink, Globe, Settings, Shield, Zap } from 'lucide-react';\r\n\r\nconst WebsiteDomainTab: React.FC = () => {\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [copiedField, setCopiedField] = useState<string | null>(null);\r\n  \r\n  const [domainData, setDomainData] = useState({\r\n    primaryDomain: 'jpsmobiledetailing.com',\r\n    customDomain: '',\r\n    subdomain: 'jps',\r\n    sslStatus: 'active',\r\n    dnsStatus: 'configured',\r\n    lastChecked: '2024-01-15T10:30:00Z',\r\n    nameservers: [\r\n      'ns1.example.com',\r\n      'ns2.example.com'\r\n    ],\r\n    records: [\r\n      { type: 'A', name: '@', value: '192.168.1.1', ttl: 3600 },\r\n      { type: 'CNAME', name: 'www', value: 'jpsmobiledetailing.com', ttl: 3600 },\r\n      { type: 'MX', name: '@', value: 'mail.example.com', ttl: 3600 }\r\n    ]\r\n  });\r\n\r\n  const handleSave = () => {\r\n    // TODO: Implement save functionality\r\n    setIsEditing(false);\r\n  };\r\n\r\n  const handleCopy = (text: string, field: string) => {\r\n    void navigator.clipboard.writeText(text);\r\n    setCopiedField(field);\r\n    setTimeout(() => { setCopiedField(null); }, 2000);\r\n  };\r\n\r\n  const getStatusColor = (status: string) => {\r\n    switch (status) {\r\n      case 'active':\r\n      case 'configured':\r\n        return 'text-green-400 bg-green-900/20';\r\n      case 'pending':\r\n        return 'text-yellow-400 bg-yellow-900/20';\r\n      case 'error':\r\n        return 'text-red-400 bg-red-900/20';\r\n      default:\r\n        return 'text-gray-400 bg-gray-900/20';\r\n    }\r\n  };\r\n\r\n  const getStatusIcon = (status: string) => {\r\n    switch (status) {\r\n      case 'active':\r\n      case 'configured':\r\n        return <Check className=\"h-4 w-4\" />;\r\n      case 'pending':\r\n        return <Zap className=\"h-4 w-4\" />;\r\n      case 'error':\r\n        return <AlertCircle className=\"h-4 w-4\" />;\r\n      default:\r\n        return <Settings className=\"h-4 w-4\" />;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold text-white\">Domain Settings</h2>\r\n          <p className=\"text-gray-400 mt-1\">Manage your website domain and DNS configuration</p>\r\n        </div>\r\n        <div className=\"flex space-x-3\">\r\n          <button\r\n            onClick={() => { setIsEditing(!isEditing); }}\r\n            className=\"flex items-center px-4 py-2 bg-stone-700 text-white rounded-lg hover:bg-stone-600 transition-colors\"\r\n          >\r\n            <Settings className=\"h-4 w-4 mr-2\" />\r\n            {isEditing ? 'Cancel' : 'Edit'}\r\n          </button>\r\n          {isEditing && (\r\n            <button\r\n              onClick={handleSave}\r\n              className=\"flex items-center px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors\"\r\n            >\r\n              <Check className=\"h-4 w-4 mr-2\" />\r\n              Save\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Domain Status Overview */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n        <div className=\"bg-stone-800 rounded-lg p-6 border border-stone-700\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <div className=\"flex items-center\">\r\n              <Globe className=\"h-5 w-5 text-orange-400 mr-2\" />\r\n              <h3 className=\"text-lg font-semibold text-white\">Primary Domain</h3>\r\n            </div>\r\n            <div className={`flex items-center px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(domainData.sslStatus)}`}>\r\n              {getStatusIcon(domainData.sslStatus)}\r\n              <span className=\"ml-1 capitalize\">{domainData.sslStatus}</span>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex items-center justify-between\">\r\n            <span className=\"text-white font-mono\">{domainData.primaryDomain}</span>\r\n            <button\r\n              onClick={() => { handleCopy(domainData.primaryDomain, 'primary'); }}\r\n              className=\"flex items-center text-gray-400 hover:text-white transition-colors\"\r\n            >\r\n              {copiedField === 'primary' ? <Check className=\"h-4 w-4\" /> : <Copy className=\"h-4 w-4\" />}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"bg-stone-800 rounded-lg p-6 border border-stone-700\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <div className=\"flex items-center\">\r\n              <Shield className=\"h-5 w-5 text-orange-400 mr-2\" />\r\n              <h3 className=\"text-lg font-semibold text-white\">SSL Certificate</h3>\r\n            </div>\r\n            <div className={`flex items-center px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(domainData.sslStatus)}`}>\r\n              {getStatusIcon(domainData.sslStatus)}\r\n              <span className=\"ml-1 capitalize\">{domainData.sslStatus}</span>\r\n            </div>\r\n          </div>\r\n          <p className=\"text-gray-400 text-sm\">Valid until: Jan 15, 2025</p>\r\n        </div>\r\n\r\n        <div className=\"bg-stone-800 rounded-lg p-6 border border-stone-700\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <div className=\"flex items-center\">\r\n              <Settings className=\"h-5 w-5 text-orange-400 mr-2\" />\r\n              <h3 className=\"text-lg font-semibold text-white\">DNS Status</h3>\r\n            </div>\r\n            <div className={`flex items-center px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(domainData.dnsStatus)}`}>\r\n              {getStatusIcon(domainData.dnsStatus)}\r\n              <span className=\"ml-1 capitalize\">{domainData.dnsStatus}</span>\r\n            </div>\r\n          </div>\r\n          <p className=\"text-gray-400 text-sm\">Last checked: {new Date(domainData.lastChecked).toLocaleDateString()}</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Domain Configuration */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        {/* Primary Domain Settings */}\r\n        <div className=\"bg-stone-800 rounded-lg p-6 border border-stone-700\">\r\n          <div className=\"flex items-center mb-4\">\r\n            <Globe className=\"h-5 w-5 text-orange-400 mr-2\" />\r\n            <h3 className=\"text-lg font-semibold text-white\">Primary Domain</h3>\r\n          </div>\r\n          \r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <label htmlFor=\"domain-name-input\" className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n                Domain Name\r\n              </label>\r\n              {isEditing ? (\r\n                <input\r\n                  id=\"domain-name-input\"\r\n                  type=\"text\"\r\n                  value={domainData.primaryDomain}\r\n                  onChange={(e) => { setDomainData({ ...domainData, primaryDomain: e.target.value }); }}\r\n                  className=\"w-full px-3 py-2 bg-stone-700 border border-stone-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                />\r\n              ) : (\r\n                <div className=\"flex items-center justify-between\">\r\n                  <span className=\"text-white font-mono\">{domainData.primaryDomain}</span>\r\n                  <button\r\n                    onClick={() => { handleCopy(domainData.primaryDomain, 'primary'); }}\r\n                    className=\"flex items-center text-gray-400 hover:text-white transition-colors\"\r\n                  >\r\n                    {copiedField === 'primary' ? <Check className=\"h-4 w-4\" /> : <Copy className=\"h-4 w-4\" />}\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"subdomain-input\" className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n                Subdomain\r\n              </label>\r\n              {isEditing ? (\r\n                <input\r\n                  id=\"subdomain-input\"\r\n                  type=\"text\"\r\n                  value={domainData.subdomain}\r\n                  onChange={(e) => { setDomainData({ ...domainData, subdomain: e.target.value }); }}\r\n                  className=\"w-full px-3 py-2 bg-stone-700 border border-stone-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                />\r\n              ) : (\r\n                <div className=\"flex items-center justify-between\">\r\n                  <span className=\"text-white font-mono\">{domainData.subdomain}.yourdomain.com</span>\r\n                  <button\r\n                    onClick={() => { handleCopy(`${domainData.subdomain}.yourdomain.com`, 'subdomain'); }}\r\n                    className=\"flex items-center text-gray-400 hover:text-white transition-colors\"\r\n                  >\r\n                    {copiedField === 'subdomain' ? <Check className=\"h-4 w-4\" /> : <Copy className=\"h-4 w-4\" />}\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Custom Domain Settings */}\r\n        <div className=\"bg-stone-800 rounded-lg p-6 border border-stone-700\">\r\n          <div className=\"flex items-center mb-4\">\r\n            <ExternalLink className=\"h-5 w-5 text-orange-400 mr-2\" />\r\n            <h3 className=\"text-lg font-semibold text-white\">Custom Domain</h3>\r\n          </div>\r\n          \r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <label htmlFor=\"custom-domain-input\" className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n                Custom Domain (Optional)\r\n              </label>\r\n              {isEditing ? (\r\n                <input\r\n                  id=\"custom-domain-input\"\r\n                  type=\"text\"\r\n                  value={domainData.customDomain}\r\n                  onChange={(e) => { setDomainData({ ...domainData, customDomain: e.target.value }); }}\r\n                  placeholder=\"your-custom-domain.com\"\r\n                  className=\"w-full px-3 py-2 bg-stone-700 border border-stone-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                />\r\n              ) : (\r\n                <div className=\"flex items-center justify-between\">\r\n                  <span className=\"text-white font-mono\">\r\n                    {domainData.customDomain || 'No custom domain set'}\r\n                  </span>\r\n                  {domainData.customDomain && (\r\n                    <button\r\n                      onClick={() => { handleCopy(domainData.customDomain, 'custom'); }}\r\n                      className=\"flex items-center text-gray-400 hover:text-white transition-colors\"\r\n                    >\r\n                      {copiedField === 'custom' ? <Check className=\"h-4 w-4\" /> : <Copy className=\"h-4 w-4\" />}\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"text-sm text-gray-400\">\r\n              <p>To use a custom domain:</p>\r\n              <ul className=\"list-disc list-inside mt-2 space-y-1\">\r\n                <li>Purchase a domain from a registrar</li>\r\n                <li>Point your domain&apos;s DNS to our nameservers</li>\r\n                <li>Add your domain here once DNS is configured</li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* DNS Records */}\r\n      <div className=\"bg-stone-800 rounded-lg p-6 border border-stone-700\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <div className=\"flex items-center\">\r\n            <Settings className=\"h-5 w-5 text-orange-400 mr-2\" />\r\n            <h3 className=\"text-lg font-semibold text-white\">DNS Records</h3>\r\n          </div>\r\n          <button className=\"text-sm text-orange-400 hover:text-orange-300 transition-colors\">\r\n            Refresh DNS\r\n          </button>\r\n        </div>\r\n        \r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full\">\r\n            <thead>\r\n              <tr className=\"border-b border-stone-700\">\r\n                <th className=\"text-left py-3 px-4 text-sm font-medium text-gray-300\">Type</th>\r\n                <th className=\"text-left py-3 px-4 text-sm font-medium text-gray-300\">Name</th>\r\n                <th className=\"text-left py-3 px-4 text-sm font-medium text-gray-300\">Value</th>\r\n                <th className=\"text-left py-3 px-4 text-sm font-medium text-gray-300\">TTL</th>\r\n                <th className=\"text-left py-3 px-4 text-sm font-medium text-gray-300\">Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {domainData.records.map((record, index) => (\r\n                <tr key={index} className=\"border-b border-stone-700/50\">\r\n                  <td className=\"py-3 px-4 text-sm text-white font-mono\">{record.type}</td>\r\n                  <td className=\"py-3 px-4 text-sm text-white font-mono\">{record.name}</td>\r\n                  <td className=\"py-3 px-4 text-sm text-white font-mono\">{record.value}</td>\r\n                  <td className=\"py-3 px-4 text-sm text-gray-400\">{record.ttl}</td>\r\n                  <td className=\"py-3 px-4\">\r\n                    <button\r\n                      onClick={() => { handleCopy(record.value, `record-${index}`); }}\r\n                      className=\"flex items-center text-gray-400 hover:text-white transition-colors\"\r\n                    >\r\n                      {copiedField === `record-${index}` ? <Check className=\"h-4 w-4\" /> : <Copy className=\"h-4 w-4\" />}\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Quick Actions */}\r\n      <div className=\"bg-stone-800 rounded-lg p-6 border border-stone-700\">\r\n        <h3 className=\"text-lg font-semibold text-white mb-4\">Quick Actions</h3>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n          <button className=\"flex items-center justify-center px-4 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors\">\r\n            <Globe className=\"h-4 w-4 mr-2\" />\r\n            View Live Site\r\n          </button>\r\n          <button className=\"flex items-center justify-center px-4 py-3 bg-stone-700 text-white rounded-lg hover:bg-stone-600 transition-colors\">\r\n            <Settings className=\"h-4 w-4 mr-2\" />\r\n            DNS Settings\r\n          </button>\r\n          <button className=\"flex items-center justify-center px-4 py-3 bg-stone-700 text-white rounded-lg hover:bg-stone-600 transition-colors\">\r\n            <Shield className=\"h-4 w-4 mr-2\" />\r\n            SSL Certificate\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WebsiteDomainTab;\r\n","import React from 'react';\r\n\r\nimport { HealthTab } from './components';\r\n\r\ninterface WebsiteHealthTabProps {\r\n  tenantSlug?: string;\r\n}\r\n\r\nconst WebsiteHealthTab: React.FC<WebsiteHealthTabProps> = ({ tenantSlug }) => {\r\n  return <HealthTab tenantSlug={tenantSlug} />;\r\n};\r\n\r\nexport default WebsiteHealthTab;\r\n","import { useQuery } from '@tanstack/react-query';\r\n\r\nexport interface AnalyticsSummary {\r\n  totalSessions: number;\r\n  totalUsers: number;\r\n  totalPageViews: number;\r\n  averageBounceRate: number;\r\n  averageSessionDuration: number;\r\n  dailyData: Array<{\r\n    date: string;\r\n    sessions: number;\r\n    users: number;\r\n    pageViews: number;\r\n    bounceRate: number;\r\n    sessionDuration: number;\r\n  }>;\r\n  period: string;\r\n  lastUpdated: string;\r\n}\r\n\r\nexport interface RealtimeData {\r\n  activeUsers: number;\r\n  countries: Array<{\r\n    country: string;\r\n    users: number;\r\n  }>;\r\n  lastUpdated: string;\r\n}\r\n\r\nexport interface GoogleAnalyticsStatus {\r\n  connected: boolean;\r\n  propertyId?: string;\r\n  lastSync?: string;\r\n  scopes?: string[];\r\n}\r\n\r\n/**\r\n * Hook to fetch Google Analytics connection status\r\n */\r\nexport function useGoogleAnalyticsStatus(tenantId?: number) {\r\n  return useQuery<GoogleAnalyticsStatus>({\r\n    queryKey: ['analytics', 'status', tenantId],\r\n    queryFn: async () => {\r\n      const response = await fetch(`/api/google/analytics/status?tenant_id=${tenantId}`);\r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch analytics status');\r\n      }\r\n      const data = await response.json();\r\n      return data.data;\r\n    },\r\n    enabled: !!tenantId,\r\n    refetchInterval: 30000, // Refetch every 30 seconds\r\n  });\r\n}\r\n\r\n/**\r\n * Hook to fetch Google Analytics summary data\r\n */\r\nexport function useAnalyticsSummary(tenantId?: number, days: number = 7) {\r\n  return useQuery<AnalyticsSummary>({\r\n    queryKey: ['analytics', 'summary', tenantId, days],\r\n    queryFn: async () => {\r\n      const response = await fetch(`/api/google/analytics/summary?tenant_id=${tenantId}&days=${days}`);\r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch analytics summary');\r\n      }\r\n      const data = await response.json();\r\n      return data.data;\r\n    },\r\n    enabled: !!tenantId,\r\n    refetchInterval: 5 * 60 * 1000, // Refetch every 5 minutes\r\n  });\r\n}\r\n\r\n/**\r\n * Hook to fetch real-time analytics data\r\n */\r\nexport function useRealtimeData(tenantId?: number) {\r\n  return useQuery<RealtimeData>({\r\n    queryKey: ['analytics', 'realtime', tenantId],\r\n    queryFn: async () => {\r\n      const response = await fetch(`/api/google/analytics/realtime?tenant_id=${tenantId}`);\r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch realtime data');\r\n      }\r\n      const data = await response.json();\r\n      return data.data;\r\n    },\r\n    enabled: !!tenantId,\r\n    refetchInterval: 30 * 1000, // Refetch every 30 seconds\r\n  });\r\n}\r\n\r\n/**\r\n * Function to initiate Google Analytics OAuth flow\r\n */\r\nexport function initiateGoogleAnalyticsAuth(tenantId: number): void {\r\n  const authUrl = `/api/google/analytics/auth?tenant_id=${tenantId}`;\r\n  window.open(authUrl, '_blank', 'width=600,height=700');\r\n}\r\n","/**\r\n * Hook for resolving tenant ID from auth context or URL params\r\n * Handles both tenant users and admin users viewing other businesses\r\n */\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nimport { useAuth } from '@/shared/hooks';\r\n\r\n/**\r\n * Resolves the tenant ID for the current user/context\r\n * For tenant users: gets ID from auth context\r\n * For admin users: fetches ID from business slug in URL\r\n */\r\nexport function useTenantId(): string | undefined {\r\n  const authContext = useAuth();\r\n  const user = authContext.user;\r\n  const { businessSlug } = useParams<{ businessSlug: string }>();\r\n  const [adminTenantId, setAdminTenantId] = useState<string | null>(null);\r\n  \r\n  // Fetch tenant ID for admin users\r\n  useEffect(() => {\r\n    if (user?.role === 'admin' && businessSlug && !adminTenantId) {\r\n      const fetchTenantId = async () => {\r\n        try {\r\n          const response = await fetch(`/api/tenants/${businessSlug}`);\r\n          \r\n          if (response.ok) {\r\n            const data = await response.json() as {\r\n              success: boolean;\r\n              tenant?: {\r\n                id: number;\r\n              };\r\n            };\r\n            \r\n            if (data.success && data.tenant?.id) {\r\n              setAdminTenantId(data.tenant.id.toString());\r\n            }\r\n          }\r\n        } catch (err: unknown) {\r\n          console.error('Error fetching tenant ID:', err);\r\n        }\r\n      };\r\n      void fetchTenantId();\r\n    }\r\n  }, [user?.role, businessSlug, adminTenantId]);\r\n  \r\n  return user?.tenant_id?.toString() ?? adminTenantId ?? undefined;\r\n}\r\n\r\n","import React, { useState } from 'react';\r\nimport { BarChart3, Clock, Eye, Globe, Monitor, Smartphone, TrendingUp, Users, AlertCircle, RefreshCw } from 'lucide-react';\r\n\r\nimport { useAnalyticsSummary, useRealtimeData, useGoogleAnalyticsStatus, initiateGoogleAnalyticsAuth } from '../../api/analytics';\r\nimport { useTenantId } from '../services/hooks/useTenantId';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nconst WebsitePerformanceTab: React.FC = () => {\r\n  const [timeRange, setTimeRange] = useState<'7d' | '30d' | '90d'>('30d');\r\n  \r\n  // Get tenant ID and convert to number for API calls\r\n  const tenantIdString = useTenantId();\r\n  const tenantId = tenantIdString ? parseInt(tenantIdString) : undefined;\r\n  const { businessSlug } = useParams<{ businessSlug: string }>();\r\n  \r\n  // Convert time range to days for API\r\n  const days = timeRange === '7d' ? 7 : timeRange === '30d' ? 30 : 90;\r\n  \r\n  // Fetch real data\r\n  const { data: analyticsStatus, isLoading: statusLoading } = useGoogleAnalyticsStatus(tenantId);\r\n  const { data: analyticsData, isLoading: analyticsLoading, error: analyticsError } = useAnalyticsSummary(tenantId, days);\r\n  const { data: realtimeData, isLoading: realtimeLoading } = useRealtimeData(tenantId);\r\n  \r\n  const isLoading = statusLoading || analyticsLoading || realtimeLoading;\r\n\r\n  // Connection status component\r\n  const ConnectionStatus = () => {\r\n    if (!analyticsStatus) return null;\r\n    \r\n    if (!analyticsStatus.connected) {\r\n      return (\r\n        <div className=\"bg-stone-800 rounded-lg p-6 border border-stone-700\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center\">\r\n              <AlertCircle className=\"h-6 w-6 text-yellow-400 mr-3\" />\r\n              <div>\r\n                <h3 className=\"text-lg font-semibold text-white\">Google Analytics Not Connected</h3>\r\n                <p className=\"text-gray-400 mt-1\">Connect your Google Analytics account to view website performance data</p>\r\n              </div>\r\n            </div>\r\n            <button\r\n              onClick={() => tenantId && initiateGoogleAnalyticsAuth(tenantId)}\r\n              className=\"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors flex items-center\"\r\n            >\r\n              <BarChart3 className=\"h-4 w-4 mr-2\" />\r\n              Connect Analytics\r\n            </button>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    \r\n    return (\r\n      <div className=\"bg-stone-800 rounded-lg p-4 border border-stone-700\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center\">\r\n            <div className=\"h-3 w-3 bg-green-400 rounded-full mr-3\"></div>\r\n            <div>\r\n              <span className=\"text-white font-medium\">Google Analytics Connected</span>\r\n              <p className=\"text-gray-400 text-sm\">Last sync: {analyticsStatus.lastSync ? new Date(analyticsStatus.lastSync).toLocaleString() : 'Never'}</p>\r\n            </div>\r\n          </div>\r\n          <button\r\n            onClick={() => window.location.reload()}\r\n            className=\"p-2 text-gray-400 hover:text-white transition-colors\"\r\n            title=\"Refresh data\"\r\n          >\r\n            <RefreshCw className=\"h-4 w-4\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const StatCard = ({ \r\n    title, \r\n    value, \r\n    change, \r\n    trend, \r\n    icon: Icon \r\n  }: { \r\n    title: string; \r\n    value: string | number; \r\n    change: number; \r\n    trend: 'up' | 'down'; \r\n    icon: React.ComponentType<{ className?: string }>;\r\n  }) => (\r\n    <div className=\"bg-stone-800 rounded-lg p-6 border border-stone-700\">\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <div className=\"flex items-center\">\r\n          <Icon className=\"h-5 w-5 text-orange-400 mr-2\" />\r\n          <h3 className=\"text-sm font-medium text-gray-300\">{title}</h3>\r\n        </div>\r\n        {change !== 0 && (\r\n          <div className={`flex items-center text-sm ${\r\n            trend === 'up' ? 'text-green-400' : 'text-red-400'\r\n          }`}>\r\n            <TrendingUp className={`h-4 w-4 mr-1 ${\r\n              trend === 'down' ? 'rotate-180' : ''\r\n            }`} />\r\n            {Math.abs(change)}%\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div className=\"text-2xl font-bold text-white mb-1\">{value}</div>\r\n      {change !== 0 && (\r\n        <div className=\"text-xs text-gray-400\">\r\n          {trend === 'up' ? '↗' : '↘'} {change > 0 ? '+' : ''}{change}% from last period\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  // Helper function to format session duration\r\n  const formatSessionDuration = (seconds: number): string => {\r\n    const minutes = Math.floor(seconds / 60);\r\n    const remainingSeconds = Math.floor(seconds % 60);\r\n    return `${minutes}m ${remainingSeconds}s`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold text-white\">Website Performance</h2>\r\n          <p className=\"text-gray-400 mt-1\">Analytics and performance metrics for your website</p>\r\n        </div>\r\n        {analyticsStatus?.connected && (\r\n          <div className=\"flex space-x-2\">\r\n            {(['7d', '30d', '90d'] as const).map((range) => (\r\n              <button\r\n                key={range}\r\n                onClick={() => { setTimeRange(range); }}\r\n                className={`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${\r\n                  timeRange === range\r\n                    ? 'bg-orange-500 text-white'\r\n                    : 'bg-stone-700 text-gray-300 hover:bg-stone-600'\r\n                }`}\r\n              >\r\n                {range === '7d' ? '7 Days' : range === '30d' ? '30 Days' : '90 Days'}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Connection Status */}\r\n      <ConnectionStatus />\r\n\r\n      {/* Key Metrics */}\r\n      {analyticsStatus?.connected && (\r\n        <>\r\n          {isLoading ? (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n              {[...Array(4)].map((_, i) => (\r\n                <div key={i} className=\"bg-stone-800 rounded-lg p-6 border border-stone-700 animate-pulse\">\r\n                  <div className=\"h-4 bg-stone-700 rounded mb-4\"></div>\r\n                  <div className=\"h-8 bg-stone-700 rounded mb-2\"></div>\r\n                  <div className=\"h-3 bg-stone-700 rounded\"></div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : analyticsError ? (\r\n            <div className=\"bg-stone-800 rounded-lg p-6 border border-stone-700\">\r\n              <div className=\"flex items-center\">\r\n                <AlertCircle className=\"h-6 w-6 text-red-400 mr-3\" />\r\n                <div>\r\n                  <h3 className=\"text-lg font-semibold text-white\">Error Loading Analytics</h3>\r\n                  <p className=\"text-gray-400 mt-1\">Failed to fetch analytics data. Please try refreshing.</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : analyticsData ? (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n              <StatCard\r\n                title=\"Total Sessions\"\r\n                value={analyticsData.totalSessions.toLocaleString()}\r\n                change={0}\r\n                trend=\"up\"\r\n                icon={Users}\r\n              />\r\n              <StatCard\r\n                title=\"Total Users\"\r\n                value={analyticsData.totalUsers.toLocaleString()}\r\n                change={0}\r\n                trend=\"up\"\r\n                icon={Eye}\r\n              />\r\n              <StatCard\r\n                title=\"Bounce Rate\"\r\n                value={`${analyticsData.averageBounceRate.toFixed(1)}%`}\r\n                change={0}\r\n                trend=\"down\"\r\n                icon={BarChart3}\r\n              />\r\n              <StatCard\r\n                title=\"Avg. Session\"\r\n                value={formatSessionDuration(analyticsData.averageSessionDuration)}\r\n                change={0}\r\n                trend=\"up\"\r\n                icon={Clock}\r\n              />\r\n            </div>\r\n          ) : null}\r\n\r\n          {/* Real-time Data */}\r\n          {realtimeData && (\r\n            <div className=\"bg-stone-800 rounded-lg p-6 border border-stone-700\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <h3 className=\"text-lg font-semibold text-white\">Real-time Activity</h3>\r\n                <div className=\"flex items-center\">\r\n                  <div className=\"h-2 w-2 bg-green-400 rounded-full mr-2 animate-pulse\"></div>\r\n                  <span className=\"text-sm text-gray-400\">Live</span>\r\n                </div>\r\n              </div>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                <div className=\"text-center\">\r\n                  <div className=\"text-3xl font-bold text-white\">{realtimeData.activeUsers}</div>\r\n                  <div className=\"text-sm text-gray-400\">Active Users</div>\r\n                </div>\r\n                <div className=\"text-center\">\r\n                  <div className=\"text-3xl font-bold text-white\">{realtimeData.countries.length}</div>\r\n                  <div className=\"text-sm text-gray-400\">Countries</div>\r\n                </div>\r\n                <div className=\"text-center\">\r\n                  <div className=\"text-sm text-gray-400\">Last Updated</div>\r\n                  <div className=\"text-sm text-gray-300\">\r\n                    {new Date(realtimeData.lastUpdated).toLocaleTimeString()}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n\r\n      {/* Quick Actions */}\r\n      {analyticsStatus?.connected && (\r\n        <div className=\"bg-stone-800 rounded-lg p-6 border border-stone-700\">\r\n          <h3 className=\"text-lg font-semibold text-white mb-4\">Quick Actions</h3>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n            <button \r\n              onClick={() => window.open('https://analytics.google.com', '_blank')}\r\n              className=\"flex items-center justify-center px-4 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors\"\r\n            >\r\n              <BarChart3 className=\"h-4 w-4 mr-2\" />\r\n              View Full Analytics\r\n            </button>\r\n            <button \r\n              onClick={() => window.open(`https://${businessSlug}.thatsmartsite.com`, '_blank')}\r\n              className=\"flex items-center justify-center px-4 py-3 bg-stone-700 text-white rounded-lg hover:bg-stone-600 transition-colors\"\r\n            >\r\n              <Globe className=\"h-4 w-4 mr-2\" />\r\n              Open Website\r\n            </button>\r\n            <button \r\n              onClick={() => window.location.reload()}\r\n              className=\"flex items-center justify-center px-4 py-3 bg-stone-700 text-white rounded-lg hover:bg-stone-600 transition-colors\"\r\n            >\r\n              <RefreshCw className=\"h-4 w-4 mr-2\" />\r\n              Refresh Data\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WebsitePerformanceTab;\r\n","import React, { useState } from 'react';\r\nimport { BarChart3, FileText, Globe,Heart } from 'lucide-react';\r\n\r\nimport WebsiteContentTab from './WebsiteContentTab';\r\nimport WebsiteDomainTab from './WebsiteDomainTab';\r\nimport WebsiteHealthTab from './WebsiteHealthTab';\r\nimport WebsitePerformanceTab from './WebsitePerformanceTab';\r\n\r\ntype WebsiteSubTab = 'content' | 'performance' | 'health' | 'domain';\r\n\r\ninterface WebsiteTabProps {\r\n  tenantSlug?: string;\r\n}\r\n\r\nconst WebsiteTab: React.FC<WebsiteTabProps> = ({ tenantSlug }) => {\r\n  const [activeSubTab, setActiveSubTab] = useState<WebsiteSubTab>('content');\r\n\r\n  const subTabs = [\r\n    { id: 'content' as const, name: 'Content', icon: FileText },\r\n    { id: 'performance' as const, name: 'Performance', icon: BarChart3 },\r\n    { id: 'health' as const, name: 'Health', icon: Heart },\r\n    { id: 'domain' as const, name: 'Domain', icon: Globe },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Sub-tab Navigation */}\r\n      <div className=\"border-b border-stone-700\">\r\n        <nav className=\"flex space-x-8\">\r\n          {subTabs.map((tab) => {\r\n            const Icon = tab.icon;\r\n            return (\r\n              <button\r\n                key={tab.id}\r\n                onClick={() => { setActiveSubTab(tab.id); }}\r\n                className={`flex items-center px-1 py-4 text-sm font-medium border-b-2 transition-colors duration-200 ${\r\n                  activeSubTab === tab.id\r\n                    ? 'border-orange-500 text-orange-400'\r\n                    : 'border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-300'\r\n                }`}\r\n              >\r\n                <Icon className=\"h-4 w-4 mr-2\" />\r\n                {tab.name}\r\n              </button>\r\n            );\r\n          })}\r\n        </nav>\r\n      </div>\r\n\r\n      {/* Sub-tab Content */}\r\n      <div className=\"mt-6\">\r\n        {activeSubTab === 'content' && <WebsiteContentTab tenantSlug={tenantSlug} />}\r\n        {activeSubTab === 'performance' && <WebsitePerformanceTab />}\r\n        {activeSubTab === 'health' && <WebsiteHealthTab tenantSlug={tenantSlug} />}\r\n        {activeSubTab === 'domain' && <WebsiteDomainTab />}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WebsiteTab;\r\n","import React from 'react';\r\n\r\nimport type { DashboardTab, DetailerData } from '@/features/tenantDashboard/types';\r\n\r\nimport { getTabConfig } from '../config/tabConfig';\r\nimport CustomersTab from '../tabs/customers/CustomersTab';\r\nimport LocationsTab from '../tabs/locations/LocationsTab';\r\nimport OverviewTab from '../tabs/overview/OverviewTab';\r\nimport ProfileTab from '../tabs/profile/ProfileTab';\r\nimport ScheduleTab from '../tabs/schedule/ScheduleTab';\r\nimport ServicesTab from '../tabs/services/SimpleFixedServicesTab';\r\nimport WebsiteTab from '../tabs/website/WebsiteTab';\r\n\r\ninterface TabContentProps {\r\n  activeTab: DashboardTab;\r\n  detailerData: DetailerData;\r\n  onDataUpdate: (data: Partial<DetailerData>) => void;\r\n  tenantSlug?: string;\r\n}\r\n\r\nexport const TabContent: React.FC<TabContentProps> = ({ \r\n  activeTab, \r\n  detailerData, \r\n  onDataUpdate,\r\n  tenantSlug\r\n}) => {\r\n  // Get tab configuration for this tenant\r\n  const tabConfig = getTabConfig(tenantSlug);\r\n  \r\n  // Check if the current tab is enabled\r\n  const isTabEnabled = (tab: DashboardTab): boolean => {\r\n    switch (tab) {\r\n      case 'schedule':\r\n        return tabConfig.schedule;\r\n      case 'customers':\r\n        return tabConfig.customers;\r\n      case 'services':\r\n        return tabConfig.services;\r\n      case 'locations':\r\n        return tabConfig.locations;\r\n      case 'profile':\r\n        return tabConfig.profile;\r\n      case 'website':\r\n        return tabConfig.website;\r\n      case 'overview':\r\n        return true; // Overview is always enabled\r\n      default:\r\n        return true;\r\n    }\r\n  };\r\n\r\n  // If the current tab is disabled, show a message\r\n  if (!isTabEnabled(activeTab)) {\r\n    return (\r\n      <div className=\"transition-all duration-300 ease-in-out\">\r\n        <div className=\"bg-stone-800 rounded-lg p-8 text-center border border-stone-700\">\r\n          <div className=\"text-orange-400 text-6xl mb-4\">🔒</div>\r\n          <h3 className=\"text-xl font-semibold text-white mb-2\">Feature Not Available</h3>\r\n          <p className=\"text-gray-300 mb-4\">\r\n            This feature is not currently enabled for your account.\r\n          </p>\r\n          <p className=\"text-sm text-gray-400\">\r\n            Contact support to upgrade your plan and unlock this feature.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"transition-all duration-300 ease-in-out\">\r\n      {activeTab === 'overview' && <OverviewTab />}\r\n      {activeTab === 'website' && <WebsiteTab tenantSlug={tenantSlug} />}\r\n      {activeTab === 'locations' && <LocationsTab detailerData={detailerData} />}\r\n      {activeTab === 'profile' && (\r\n        <ProfileTab \r\n          detailerData={detailerData} \r\n          onDataUpdate={onDataUpdate} \r\n        />\r\n      )}\r\n      {activeTab === 'schedule' && <ScheduleTab />}\r\n      {activeTab === 'customers' && <CustomersTab />}\r\n      {activeTab === 'services' && <ServicesTab />}\r\n    </div>\r\n  );\r\n};\r\n","/**\r\n * Dashboard API Layer\r\n * Handles all dashboard-related API calls\r\n */\r\n\r\nexport interface DashboardData {\r\n  id: string;\r\n  slug: string;\r\n  business_name: string;\r\n  first_name: string;\r\n  last_name: string;\r\n  business_phone: string;\r\n  personal_phone: string;\r\n  business_email: string;\r\n  personal_email: string;\r\n  industry: string;\r\n  application_status: string;\r\n  business_start_date: string;\r\n  service_areas: ServiceArea[];\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface ServiceArea {\r\n  id?: string;\r\n  city: string;\r\n  state: string;\r\n  zip?: number;\r\n  primary: boolean;\r\n  minimum: number;\r\n  multiplier: number;\r\n}\r\n\r\nexport interface DashboardApiResponse {\r\n  success: boolean;\r\n  data: DashboardData;\r\n  error?: string;\r\n}\r\n\r\nexport const dashboardApi = {\r\n  /**\r\n   * Get dashboard data for a tenant\r\n   */\r\n  getDashboardData: async (slug: string): Promise<DashboardData> => {\r\n    try {\r\n      const response = await fetch(`/api/tenants/${slug}`, {\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        if (response.status === 404) {\r\n          throw new Error('Tenant not found');\r\n        }\r\n        throw new Error(`Failed to fetch dashboard data: ${response.status} ${response.statusText}`);\r\n      }\r\n      \r\n      const result = await response.json() as DashboardApiResponse;\r\n      \r\n      if (!result.success) {\r\n        throw new Error(result.error || 'Failed to fetch dashboard data');\r\n      }\r\n      \r\n      return result.data;\r\n    } catch (error) {\r\n      console.error('Dashboard API Error:', error);\r\n      throw new Error(`Failed to load dashboard data: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Update tenant information\r\n   */\r\n  updateTenantInfo: async (slug: string, data: Partial<DashboardData>): Promise<DashboardData> => {\r\n    try {\r\n      const response = await fetch(`/api/tenants/${slug}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(data),\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`Failed to update tenant info: ${response.status} ${response.statusText}`);\r\n      }\r\n      \r\n      const result = await response.json() as DashboardApiResponse;\r\n      \r\n      if (!result.success) {\r\n        throw new Error(result.error || 'Failed to update tenant info');\r\n      }\r\n      \r\n      return result.data;\r\n    } catch (error) {\r\n      console.error('Dashboard API Error:', error);\r\n      throw new Error(`Failed to update tenant info: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Get tenant health status\r\n   */\r\n  getTenantHealth: async (slug: string): Promise<{ status: string; lastChecked: string; issues: string[] }> => {\r\n    try {\r\n      const response = await fetch(`/api/tenants/${slug}/health`);\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`Failed to fetch tenant health: ${response.status} ${response.statusText}`);\r\n      }\r\n      \r\n      const result = await response.json() as { success: boolean; data: { status: string; lastChecked: string; issues: string[] } };\r\n      \r\n      if (!result.success) {\r\n        throw new Error('Failed to fetch tenant health');\r\n      }\r\n      \r\n      return result.data;\r\n    } catch (error) {\r\n      console.error('Dashboard API Error:', error);\r\n      throw new Error(`Failed to load tenant health: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n    }\r\n  }\r\n};\r\n","import React, { useEffect, useState } from 'react';\r\n\r\nimport type { DashboardTab, DetailerData } from '@/features/tenantDashboard/types';\r\nimport { useBrowserTab } from '@/shared/hooks';\r\nimport { useTenantSlug } from '@/shared/hooks/useTenantSlug';\r\n\r\nimport { dashboardApi } from '../api/dashboard.api';\r\nimport { DashboardHeader } from './DashboardHeader';\r\nimport { DashboardLayout } from './DashboardLayout';\r\nimport { DashboardTabs } from './DashboardTabs';\r\nimport { TabContent } from './TabContent';\r\n\r\nconst DashboardPage: React.FC = () => {\r\n  const slug = useTenantSlug();\r\n  const [activeTab, setActiveTab] = useState<DashboardTab>('overview');\r\n  const [detailerData, setDetailerData] = useState<DetailerData | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n\r\n\r\n  // Set browser tab title and favicon for tenant dashboard\r\n  useBrowserTab({\r\n    title: detailerData?.businessName \r\n      ? `${detailerData.businessName} - Dashboard`\r\n      : 'Dashboard - That Smart Site',\r\n  });\r\n\r\n  // Fetch tenant data based on business slug\r\n  useEffect(() => {\r\n    const fetchTenantData = async () => {\r\n      if (!slug) {\r\n        setError('No business slug provided');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        setLoading(true);\r\n        const tenant = await dashboardApi.getDashboardData(slug);\r\n        \r\n        // Transform tenant data to DetailerData format\r\n        const transformedData: DetailerData = {\r\n          business_name: tenant.business_name || 'Unknown Business',\r\n          first_name: tenant.first_name || 'Unknown',\r\n          last_name: tenant.last_name || 'Unknown',\r\n          email: tenant.business_email || tenant.personal_email || 'No email',\r\n          phone: tenant.business_phone || tenant.personal_phone || 'No phone',\r\n          location: tenant.service_areas.length > 0 \r\n            ? `${tenant.service_areas[0]?.city ?? ''}, ${tenant.service_areas[0]?.state ?? ''}` \r\n            : 'No location',\r\n          services: tenant.service_areas.length > 0 \r\n            ? tenant.service_areas.map((area: { city: string }) => area.city).slice(0, 4)\r\n            : ['Mobile Detailing'],\r\n          memberSince: tenant.created_at ? new Date(tenant.created_at).getFullYear().toString() : 'Unknown'\r\n        };\r\n        setDetailerData(transformedData);\r\n      } catch (error) {\r\n        setError(error instanceof Error ? error.message : 'Failed to fetch business data');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    void fetchTenantData();\r\n  }, [slug]);\r\n\r\n  const handleDataUpdate = (data: Partial<DetailerData>) => {\r\n    if (detailerData) {\r\n      setDetailerData({ ...detailerData, ...data });\r\n    }\r\n  };\r\n\r\n  const handleBackToForm = () => {\r\n    // Navigate back to main site or form\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <DashboardLayout>\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n          <div className=\"text-center\">\r\n            <p className=\"text-lg text-gray-600\">Loading business dashboard...</p>\r\n          </div>\r\n        </div>\r\n      </DashboardLayout>\r\n    );\r\n  }\r\n\r\n  if (error || !detailerData) {\r\n    return (\r\n      <DashboardLayout>\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n          <div className=\"text-center\">\r\n            <p className=\"text-lg text-red-600\">Error: {error || 'Failed to load business data'}</p>\r\n          </div>\r\n        </div>\r\n      </DashboardLayout>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <DashboardLayout>\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n        <DashboardHeader \r\n          detailerData={detailerData}\r\n          onBackToForm={handleBackToForm}\r\n        />\r\n        \r\n        <DashboardTabs \r\n          activeTab={activeTab}\r\n          onTabChange={setActiveTab}\r\n          tenantSlug={slug}\r\n        />\r\n        \r\n        <TabContent \r\n          activeTab={activeTab}\r\n          detailerData={detailerData}\r\n          onDataUpdate={handleDataUpdate}\r\n          tenantSlug={slug}\r\n        />\r\n      </div>\r\n    </DashboardLayout>\r\n  );\r\n};\r\n\r\nexport default DashboardPage;\r\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { ArrowLeft } from 'lucide-react';\n\nimport { Button } from '@/shared/ui';\n\nconst ApplicationHeader: React.FC = () => {\n  return (\n    <header className=\"fixed top-0 z-50 bg-stone-900/95 backdrop-blur-sm w-full border-b border-stone-800 relative\">\n      <div className=\"w-full py-4\">\n        <div className=\"max-w-7xl mx-auto flex items-center justify-between px-4 sm:px-6 lg:px-8\">\n          {/* Logo and Business Name */}\n          <div className=\"flex items-center space-x-3\">\n            <img \n              src=\"/shared/icons/logo.png\" \n              alt=\"That Smart Site Logo\" \n              className=\"h-14 w-14 object-contain\"\n              width={56}\n              height={56}\n              decoding=\"async\"\n              loading=\"eager\"\n            />\n            <div>\n              <h1 className=\"text-2xl md:text-3xl font-bold text-white\">That Smart Site</h1>\n            </div>\n          </div>\n\n          {/* Back Button */}\n          <Link to=\"/\">\n            <Button \n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"text-gray-300 hover:text-white hover:bg-stone-700 px-3 py-2 rounded-lg transition-colors\"\n              leftIcon={<ArrowLeft className=\"w-4 h-4\" />}\n            >\n              Back\n            </Button>\n          </Link>\n        </div>\n      </div>\n    </header>\n  );\n};\n\nexport default ApplicationHeader;\n","import React from 'react';\r\nimport { Building2, Zap } from 'lucide-react';\r\n\r\nimport { env } from '@/shared/env';\r\nimport { Input } from '@/shared/ui';\r\nimport { formatPhoneNumber } from '@/shared/utils/phoneFormatter';\r\n\r\ninterface BusinessInformationSectionProps {\r\n  formData: {\r\n    businessName: string;\r\n    businessPhone: string;\r\n    businessEmail: string;\r\n    businessAddress: {\r\n      address: string;\r\n      city: string;\r\n      state: string;\r\n      zip: string;\r\n    };\r\n    industry?: string;\r\n  };\r\n  handleInputChange: (field: string, value: string) => void;\r\n  handleAddressChange: (field: keyof BusinessInformationSectionProps['formData']['businessAddress'], value: string) => void;\r\n}\r\n\r\nconst INDUSTRIES = [\r\n  { value: 'mobile-detailing', label: 'Mobile Detailing' },\r\n  { value: 'maid-service', label: 'Maid Service' },\r\n  { value: 'lawncare', label: 'Lawn Care' },\r\n  { value: 'pet-grooming', label: 'Pet Grooming' },\r\n  { value: 'barber', label: 'Barber Shop' },\r\n];\r\n\r\nconst BusinessInformationSection: React.FC<BusinessInformationSectionProps> = ({\r\n  formData,\r\n  handleInputChange,\r\n  handleAddressChange\r\n}) => {\r\n  const handlePhoneChange = (value: string) => {\r\n    const formatted = formatPhoneNumber(value);\r\n    handleInputChange('businessPhone', formatted);\r\n  };\r\n\r\n  const handleAutoFill = () => {\r\n    handleInputChange('businessName', \"Testing Mobile Detail\");\r\n    handleInputChange('industry', 'mobile-detailing');\r\n    handleInputChange('businessPhone', formatPhoneNumber('7024206066'));\r\n    handleInputChange('businessEmail', 'bcoleman143@gmail.com');\r\n    handleAddressChange('address', '2550 Country Club Dr');\r\n    handleAddressChange('city', 'Bullhead City');\r\n    handleAddressChange('state', 'AZ');\r\n    handleAddressChange('zip', '86442');\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-stone-800 border border-stone-700 rounded-lg\">\r\n      <div className=\"p-6 border-b border-stone-700\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <h2 className=\"text-white text-lg font-semibold flex items-center\">\r\n              <Building2 className=\"h-5 w-5 mr-2\" />\r\n              Business Information\r\n            </h2>\r\n            <p className=\"text-gray-400 text-sm mt-1\">Tell us about your business</p>\r\n          </div>\r\n          {env.DEV && (\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleAutoFill}\r\n              className=\"flex items-center gap-2 px-3 py-1.5 bg-orange-600 hover:bg-orange-700 text-white text-sm font-medium rounded-lg transition-colors\"\r\n              title=\"Auto-fill with test data\"\r\n            >\r\n              <Zap className=\"h-4 w-4\" />\r\n              Auto-fill\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n      <div className=\"p-6\">\r\n      \r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n        {/* Business Name */}\r\n        <div className=\"md:col-span-2\">\r\n          <label htmlFor=\"businessName\" className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n            Business Name *\r\n          </label>\r\n          <Input\r\n            id=\"businessName\"\r\n            type=\"text\"\r\n            value={formData.businessName}\r\n            onChange={(e) => { handleInputChange('businessName', e.target.value); }}\r\n            placeholder=\"Enter your business name\"\r\n            required\r\n            className=\"w-full bg-stone-700 border border-stone-600 text-white placeholder:text-gray-400 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500\"\r\n          />\r\n        </div>\r\n\r\n        {/* Industry Selection */}\r\n        <div className=\"md:col-span-2\">\r\n          <label htmlFor=\"industry\" className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n            Industry *\r\n          </label>\r\n          <select\r\n            id=\"industry\"\r\n            value={formData.industry || 'mobile-detailing'}\r\n            onChange={(e) => { handleInputChange('industry', e.target.value); }}\r\n            required\r\n            className=\"w-full bg-stone-700 border border-stone-600 text-white rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500\"\r\n          >\r\n            {INDUSTRIES.map((industry) => (\r\n              <option key={industry.value} value={industry.value}>\r\n                {industry.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n          <p className=\"text-gray-400 text-xs mt-1\">\r\n            This determines your website template and features\r\n          </p>\r\n        </div>\r\n\r\n        {/* Business Phone */}\r\n        <div>\r\n          <label htmlFor=\"businessPhone\" className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n            Business Phone *\r\n          </label>\r\n          <Input\r\n            id=\"businessPhone\"\r\n            type=\"tel\"\r\n            value={formData.businessPhone}\r\n            onChange={(e) => { handlePhoneChange(e.target.value); }}\r\n            placeholder=\"(555) 123-4567\"\r\n            required\r\n            maxLength={14}\r\n            className=\"w-full bg-stone-700 border border-stone-600 text-white placeholder:text-gray-400 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500\"\r\n          />\r\n        </div>\r\n\r\n        {/* Business Email */}\r\n        <div>\r\n          <label htmlFor=\"businessEmail\" className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n            Business Email *\r\n          </label>\r\n          <Input\r\n            id=\"businessEmail\"\r\n            type=\"email\"\r\n            value={formData.businessEmail}\r\n            onChange={(e) => { handleInputChange('businessEmail', e.target.value); }}\r\n            placeholder=\"business@example.com\"\r\n            required\r\n            className=\"w-full bg-stone-700 border border-stone-600 text-white placeholder:text-gray-400 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500\"\r\n          />\r\n        </div>\r\n\r\n        {/* Business Address */}\r\n        <div className=\"md:col-span-2\">\r\n          <h3 className=\"text-lg font-semibold text-white mb-4\">Business Address</h3>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            {/* Street Address */}\r\n            <div className=\"md:col-span-2\">\r\n              <label htmlFor=\"businessAddress\" className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n                Street Address *\r\n              </label>\r\n              <Input\r\n                id=\"businessAddress\"\r\n                type=\"text\"\r\n                value={formData.businessAddress.address}\r\n                onChange={(e) => { handleAddressChange('address', e.target.value); }}\r\n                placeholder=\"123 Main Street\"\r\n                required\r\n                className=\"w-full bg-stone-700 border border-stone-600 text-white placeholder:text-gray-400 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500\"\r\n              />\r\n            </div>\r\n\r\n            {/* City */}\r\n            <div>\r\n              <label htmlFor=\"businessCity\" className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n                City *\r\n              </label>\r\n              <Input\r\n                id=\"businessCity\"\r\n                type=\"text\"\r\n                value={formData.businessAddress.city}\r\n                onChange={(e) => { handleAddressChange('city', e.target.value); }}\r\n                placeholder=\"Phoenix\"\r\n                required\r\n                className=\"w-full bg-stone-700 border border-stone-600 text-white placeholder:text-gray-400 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500\"\r\n              />\r\n            </div>\r\n\r\n            {/* State */}\r\n            <div>\r\n              <label htmlFor=\"businessState\" className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n                State *\r\n              </label>\r\n              <Input\r\n                id=\"businessState\"\r\n                type=\"text\"\r\n                value={formData.businessAddress.state}\r\n                onChange={(e) => { handleAddressChange('state', e.target.value); }}\r\n                placeholder=\"AZ\"\r\n                required\r\n                className=\"w-full bg-stone-700 border border-stone-600 text-white placeholder:text-gray-400 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500\"\r\n                maxLength={2}\r\n              />\r\n            </div>\r\n\r\n            {/* ZIP Code */}\r\n            <div>\r\n              <label htmlFor=\"businessZip\" className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n                ZIP Code *\r\n              </label>\r\n              <Input\r\n                id=\"businessZip\"\r\n                type=\"text\"\r\n                value={formData.businessAddress.zip}\r\n                onChange={(e) => { handleAddressChange('zip', e.target.value); }}\r\n                placeholder=\"85001\"\r\n                required\r\n                className=\"w-full bg-stone-700 border border-stone-600 text-white placeholder:text-gray-400 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500\"\r\n                maxLength={10}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BusinessInformationSection;\r\n","import React from 'react';\r\nimport { User, Zap } from 'lucide-react';\r\n\r\nimport { env } from '@/shared/env';\r\nimport { Input } from '@/shared/ui';\r\nimport { formatPhoneNumber } from '@/shared/utils/phoneFormatter';\r\n\r\ninterface PersonalInformationSectionProps {\r\n  formData: {\r\n    firstName: string;\r\n    lastName: string;\r\n    personalPhone: string;\r\n    personalEmail: string;\r\n  };\r\n  handleInputChange: (field: string, value: string) => void;\r\n  errors?: Record<string, string>;\r\n}\r\n\r\nconst PersonalInformationSection: React.FC<PersonalInformationSectionProps> = ({\r\n  formData,\r\n  handleInputChange,\r\n  errors = {}\r\n}) => {\r\n  const handlePhoneChange = (value: string) => {\r\n    const formatted = formatPhoneNumber(value);\r\n    handleInputChange('personalPhone', formatted);\r\n  };\r\n\r\n  const handleAutoFill = () => {\r\n    handleInputChange('firstName', 'John');\r\n    handleInputChange('lastName', 'Doe');\r\n    handleInputChange('personalPhone', formatPhoneNumber('5551112222'));\r\n    handleInputChange('personalEmail', 'coleman143@hotmail.com');\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-stone-800 border border-stone-700 rounded-lg\">\r\n      <div className=\"p-6 border-b border-stone-700\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <h2 className=\"text-white text-lg font-semibold flex items-center\">\r\n              <User className=\"h-5 w-5 mr-2\" />\r\n              Personal Information\r\n            </h2>\r\n            <p className=\"text-gray-400 text-sm mt-1\">Tell us about yourself</p>\r\n          </div>\r\n          {env.DEV && (\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleAutoFill}\r\n              className=\"flex items-center gap-2 px-3 py-1.5 bg-orange-600 hover:bg-orange-700 text-white text-sm font-medium rounded-lg transition-colors\"\r\n              title=\"Auto-fill with test data\"\r\n            >\r\n              <Zap className=\"h-4 w-4\" />\r\n              Auto-fill\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n      <div className=\"p-6\">\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n        {/* First Name */}\r\n        <div>\r\n          <label htmlFor=\"firstName\" className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n            First Name *\r\n          </label>\r\n          <Input\r\n            id=\"firstName\"\r\n            type=\"text\"\r\n            value={formData.firstName}\r\n            onChange={(e) => { handleInputChange('firstName', e.target.value); }}\r\n            placeholder=\"Enter your first name\"\r\n            required\r\n            className=\"w-full bg-stone-700 border border-stone-600 text-white placeholder:text-gray-400 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500\"\r\n          />\r\n        </div>\r\n\r\n        {/* Last Name */}\r\n        <div>\r\n          <label htmlFor=\"lastName\" className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n            Last Name *\r\n          </label>\r\n          <Input\r\n            id=\"lastName\"\r\n            type=\"text\"\r\n            value={formData.lastName}\r\n            onChange={(e) => { handleInputChange('lastName', e.target.value); }}\r\n            placeholder=\"Enter your last name\"\r\n            required\r\n            className=\"w-full bg-stone-700 border border-stone-600 text-white placeholder:text-gray-400 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500\"\r\n          />\r\n        </div>\r\n\r\n        {/* Personal Phone */}\r\n        <div>\r\n          <label htmlFor=\"personalPhone\" className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n            Personal Phone *\r\n          </label>\r\n          <Input\r\n            id=\"personalPhone\"\r\n            type=\"tel\"\r\n            value={formData.personalPhone}\r\n            onChange={(e) => { handlePhoneChange(e.target.value); }}\r\n            placeholder=\"(555) 123-4567\"\r\n            required\r\n            maxLength={14}\r\n            className=\"w-full bg-stone-700 border border-stone-600 text-white placeholder:text-gray-400 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500\"\r\n          />\r\n        </div>\r\n\r\n        {/* Personal Email */}\r\n        <div>\r\n          <label htmlFor=\"personalEmail\" className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n            Personal Email *\r\n          </label>\r\n          <Input\r\n            id=\"personalEmail\"\r\n            type=\"email\"\r\n            value={formData.personalEmail}\r\n            onChange={(e) => { handleInputChange('personalEmail', e.target.value); }}\r\n            placeholder=\"your.email@example.com\"\r\n            required\r\n            className=\"w-full bg-stone-700 border border-stone-600 text-white placeholder:text-gray-400 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500\"\r\n          />\r\n          {errors['personalEmail'] && (\r\n            <p className=\"mt-1 text-sm text-red-400\">{errors['personalEmail']}</p>\r\n          )}\r\n        </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PersonalInformationSection;\r\n","export interface BaseLocation {\r\n  city: string;\r\n  state: string;\r\n  zip: string;\r\n}\r\n\r\nexport interface ServiceArea {\r\n  city: string;\r\n  state: string;\r\n  zip: number | null;\r\n  primary: boolean;\r\n  minimum: number;\r\n  multiplier: number;\r\n}\r\n\r\n\r\n\r\nexport interface UploadFile {\r\n  name: string;\r\n  size: number;\r\n  type: string;\r\n  url: string;\r\n}\r\n\r\n// Address interface for reusability\r\nexport interface Address {\r\n  address: string;\r\n  city: string;\r\n  state: string;\r\n  zip: string;\r\n}\r\n\r\n// Pricing plan interface\r\nexport interface PricingPlan {\r\n  id: 'starter' | 'pro' | 'enterprise';\r\n  name: string;\r\n  price: number;\r\n  interval: string;\r\n  features: string[];\r\n  popular?: boolean;\r\n}\r\n\r\n// Preview state interface\r\nexport interface PreviewState {\r\n  fromPreview?: boolean;\r\n  businessName?: string;\r\n  phone?: string;\r\n  city?: string;\r\n  state?: string;\r\n  industry?: string;\r\n}\r\n\r\n// New simplified tenant application interface\r\nexport interface TenantApplication {\r\n  id?: string;\r\n  firstName: string;\r\n  lastName: string;\r\n  personalPhone: string;\r\n  personalEmail: string;\r\n  businessName: string;\r\n  businessPhone: string;\r\n  businessEmail: string;\r\n  businessAddress: Address;\r\n  selectedPlan: 'starter' | 'pro' | 'enterprise' | '';\r\n  planPrice: number;\r\n  paymentMethod: string;\r\n  cardNumber: string;\r\n  expiryDate: string;\r\n  cvv: string;\r\n  billingAddress: Address;\r\n  useSameAddress: boolean;\r\n  industry?: string;\r\n  step: number;\r\n  status: 'draft' | 'pending' | 'approved' | 'rejected';\r\n}\r\n\r\n// Legacy interface for backward compatibility\r\nexport interface AffiliateApplication {\r\n  legal_name: string;\r\n  primary_contact: string;\r\n  phone: string;\r\n  email: string;\r\n  base_location: BaseLocation;\r\n  categories: string[];\r\n  gbp_url?: string;\r\n  instagram_url?: string;\r\n  tiktok_url?: string;\r\n  facebook_url?: string;\r\n  youtube_url?: string;\r\n  website_url?: string;\r\n  uploads?: UploadFile[];\r\n  has_insurance: boolean;\r\n  accept_terms: boolean;\r\n  consent_notifications: boolean;\r\n  source: string;\r\n  notes?: string;\r\n}\r\n\r\nexport const US_STATES = [\r\n  'AL', 'AK', 'AZ', 'AR', 'CA', 'CO', 'CT', 'DE', 'FL', 'GA',\r\n  'HI', 'ID', 'IL', 'IN', 'IA', 'KS', 'KY', 'LA', 'ME', 'MD',\r\n  'MA', 'MI', 'MN', 'MS', 'MO', 'MT', 'NE', 'NV', 'NH', 'NJ',\r\n  'NM', 'NY', 'NC', 'ND', 'OH', 'OK', 'OR', 'PA', 'RI', 'SC',\r\n  'SD', 'TN', 'TX', 'UT', 'VT', 'VA', 'WA', 'WV', 'WI', 'WY'\r\n];\r\n\r\nexport const CATEGORIES = [\r\n  'Auto Detailing',\r\n  'Boat Detailing',\r\n  'RV Detailing',\r\n  'PPF Installation',\r\n  'Ceramic Coating',\r\n  'Paint Correction'\r\n];\r\n\r\nexport const SOURCES = [\r\n  'Google Search',\r\n  'Social Media',\r\n  'Referral',\r\n  'Direct Mail',\r\n  'Other'\r\n];\r\n\r\n// Pricing plans with updated $15/$25/$35 pricing\r\nexport const pricingPlans: PricingPlan[] = [\r\n  {\r\n    id: 'starter',\r\n    name: 'Starter',\r\n    price: 15,\r\n    interval: 'month',\r\n    features: [\r\n      'Single location website',\r\n      '5 custom pages',\r\n      'Mobile responsive design',\r\n      'Contact form integration',\r\n      'Basic SEO optimization',\r\n      'SSL certificate included',\r\n      'Email support',\r\n    ],\r\n  },\r\n  {\r\n    id: 'pro',\r\n    name: 'Pro',\r\n    price: 25,\r\n    interval: 'month',\r\n    popular: true,\r\n    features: [\r\n      'Multi-location support',\r\n      'Unlimited pages',\r\n      'Advanced SEO tools',\r\n      'Online booking system',\r\n      'Google Maps integration',\r\n      'Analytics dashboard',\r\n      'Priority support',\r\n      'Custom domain',\r\n    ],\r\n  },\r\n  {\r\n    id: 'enterprise',\r\n    name: 'Enterprise',\r\n    price: 35,\r\n    interval: 'month',\r\n    features: [\r\n      'Everything in Pro',\r\n      'Custom development',\r\n      'API integrations',\r\n      'Dedicated account manager',\r\n      'White-label options',\r\n      'SLA guarantee',\r\n      '24/7 phone support',\r\n    ],\r\n  },\r\n];\r\n\r\n// Default values for new simplified tenant application\r\nexport const tenantApplicationDefaultValues: TenantApplication = {\r\n  firstName: '',\r\n  lastName: '',\r\n  personalPhone: '',\r\n  personalEmail: '',\r\n  businessName: '',\r\n  businessPhone: '',\r\n  businessEmail: '',\r\n  businessAddress: {\r\n    address: '',\r\n    city: '',\r\n    state: '',\r\n    zip: ''\r\n  },\r\n  selectedPlan: '',\r\n  planPrice: 0,\r\n  paymentMethod: '',\r\n  cardNumber: '',\r\n  expiryDate: '',\r\n  cvv: '',\r\n  billingAddress: {\r\n    address: '',\r\n    city: '',\r\n    state: '',\r\n    zip: ''\r\n  },\r\n  useSameAddress: true,\r\n  industry: 'mobile-detailing',\r\n  step: 0,\r\n  status: 'draft'\r\n};\r\n\r\n// Legacy default values for backward compatibility\r\nexport const defaultValues: AffiliateApplication = {\r\n  legal_name: '',\r\n  primary_contact: '',\r\n  phone: '',\r\n  email: '',\r\n  base_location: {\r\n    city: '',\r\n    state: '',\r\n    zip: ''\r\n  },\r\n  categories: [],\r\n  gbp_url: '',\r\n  instagram_url: '',\r\n  tiktok_url: '',\r\n  facebook_url: '',\r\n  youtube_url: '',\r\n  website_url: '',\r\n  uploads: [],\r\n  has_insurance: false,\r\n  accept_terms: false,\r\n  consent_notifications: false,\r\n  source: '',\r\n  notes: ''\r\n};\r\n","import React, { useState } from 'react';\r\nimport { Check, Sparkles } from 'lucide-react';\r\n\r\nimport { type PricingPlan,pricingPlans } from '../types';\r\n\r\ninterface PlanSelectionSectionProps {\r\n  selectedPlan: string;\r\n  onSelectPlan: (planId: 'starter' | 'pro' | 'enterprise', price: number) => void;\r\n}\r\n\r\nexport const PlanSelectionSection: React.FC<PlanSelectionSectionProps> = ({\r\n  selectedPlan,\r\n  onSelectPlan,\r\n}) => {\r\n  const [hoveredPlan, setHoveredPlan] = useState<string | null>(null);\r\n\r\n  return (\r\n    <div className=\"w-full max-w-6xl mx-auto\">\r\n      <div className=\"text-center mb-8 sm:mb-12\">\r\n        <h2 className=\"text-2xl sm:text-3xl lg:text-4xl font-bold text-white mb-3 sm:mb-4\">\r\n          Choose Your Plan\r\n        </h2>\r\n        <p className=\"text-gray-400 text-base sm:text-lg max-w-2xl mx-auto px-4\">\r\n          Select the perfect plan for your business. All plans include a 14-day money-back guarantee.\r\n        </p>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8 px-4 items-stretch\">\r\n        {pricingPlans.map((plan: PricingPlan) => {\r\n          const isSelected = selectedPlan === plan.id;\r\n          const isHovered = hoveredPlan === plan.id;\r\n\r\n          return (\r\n            <div\r\n              key={plan.id}\r\n              className={`\r\n                relative rounded-2xl border-2 transition-all duration-300 flex flex-col h-full\r\n                ${\r\n                  isSelected\r\n                    ? 'border-orange-600 bg-stone-800 shadow-xl shadow-orange-600/20 scale-105'\r\n                    : isHovered\r\n                    ? 'border-orange-500 bg-stone-800/80 scale-102'\r\n                    : 'border-stone-700 bg-stone-800/60'\r\n                }\r\n                ${plan.popular ? 'lg:scale-105 lg:z-10' : ''}\r\n              `}\r\n              onMouseEnter={() => { setHoveredPlan(plan.id); }}\r\n              onMouseLeave={() => { setHoveredPlan(null); }}\r\n            >\r\n              {plan.popular && (\r\n                <div className=\"absolute -top-4 left-1/2 transform -translate-x-1/2 z-20\">\r\n                  <div className=\"bg-gradient-to-r from-orange-600 to-orange-500 text-white text-xs sm:text-sm font-bold px-4 py-1.5 rounded-full flex items-center gap-1.5 shadow-lg\">\r\n                    <Sparkles className=\"w-3 h-3 sm:w-4 sm:h-4\" />\r\n                    MOST POPULAR\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"p-6 sm:p-8 flex flex-col h-full\">\r\n                <h3 className=\"text-xl sm:text-2xl font-bold text-white mb-2\">\r\n                  {plan.name}\r\n                </h3>\r\n\r\n                <div className=\"mb-6\">\r\n                  <div className=\"flex items-baseline gap-1\">\r\n                    <span className=\"text-3xl sm:text-4xl lg:text-5xl font-bold text-white\">\r\n                      ${plan.price}\r\n                    </span>\r\n                    <span className=\"text-gray-400 text-base sm:text-lg\">/{plan.interval}</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <ul className=\"space-y-3 sm:space-y-4 mb-6 sm:mb-8 flex-grow\">\r\n                  {plan.features.map((feature, index) => (\r\n                    <li key={index} className=\"flex items-start gap-3\">\r\n                      <Check className=\"w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5\" />\r\n                      <span className=\"text-gray-300 text-sm sm:text-base\">{feature}</span>\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => { onSelectPlan(plan.id, plan.price * 100); }}\r\n                  className={`\r\n                    w-full py-3 sm:py-3.5 px-6 rounded-lg font-semibold text-base sm:text-lg\r\n                    transition-all duration-200\r\n                    focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-stone-800\r\n                    ${\r\n                      isSelected\r\n                        ? 'bg-orange-600 text-white hover:bg-orange-700 focus:ring-orange-500'\r\n                        : 'bg-stone-700 text-white hover:bg-stone-600 focus:ring-stone-500'\r\n                    }\r\n                  `}\r\n                >\r\n                  {isSelected ? 'Selected' : 'Select Plan'}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      <div className=\"mt-8 text-center px-4\">\r\n        <div className=\"flex flex-wrap justify-center items-center gap-4 sm:gap-8 text-sm text-gray-400\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <Check className=\"w-4 h-4 text-orange-600\" />\r\n            <span>14-day money-back guarantee</span>\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <Check className=\"w-4 h-4 text-orange-600\" />\r\n            <span>Cancel anytime</span>\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <Check className=\"w-4 h-4 text-orange-600\" />\r\n            <span>No setup fees</span>\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Trust badges */}\r\n        <div className=\"flex flex-wrap justify-center items-center gap-3 sm:gap-6 text-xs text-gray-500 mt-4\">\r\n          <span>Powered by Stripe</span>\r\n          <span className=\"hidden sm:inline\">•</span>\r\n          <span>SSL Secure</span>\r\n          <span className=\"hidden sm:inline\">•</span>\r\n          <span>PCI Compliant</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n","import React from 'react';\r\nimport { Check } from 'lucide-react';\r\n\r\ninterface StepProgressProps {\r\n  steps: Array<{ id: number; label: string }>;\r\n  currentStep: number;\r\n}\r\n\r\nexport const StepProgress: React.FC<StepProgressProps> = ({ steps, currentStep }) => {\r\n  return (\r\n    <div className=\"w-full py-6 sm:py-8\">\r\n      <div className=\"flex justify-center items-center px-4\">\r\n        {steps.map((step, index) => {\r\n          const isActive = step.id === currentStep;\r\n          const isCompleted = step.id < currentStep;\r\n          const isLast = index === steps.length - 1;\r\n\r\n          return (\r\n            <React.Fragment key={step.id}>\r\n              <div className=\"flex flex-col items-center\">\r\n                <div\r\n                  className={`\r\n                    flex items-center justify-center w-8 h-8 sm:w-10 sm:h-10 rounded-full border-2\r\n                    transition-all duration-300 relative\r\n                    ${\r\n                      isCompleted\r\n                        ? 'bg-orange-600 border-orange-600 text-white scale-100'\r\n                        : isActive\r\n                        ? 'bg-orange-600 border-orange-600 text-white scale-110 shadow-lg shadow-orange-600/50'\r\n                        : 'bg-stone-800 border-stone-600 text-gray-400'\r\n                    }\r\n                  `}\r\n                >\r\n                  {isCompleted ? (\r\n                    <Check className=\"w-4 h-4 sm:w-5 sm:h-5\" />\r\n                  ) : (\r\n                    <span className=\"text-sm sm:text-base font-semibold\">{step.id + 1}</span>\r\n                  )}\r\n                </div>\r\n                <div\r\n                  className={`\r\n                    text-xs sm:text-sm font-medium mt-2 text-center transition-colors\r\n                    ${isActive ? 'text-orange-600' : isCompleted ? 'text-gray-300' : 'text-gray-500'}\r\n                  `}\r\n                >\r\n                  {step.label}\r\n                </div>\r\n              </div>\r\n\r\n              {!isLast && (\r\n                <div\r\n                  className={`\r\n                    h-0.5 w-12 sm:w-20 lg:w-24 mx-2 sm:mx-4 mb-6 transition-all duration-500\r\n                    ${isCompleted ? 'bg-orange-600' : 'bg-stone-700'}\r\n                  `}\r\n                />\r\n              )}\r\n            </React.Fragment>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect, useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { CheckCircle, Settings,Sparkles } from 'lucide-react';\n\nimport { useAuth } from '@/shared/hooks';\nimport { Button } from '@/shared/ui';\n\n\nconst SuccessPage: React.FC = () => {\n  const navigate = useNavigate();\n  const { login } = useAuth();\n  const [tenantSlug, setTenantSlug] = useState<string | null>(null);\n  const [websiteUrl, setWebsiteUrl] = useState<string | null>(null);\n  const [dashboardUrl, setDashboardUrl] = useState<string | null>(null);\n  const [isLoggingIn, setIsLoggingIn] = useState(false);\n\n  useEffect(() => {\n    // Retrieve the tenant info from session storage\n    const slug = sessionStorage.getItem('newTenantSlug');\n    const url = sessionStorage.getItem('newTenantWebsiteUrl');\n    const dashboard = sessionStorage.getItem('newTenantDashboardUrl');\n    \n    if (slug) {\n      setTenantSlug(slug);\n      setWebsiteUrl(url || `/${slug}`);\n      setDashboardUrl(dashboard || `/${slug}/dashboard`);\n      \n      // Clean up session storage after retrieval\n      sessionStorage.removeItem('newTenantSlug');\n      sessionStorage.removeItem('newTenantWebsiteUrl');\n      sessionStorage.removeItem('newTenantDashboardUrl');\n    }\n  }, []);\n\n\n  const handleGoToDashboard = () => {\n    // Simply navigate to dashboard - user will need to login with their email-set password\n    if (dashboardUrl) {\n      void navigate(dashboardUrl);\n    }\n  };\n\n  return (\n    <>\n      <div className=\"min-h-screen bg-stone-900 text-white flex items-center justify-center p-4 pb-32\">\n        <div className=\"bg-stone-800 border border-stone-700 rounded-2xl max-w-2xl w-full p-6 sm:p-8\">\n        <div className=\"text-center\">\n          <div className=\"w-20 h-20 bg-gradient-to-br from-green-500 to-green-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg shadow-green-600/50\">\n            <CheckCircle className=\"w-10 h-10 text-white\" />\n          </div>\n          <h1 className=\"text-3xl sm:text-4xl text-white font-bold mb-3\">\n            Welcome to ThatSmartSite! 🎉\n          </h1>\n          <p className=\"text-gray-300 text-lg mb-8\">\n            Your website has been created and is ready to view!\n          </p>\n        </div>\n        \n        {tenantSlug && websiteUrl && (\n            <div className=\"bg-gradient-to-br from-green-900/30 to-green-800/20 border border-green-600/50 rounded-lg p-6 mb-6\">\n            <h3 className=\"font-semibold text-white text-lg mb-3 text-center\">\n              🎉 Your Website is Ready!\n            </h3>\n            <p className=\"text-gray-300 text-sm mb-4 text-center\">\n              Your website is live at: <span className=\"text-green-400 font-mono text-xs\">{websiteUrl}</span>\n            </p>\n            <p className=\"text-gray-300 text-sm mb-6 text-center\">\n              Now let&apos;s customize it to make it perfect for your business!\n            </p>\n            <Button \n              onClick={handleGoToDashboard}\n              variant=\"primary\"\n              size=\"lg\"\n              className=\"w-full bg-green-600 hover:bg-green-700 flex items-center justify-center gap-2\"\n            >\n              <Settings className=\"w-5 h-5\" />\n              Go to Dashboard\n            </Button>\n          </div>\n        )}\n\n        <div className=\"bg-gradient-to-br from-orange-900/30 to-orange-800/20 border border-orange-600/50 rounded-lg p-6 mb-6\">\n          <div className=\"flex items-start gap-3 mb-4\">\n            <Sparkles className=\"w-6 h-6 text-orange-400 flex-shrink-0 mt-1\" />\n            <div>\n              <h3 className=\"font-semibold text-white text-lg mb-2\">What&apos;s Next?</h3>\n              <ul className=\"space-y-2 text-gray-300 text-sm\">\n                <li className=\"flex items-start\">\n                  <span className=\"text-orange-400 mr-2\">•</span>\n                  <span>Customize your site content, photos, and business information</span>\n                </li>\n                <li className=\"flex items-start\">\n                  <span className=\"text-orange-400 mr-2\">•</span>\n                  <span>Add your services, pricing, and contact information</span>\n                </li>\n                <li className=\"flex items-start\">\n                  <span className=\"text-orange-400 mr-2\">•</span>\n                  <span>You&apos;ll receive a welcome email with instructions to set your password</span>\n                </li>\n                <li className=\"flex items-start\">\n                  <span className=\"text-orange-400 mr-2\">•</span>\n                  <span>Our team will reach out to help you get started</span>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-stone-700/50 border border-stone-600 rounded-lg p-4 mb-6\">\n          <p className=\"text-gray-300 text-sm text-center\">\n            Check your email inbox for a confirmation message from{' '}\n            <span className=\"text-orange-400 font-semibold\">hello@thatsmartsite.com</span>\n          </p>\n        </div>\n\n        <div className=\"flex flex-col sm:flex-row gap-3 justify-center\">\n          <Link to=\"/\" className=\"w-full sm:w-auto\">\n            <Button \n              variant=\"outline\"\n              size=\"lg\"\n              className=\"w-full border border-stone-600 text-gray-300 hover:bg-stone-700 font-semibold\"\n            >\n              Back to Home\n            </Button>\n          </Link>\n          <Button \n            onClick={() => { void navigate('/contact'); }}\n            variant=\"primary\"\n            size=\"lg\"\n            className=\"w-full sm:w-auto bg-orange-600 hover:bg-orange-700\"\n          >\n            Contact Support\n          </Button>\n        </div>\n\n        <div className=\"mt-8 pt-6 border-t border-stone-700 text-center\">\n          <p className=\"text-xs text-gray-500\">\n            Need help? Call us at <span className=\"text-orange-400\">(555) 123-4567</span> or email{' '}\n            <span className=\"text-orange-400\">support@thatsmartsite.com</span>\n          </p>\n        </div>\n        </div>\n      </div>\n\n      {/* PWA Add to Home Screen moved to tenant dashboard */}\n    </>\n  );\n};\n\nexport default SuccessPage;\n","/**\r\n * Load industry defaults for tenant provisioning\r\n * \r\n * These defaults are used ONLY during tenant signup to populate the database.\r\n * At runtime, the site loads content from the database (single source of truth).\r\n */\r\n\r\nexport type IndustrySlug = \r\n  | 'mobile-detailing'\r\n  | 'lawncare'\r\n  | 'maid-service'\r\n  | 'pet-grooming';\r\n\r\nexport interface FAQItem {\r\n  category: string;\r\n  question: string;\r\n  answer: string;\r\n}\r\n\r\nexport interface ContentDefaults {\r\n  hero: {\r\n    h1: string;\r\n    subTitle: string;\r\n  };\r\n  reviews: {\r\n    title: string;\r\n    subtitle: string;\r\n  };\r\n  faq: {\r\n    title: string;\r\n    subtitle: string;\r\n  };\r\n}\r\n\r\nexport interface SEODefaults {\r\n  title: string;\r\n  description: string;\r\n  keywords: string;\r\n  ogImage: string;\r\n  twitterImage: string;\r\n  canonicalPath: string;\r\n  robots: string;\r\n}\r\n\r\nexport interface IndustryDefaults {\r\n  content: ContentDefaults;\r\n  seo: SEODefaults;\r\n  faqItems: FAQItem[];\r\n}\r\n\r\n/**\r\n * Load FAQ items for an industry from all category files\r\n * \r\n * @param industry - Industry identifier\r\n * @returns Array of FAQ items from all categories\r\n */\r\nasync function loadFAQItems(industry: IndustrySlug): Promise<FAQItem[]> {\r\n  const categories = [\r\n    'general',\r\n    'services',\r\n    'pricing',\r\n    'scheduling',\r\n    'locations',\r\n    'preparation',\r\n    'payments',\r\n    'warranty',\r\n    'aftercare',\r\n  ];\r\n  \r\n  const faqArrays = await Promise.all(\r\n    categories.map(async (category) => {\r\n      try {\r\n        const module = await import(`@/data/${industry}/faq/${category}.json`) as { default: FAQItem[] };\r\n        return module.default;\r\n      } catch {\r\n        // Category file might not exist for all industries\r\n        return [];\r\n      }\r\n    })\r\n  );\r\n  \r\n  // Flatten all categories into a single array (no IDs needed for database storage)\r\n  return faqArrays.flat();\r\n}\r\n\r\n/**\r\n * Load all defaults for an industry (content + SEO + FAQ items)\r\n * \r\n * Used ONLY during tenant signup to populate website.content table.\r\n * Not used at runtime - DB is the single source of truth.\r\n * \r\n * @param industry - Industry identifier\r\n * @returns All defaults for database provisioning\r\n */\r\nexport async function loadDefaults(\r\n  industry: IndustrySlug\r\n): Promise<IndustryDefaults> {\r\n  try {\r\n    const [contentModule, seoModule, faqItems] = await Promise.all([\r\n      import(`@/data/${industry}/content-defaults.json`) as Promise<{ default: ContentDefaults }>,\r\n      import(`@/data/${industry}/seo-defaults.json`) as Promise<{ default: SEODefaults }>,\r\n      loadFAQItems(industry)\r\n    ]);\r\n    \r\n    return {\r\n      content: contentModule.default,\r\n      seo: seoModule.default,\r\n      faqItems\r\n    };\r\n  } catch (error) {\r\n    console.error(`Failed to load defaults for ${industry}:`, error);\r\n    throw new Error(`Defaults not found for industry: ${industry}`);\r\n  }\r\n}\r\n\r\n","import { useCallback, useEffect, useRef } from 'react';\r\n\r\nimport type { TenantApplication } from '../types';\r\n\r\ninterface UseAutoSaveOptions {\r\n  formData: TenantApplication;\r\n  enabled?: boolean;\r\n  interval?: number;\r\n}\r\n\r\nconst STORAGE_KEY = 'tenant_application_draft';\r\n\r\nexport const useAutoSave = ({\r\n  formData,\r\n  enabled = true,\r\n  interval = 2000,\r\n}: UseAutoSaveOptions) => {\r\n  const timeoutRef = useRef<NodeJS.Timeout | null>(null);\r\n  const lastSavedRef = useRef<string>('');\r\n\r\n  const saveToLocalStorage = useCallback(() => {\r\n    try {\r\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(formData));\r\n    } catch (error) {\r\n      console.error('Failed to save to localStorage:', error);\r\n    }\r\n  }, [formData]);\r\n\r\n  const performSave = useCallback(() => {\r\n    const currentData = JSON.stringify(formData);\r\n\r\n    if (currentData === lastSavedRef.current) {\r\n      return;\r\n    }\r\n\r\n    saveToLocalStorage();\r\n    lastSavedRef.current = currentData;\r\n  }, [formData, saveToLocalStorage]);\r\n\r\n  useEffect(() => {\r\n    if (!enabled) return;\r\n\r\n    if (timeoutRef.current) {\r\n      clearTimeout(timeoutRef.current);\r\n    }\r\n\r\n    timeoutRef.current = setTimeout(() => {\r\n      performSave();\r\n    }, interval);\r\n\r\n    return () => {\r\n      if (timeoutRef.current) {\r\n        clearTimeout(timeoutRef.current);\r\n      }\r\n    };\r\n  }, [formData, enabled, interval, performSave]);\r\n\r\n  const loadFromLocalStorage = useCallback((): TenantApplication | null => {\r\n    try {\r\n      const saved = localStorage.getItem(STORAGE_KEY);\r\n      return saved ? (JSON.parse(saved) as TenantApplication) : null;\r\n    } catch (error) {\r\n      console.error('Failed to load from localStorage:', error);\r\n      return null;\r\n    }\r\n  }, []);\r\n\r\n  const clearSavedData = useCallback(() => {\r\n    try {\r\n      localStorage.removeItem(STORAGE_KEY);\r\n    } catch (error) {\r\n      console.error('Failed to clear saved data:', error);\r\n    }\r\n  }, []);\r\n\r\n  return {\r\n    loadFromLocalStorage,\r\n    clearSavedData,\r\n  };\r\n};\r\n\r\n","import { z } from 'zod';\r\n\r\nconst phoneRegex = /^\\(?([0-9]{3})\\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;\r\n\r\nexport const addressSchema = z.object({\r\n  address: z.string().min(1, 'Address is required'),\r\n  city: z.string().min(1, 'City is required'),\r\n  state: z.string().length(2, 'State must be 2 characters (e.g., CA)').toUpperCase(),\r\n  zip: z.string().regex(/^\\d{5}(-\\d{4})?$/, 'Invalid ZIP code'),\r\n});\r\n\r\nexport const personalInfoSchema = z.object({\r\n  firstName: z.string().min(1, 'First name is required').max(50),\r\n  lastName: z.string().min(1, 'Last name is required').max(50),\r\n  personalPhone: z.string().regex(phoneRegex, 'Invalid phone number'),\r\n  personalEmail: z.email('Invalid email address'),\r\n});\r\n\r\nexport const businessInfoSchema = z.object({\r\n  businessName: z.string().min(1, 'Business name is required').max(100),\r\n  businessPhone: z.string().regex(phoneRegex, 'Invalid phone number'),\r\n  businessEmail: z.email('Invalid email address'),\r\n  businessAddress: addressSchema,\r\n  industry: z.string().optional(),\r\n});\r\n\r\nexport const planSelectionSchema = z.object({\r\n  selectedPlan: z.enum(['starter', 'pro', 'enterprise'], {\r\n    errorMap: () => ({ message: 'Please select a plan' }),\r\n  }),\r\n  planPrice: z.number().min(0),\r\n});\r\n\r\nexport const paymentSchema = z.object({\r\n  billingAddress: addressSchema,\r\n  useSameAddress: z.boolean(),\r\n});\r\n\r\n/**\r\n * Formats a phone number as user types: (123) 456-7890\r\n */\r\nexport const formatPhoneNumber = (value: string): string => {\r\n  const cleaned = value.replace(/\\D/g, '');\r\n  const match = cleaned.match(/^(\\d{0,3})(\\d{0,3})(\\d{0,4})$/);\r\n\r\n  if (!match) return value;\r\n\r\n  const parts = [match[1], match[2], match[3]].filter(Boolean);\r\n\r\n  if (parts.length === 0) return '';\r\n  if (parts.length === 1) return parts[0];\r\n  if (parts.length === 2) return `(${parts[0]}) ${parts[1]}`;\r\n  return `(${parts[0]}) ${parts[1]}-${parts[2]}`;\r\n};\r\n\r\n/**\r\n * Validates an email address using Zod\r\n */\r\nexport const validateEmail = (email: string): boolean => {\r\n  try {\r\n    z.email().parse(email);\r\n    return true;\r\n  } catch {\r\n    return false;\r\n  }\r\n};\r\n\r\n/**\r\n * Suggests email correction for common typos\r\n */\r\nexport const suggestEmailCorrection = (email: string): string | null => {\r\n  const commonDomains = [\r\n    'gmail.com',\r\n    'yahoo.com',\r\n    'hotmail.com',\r\n    'outlook.com',\r\n    'icloud.com',\r\n  ];\r\n\r\n  const parts = email.split('@');\r\n  if (parts.length !== 2) return null;\r\n\r\n  const domain = parts[1].toLowerCase();\r\n\r\n  for (const commonDomain of commonDomains) {\r\n    if (domain !== commonDomain && isCloseMatch(domain, commonDomain)) {\r\n      return `${parts[0]}@${commonDomain}`;\r\n    }\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nfunction isCloseMatch(str1: string, str2: string): boolean {\r\n  if (Math.abs(str1.length - str2.length) > 2) return false;\r\n\r\n  let differences = 0;\r\n  const maxLen = Math.max(str1.length, str2.length);\r\n\r\n  for (let i = 0; i < maxLen; i++) {\r\n    if (str1[i] !== str2[i]) differences++;\r\n    if (differences > 2) return false;\r\n  }\r\n\r\n  return differences > 0 && differences <= 2;\r\n}\r\n\r\n","/**\r\n * Payment API client for tenant onboarding\r\n */\r\n\r\nimport { apiClient } from '@/shared/api';\r\n\r\nexport interface CreatePaymentIntentRequest {\r\n  amount: number;\r\n  customerEmail: string;\r\n  businessName: string;\r\n  planType: string;\r\n  metadata?: Record<string, unknown>;\r\n}\r\n\r\nexport interface CreatePaymentIntentResponse {\r\n  success: boolean;\r\n  clientSecret?: string;\r\n  paymentIntentId?: string;\r\n  error?: string;\r\n}\r\n\r\nexport interface ConfirmPaymentRequest {\r\n  paymentIntentId: string;\r\n  tenantData: Record<string, unknown>;\r\n}\r\n\r\nexport interface ConfirmPaymentResponse {\r\n  success: boolean;\r\n  data?: {\r\n    slug: string;\r\n    websiteUrl: string;\r\n    dashboardUrl: string;\r\n    tenantId: string;\r\n    userId: string;\r\n    paymentIntentId: string;\r\n  };\r\n  error?: string;\r\n}\r\n\r\nexport const createPaymentIntent = async (request: CreatePaymentIntentRequest): Promise<CreatePaymentIntentResponse> => {\r\n  return apiClient.post<CreatePaymentIntentResponse>('/api/payments/create-intent', request);\r\n};\r\n\r\nexport const confirmPayment = async (request: ConfirmPaymentRequest): Promise<ConfirmPaymentResponse> => {\r\n  return apiClient.post<ConfirmPaymentResponse>('/api/payments/confirm', request);\r\n};\r\n","import React, { useState } from 'react';\r\nimport { CardElement, useElements, useStripe } from '@stripe/react-stripe-js';\r\nimport { AlertCircle, CreditCard, Lock, Shield } from 'lucide-react';\r\n\r\nimport { env } from '@/shared/env';\r\nimport { Input } from '@/shared/ui';\r\n\r\nimport { confirmPayment, createPaymentIntent } from '../api/payments.api';\r\nimport type { Address } from '../types';\r\nimport { addressSchema } from '../utils/validation';\r\n\r\ninterface PaymentSectionProps {\r\n  formData: {\r\n    selectedPlan: string;\r\n    planPrice: number;\r\n    billingAddress: Address;\r\n    useSameAddress: boolean;\r\n    firstName: string;\r\n    lastName: string;\r\n    personalEmail: string;\r\n    personalPhone: string;\r\n    businessName: string;\r\n    businessPhone: string;\r\n    businessEmail: string;\r\n    businessAddress: Address;\r\n    industry: string;\r\n    defaults: unknown;\r\n  };\r\n  businessAddress: Address;\r\n  onAddressChange: (field: keyof Address, value: string) => void;\r\n  onToggleSameAddress: (value: boolean) => void;\r\n  onPaymentSuccess: (data: { slug: string; websiteUrl: string; dashboardUrl: string }) => void;\r\n  errors: Record<string, string>;\r\n  setErrors: (errors: Record<string, string>) => void;\r\n}\r\n\r\nconst PaymentSection: React.FC<PaymentSectionProps> = ({\r\n  formData,\r\n  onAddressChange,\r\n  onToggleSameAddress,\r\n  onPaymentSuccess,\r\n  errors,\r\n  setErrors,\r\n}) => {\r\n  const stripe = useStripe();\r\n  const elements = useElements();\r\n  const [cardError, setCardError] = useState<string>('');\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [clientSecret, setClientSecret] = useState<string | null>(null);\r\n\r\n  const validateField = (field: string, value: string) => {\r\n    try {\r\n      const addressField = field.split('.')[1] as keyof Address;\r\n      switch (addressField) {\r\n        case 'address':\r\n          addressSchema.pick({ address: true }).parse({ address: value });\r\n          break;\r\n        case 'city':\r\n          addressSchema.pick({ city: true }).parse({ city: value });\r\n          break;\r\n        case 'state':\r\n          addressSchema.pick({ state: true }).parse({ state: value });\r\n          break;\r\n        case 'zip':\r\n          addressSchema.pick({ zip: true }).parse({ zip: value });\r\n          break;\r\n      }\r\n      setErrors({ ...errors, [field]: '' });\r\n    } catch (error: unknown) {\r\n      const message = error instanceof Error ? error.message : 'Invalid input';\r\n      setErrors({ ...errors, [field]: message });\r\n    }\r\n  };\r\n\r\n\r\n  const handleCardChange = (event: { error?: { message: string } | undefined }) => {\r\n    if (event.error) {\r\n      setCardError(event.error.message);\r\n    } else {\r\n      setCardError('');\r\n    }\r\n  };\r\n\r\n  // Create payment intent when component mounts\r\n  React.useEffect(() => {\r\n    const createPaymentIntentAsync = async () => {\r\n      try {\r\n        // Guard against missing required fields\r\n        if (!formData.planPrice || !formData.personalEmail || !formData.businessName || !formData.selectedPlan) {\r\n          console.error('Missing required fields for payment intent:', {\r\n            planPrice: formData.planPrice,\r\n            personalEmail: formData.personalEmail,\r\n            businessName: formData.businessName,\r\n            selectedPlan: formData.selectedPlan\r\n          });\r\n          setCardError('Please complete all required fields before proceeding to payment');\r\n          return;\r\n        }\r\n        \r\n        const result = await createPaymentIntent({\r\n          amount: formData.planPrice,\r\n          customerEmail: formData.personalEmail,\r\n          businessName: formData.businessName,\r\n          planType: formData.selectedPlan,\r\n          metadata: {\r\n            industry: formData.industry,\r\n          }\r\n        });\r\n        \r\n        if (result.success && result.clientSecret) {\r\n          setClientSecret(result.clientSecret);\r\n        } else {\r\n          setCardError(result.error || 'Failed to initialize payment');\r\n        }\r\n      } catch (error) {\r\n        if (error instanceof TypeError && error.message.includes('fetch')) {\r\n          setCardError('Unable to connect to server. Please check your network connection.');\r\n        } else {\r\n          setCardError('Failed to initialize payment');\r\n        }\r\n      }\r\n    };\r\n\r\n    void createPaymentIntentAsync();\r\n  }, [formData.planPrice, formData.personalEmail, formData.businessName, formData.selectedPlan, formData.industry]);\r\n\r\n  const handlePayment = async () => {\r\n    if (!stripe || !elements || !clientSecret) {\r\n      setCardError('Payment system not ready. Please try again.');\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    setCardError('');\r\n\r\n    try {\r\n      const cardElement = elements.getElement(CardElement);\r\n      if (!cardElement) {\r\n        throw new Error('Card element not found');\r\n      }\r\n\r\n      // Check payment intent status before confirming\r\n      console.log('Checking payment intent status before confirmation...');\r\n      const { error: retrieveError, paymentIntent: existingIntent } = await stripe.retrievePaymentIntent(clientSecret);\r\n      if (retrieveError) {\r\n        console.error('Error retrieving payment intent:', retrieveError);\r\n      } else {\r\n        console.log('Payment intent status before confirmation:', existingIntent.status);\r\n        \r\n        // If already succeeded, skip confirmation\r\n        if (existingIntent.status === 'succeeded') {\r\n          console.log('Payment already succeeded, proceeding with tenant creation...');\r\n          const confirmResult = await confirmPayment({\r\n            paymentIntentId: existingIntent.id,\r\n            tenantData: formData\r\n          });\r\n          \r\n          if (confirmResult.success && confirmResult.data) {\r\n            onPaymentSuccess(confirmResult.data);\r\n          } else {\r\n            setCardError(confirmResult.error || 'Failed to create your account');\r\n          }\r\n          return;\r\n        }\r\n      }\r\n\r\n      // Confirm payment with Stripe\r\n      console.log('Confirming payment with client secret:', clientSecret);\r\n      const { error: stripeError, paymentIntent } = await stripe.confirmCardPayment(\r\n        clientSecret,\r\n        {\r\n          payment_method: {\r\n            card: cardElement,\r\n            billing_details: {\r\n              name: `${formData.firstName} ${formData.lastName}`,\r\n              email: formData.personalEmail,\r\n              phone: formData.personalPhone,\r\n              address: {\r\n                line1: formData.billingAddress.address,\r\n                city: formData.billingAddress.city,\r\n                state: formData.billingAddress.state,\r\n                postal_code: formData.billingAddress.zip,\r\n                country: 'US',\r\n              },\r\n            },\r\n          },\r\n        }\r\n      );\r\n      \r\n      console.log('Payment confirmation result:', { stripeError, paymentIntent });\r\n\r\n      if (stripeError) {\r\n        console.error('Stripe payment error:', stripeError);\r\n        setCardError(stripeError.message || 'Payment failed');\r\n        return;\r\n      }\r\n\r\n      if (paymentIntent.status === 'succeeded') {\r\n        // Confirm payment and create tenant\r\n        const confirmResult = await confirmPayment({\r\n          paymentIntentId: paymentIntent.id,\r\n          tenantData: formData\r\n        });\r\n        \r\n        if (confirmResult.success && confirmResult.data) {\r\n          // Call success callback\r\n          onPaymentSuccess(confirmResult.data);\r\n        } else {\r\n          setCardError(confirmResult.error || 'Failed to create your account');\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Payment processing error:', error);\r\n      if (error instanceof TypeError && error.message.includes('fetch')) {\r\n        setCardError('Unable to connect to server. Please check your network connection.');\r\n      } else {\r\n        setCardError(`Payment failed: ${error instanceof Error ? error.message : 'Please try again.'}`);\r\n      }\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n\r\n  const CARD_ELEMENT_OPTIONS = {\r\n    style: {\r\n      base: {\r\n        color: '#ffffff',\r\n        fontFamily: 'system-ui, -apple-system, sans-serif',\r\n        fontSize: '16px',\r\n        fontSmoothing: 'antialiased',\r\n        '::placeholder': {\r\n          color: '#78716c',\r\n        },\r\n      },\r\n      invalid: {\r\n        color: '#f87171',\r\n        iconColor: '#f87171',\r\n      },\r\n    },\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full max-w-2xl mx-auto\">\r\n      <div className=\"bg-stone-800 border border-stone-700 rounded-2xl overflow-hidden\">\r\n        <div className=\"p-4 sm:p-6 border-b border-stone-700\">\r\n          <h2 className=\"text-white text-xl sm:text-2xl font-semibold flex items-center gap-2\">\r\n            <CreditCard className=\"h-5 w-5 sm:h-6 sm:w-6 text-orange-600\" />\r\n            Payment Information\r\n          </h2>\r\n          <p className=\"text-gray-400 text-sm sm:text-base mt-2\">\r\n            Secure payment powered by Stripe\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"p-4 sm:p-6 space-y-4 sm:space-y-6\">\r\n          <div className=\"bg-stone-700/50 border border-stone-600 rounded-lg p-4\">\r\n            <div className=\"flex justify-between items-center\">\r\n              <div>\r\n                <p className=\"text-sm text-gray-400\">Selected Plan</p>\r\n                <p className=\"text-xl font-bold text-white capitalize mt-1\">\r\n                  {formData.selectedPlan}\r\n                </p>\r\n              </div>\r\n              <div className=\"text-right\">\r\n                <p className=\"text-sm text-gray-400\">Monthly</p>\r\n                <p className=\"text-2xl font-bold text-orange-600 mt-1\">\r\n                  ${(formData.planPrice / 100).toFixed(2)}\r\n                </p>\r\n              </div>\r\n            </div>\r\n            <div className=\"mt-4 pt-4 border-t border-stone-600\">\r\n              <p className=\"text-xs text-gray-400\">\r\n                Billed monthly. Cancel anytime. 14-day money-back guarantee.\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <div className=\"block text-sm font-medium text-gray-300 mb-3\">\r\n              Card Information <span className=\"text-orange-500\">*</span>\r\n            </div>\r\n            <div className=\"bg-stone-700 border border-stone-600 rounded-lg p-4\">\r\n              <CardElement options={CARD_ELEMENT_OPTIONS} onChange={handleCardChange} />\r\n            </div>\r\n            {cardError && (\r\n              <div className=\"mt-2 flex items-center gap-2 text-sm text-red-400\">\r\n                <AlertCircle className=\"w-4 h-4\" />\r\n                <span>{cardError}</span>\r\n              </div>\r\n            )}\r\n            <div className=\"mt-3 flex items-center gap-2 text-xs text-gray-400\">\r\n              <Lock className=\"w-3 h-3\" />\r\n              <span>Your payment information is encrypted and secure</span>\r\n            </div>\r\n            \r\n            {/* Test Card Information for Development */}\r\n            {env.DEV && (\r\n              <div className=\"mt-4 p-3 bg-yellow-900/20 border border-yellow-700 rounded-lg\">\r\n                <h4 className=\"text-sm font-medium text-yellow-400 mb-2\">🧪 Test Cards (Development)</h4>\r\n                <div className=\"text-xs text-yellow-300 space-y-1\">\r\n                  <p><strong>Success:</strong> 4242 4242 4242 4242</p>\r\n                  <p><strong>Decline:</strong> 4000 0000 0000 0002</p>\r\n                  <p><strong>CVV:</strong> Any 3 digits | <strong>Expiry:</strong> Any future date</p>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <input\r\n                type=\"checkbox\"\r\n                id=\"sameAddress\"\r\n                checked={formData.useSameAddress}\r\n                onChange={(e) => { onToggleSameAddress(e.target.checked); }}\r\n                className=\"w-4 h-4 rounded border-stone-600 text-orange-600 focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 focus:ring-offset-stone-800 bg-stone-700\"\r\n              />\r\n              <label htmlFor=\"sameAddress\" className=\"text-sm text-gray-300 cursor-pointer\">\r\n                Billing address same as business address\r\n              </label>\r\n            </div>\r\n\r\n            {!formData.useSameAddress && (\r\n              <div className=\"space-y-4 pt-2\">\r\n                <h3 className=\"text-white text-base sm:text-lg font-medium\">Billing Address</h3>\r\n\r\n                <Input\r\n                  label=\"Street Address\"\r\n                  type=\"text\"\r\n                  value={formData.billingAddress.address}\r\n                  onChange={(e) => { onAddressChange('address', e.target.value); }}\r\n                  onBlur={() => { validateField('billingAddress.address', formData.billingAddress.address); }}\r\n                  error={errors['billingAddress.address'] || ''}\r\n                  placeholder=\"123 Main Street\"\r\n                  required\r\n                />\r\n\r\n                <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4\">\r\n                  <div className=\"sm:col-span-2\">\r\n                    <Input\r\n                      label=\"City\"\r\n                      type=\"text\"\r\n                      value={formData.billingAddress.city}\r\n                      onChange={(e) => { onAddressChange('city', e.target.value); }}\r\n                      onBlur={() => { validateField('billingAddress.city', formData.billingAddress.city); }}\r\n                      error={errors['billingAddress.city'] || ''}\r\n                      placeholder=\"San Francisco\"\r\n                      required\r\n                    />\r\n                  </div>\r\n\r\n                  <Input\r\n                    label=\"State\"\r\n                    type=\"text\"\r\n                    value={formData.billingAddress.state}\r\n                    onChange={(e) => { onAddressChange('state', e.target.value.toUpperCase()); }}\r\n                    onBlur={() => { validateField('billingAddress.state', formData.billingAddress.state); }}\r\n                    error={errors['billingAddress.state'] || ''}\r\n                    placeholder=\"CA\"\r\n                    required\r\n                    maxLength={2}\r\n                    helperText=\"2 letters\"\r\n                  />\r\n                </div>\r\n\r\n                <Input\r\n                  label=\"ZIP Code\"\r\n                  type=\"text\"\r\n                  value={formData.billingAddress.zip}\r\n                  onChange={(e) => { onAddressChange('zip', e.target.value); }}\r\n                  onBlur={() => { validateField('billingAddress.zip', formData.billingAddress.zip); }}\r\n                  error={errors['billingAddress.zip'] || ''}\r\n                  placeholder=\"94102\"\r\n                  required\r\n                  maxLength={10}\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Payment Button */}\r\n          <div className=\"pt-4 border-t border-stone-700\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => { void handlePayment(); }}\r\n              disabled={!stripe || !clientSecret || isProcessing}\r\n              className={`\r\n                w-full py-4 px-6 rounded-lg font-semibold text-lg\r\n                transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-stone-800\r\n                ${\r\n                  !stripe || !clientSecret || isProcessing\r\n                    ? 'bg-gray-600 text-gray-400 cursor-not-allowed'\r\n                    : 'bg-orange-600 text-white hover:bg-orange-700 focus:ring-orange-500'\r\n                }\r\n              `}\r\n            >\r\n              {isProcessing ? (\r\n                <div className=\"flex items-center justify-center gap-2\">\r\n                  <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\r\n                  Processing Payment...\r\n                </div>\r\n              ) : (\r\n                `Complete Purchase - $${(formData.planPrice / 100).toFixed(2)}`\r\n              )}\r\n            </button>\r\n            \r\n            <p className=\"text-center text-xs text-gray-400 mt-2\">\r\n              You&apos;ll be charged ${(formData.planPrice / 100).toFixed(2)} monthly. Cancel anytime.\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4 pt-4 border-t border-stone-700\">\r\n            <div className=\"flex items-start gap-3\">\r\n              <Shield className=\"w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5\" />\r\n              <div>\r\n                <p className=\"text-sm font-medium text-white\">PCI Compliant</p>\r\n                <p className=\"text-xs text-gray-400 mt-0.5\">Bank-level security</p>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex items-start gap-3\">\r\n              <Lock className=\"w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5\" />\r\n              <div>\r\n                <p className=\"text-sm font-medium text-white\">256-bit SSL</p>\r\n                <p className=\"text-xs text-gray-400 mt-0.5\">Encrypted connection</p>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex items-start gap-3\">\r\n              <CreditCard className=\"w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5\" />\r\n              <div>\r\n                <p className=\"text-sm font-medium text-white\">Money-back</p>\r\n                <p className=\"text-xs text-gray-400 mt-0.5\">14-day guarantee</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PaymentSection;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { Elements } from '@stripe/react-stripe-js';\r\nimport { loadStripe } from '@stripe/stripe-js';\r\nimport { ChevronLeft } from 'lucide-react';\r\n\r\nimport { config } from '@/shared/env';\r\nimport { useBrowserTab } from '@/shared/hooks';\r\nimport { Button } from '@/shared/ui';\r\nimport { type IndustrySlug,loadDefaults } from '@/shared/utils/loadDefaults';\r\n\r\nimport { useAutoSave } from '../hooks/useAutoSave';\r\nimport {\r\n  type PreviewState,\r\n  type TenantApplication,\r\n  tenantApplicationDefaultValues,\r\n} from '../types';\r\nimport {\r\n  businessInfoSchema,\r\n  personalInfoSchema,\r\n  planSelectionSchema,\r\n} from '../utils/validation';\r\nimport {\r\n  ApplicationHeader,\r\n  BusinessInformationSection,\r\n  PersonalInformationSection,\r\n  PlanSelectionSection,\r\n  StepProgress,\r\n  SuccessPage,\r\n} from './index';\r\nimport PaymentSection from './PaymentSection';\r\n\r\n// Initialize Stripe\r\nconst stripePromise = loadStripe(config.stripePublishableKey);\r\n\r\nconst STEPS = [\r\n  { id: 0, label: 'Plan' },\r\n  { id: 1, label: 'Personal' },\r\n  { id: 2, label: 'Business' },\r\n  { id: 3, label: 'Payment' },\r\n];\r\n\r\nconst TenantApplicationPage: React.FC = () => {\r\n  const location = useLocation();\r\n  const previewData = location.state as PreviewState | null;\r\n\r\n  const [formData, setFormData] = useState<TenantApplication>(tenantApplicationDefaultValues);\r\n  const [currentStep, setCurrentStep] = useState(0);\r\n  const [errors, setErrors] = useState<Record<string, string>>({});\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [isSuccess, setIsSuccess] = useState(false);\r\n\r\n  // Set browser tab title and favicon for onboarding page\r\n  // Automatically uses platform logo (/shared/icons/logo.png) and default title\r\n  useBrowserTab({\r\n    useBusinessName: false, // Platform page, not tenant-specific\r\n  });\r\n\r\n  const { loadFromLocalStorage, clearSavedData } = useAutoSave({\r\n    formData,\r\n    enabled: currentStep > 0,\r\n  });\r\n\r\n  // Load saved draft or preview data on mount\r\n  useEffect(() => {\r\n    const loadSavedData = () => {\r\n      const localData = loadFromLocalStorage();\r\n\r\n      if (localData) {\r\n        // Automatically restore saved draft without confirmation popup\r\n        setFormData(localData);\r\n        setCurrentStep(localData.step);\r\n        return;\r\n      }\r\n\r\n      // Pre-fill from preview data if available\r\n      if (previewData?.fromPreview) {\r\n        setFormData((prev) => ({\r\n          ...prev,\r\n          businessName: previewData.businessName || prev.businessName,\r\n          businessPhone: previewData.phone || prev.businessPhone,\r\n          businessAddress: {\r\n            ...prev.businessAddress,\r\n            city: previewData.city || prev.businessAddress.city,\r\n            state: previewData.state || prev.businessAddress.state,\r\n          },\r\n          industry: previewData.industry,\r\n        }));\r\n      }\r\n    };\r\n\r\n    loadSavedData();\r\n  }, [loadFromLocalStorage, previewData, clearSavedData]);\r\n\r\n  // Warn user before leaving if form is in progress\r\n  useEffect(() => {\r\n    const handleBeforeUnload = (e: BeforeUnloadEvent) => {\r\n      if (currentStep > 0 && currentStep < STEPS.length - 1) {\r\n        e.preventDefault();\r\n        // Modern browsers will show a generic confirmation dialog\r\n        return '';\r\n      }\r\n    };\r\n\r\n    window.addEventListener('beforeunload', handleBeforeUnload);\r\n    return () => { window.removeEventListener('beforeunload', handleBeforeUnload); };\r\n  }, [currentStep]);\r\n\r\n  const handleFieldChange = (field: string, value: unknown) => {\r\n    setFormData((prev) => ({ ...prev, [field]: value }));\r\n    setErrors((prev) => ({ ...prev, [field]: '' }));\r\n  };\r\n\r\n  const handleAddressChange = (\r\n    addressType: 'businessAddress' | 'billingAddress',\r\n    field: string,\r\n    value: string\r\n  ) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      [addressType]: { ...prev[addressType], [field]: value },\r\n    }));\r\n  };\r\n\r\n  const handlePlanSelect = (planId: 'starter' | 'pro' | 'enterprise', price: number) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      selectedPlan: planId,\r\n      planPrice: price,\r\n    }));\r\n  };\r\n\r\n  const handleToggleSameAddress = (value: boolean) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      useSameAddress: value,\r\n      billingAddress: value ? prev.businessAddress : prev.billingAddress,\r\n    }));\r\n  };\r\n\r\n  const validateStep = async (step: number): Promise<boolean> => {\r\n    try {\r\n      switch (step) {\r\n        case 0:\r\n          planSelectionSchema.parse({\r\n            selectedPlan: formData.selectedPlan,\r\n            planPrice: formData.planPrice,\r\n          });\r\n          return true;\r\n\r\n        case 1: {\r\n          // First, validate the schema\r\n          personalInfoSchema.parse({\r\n            firstName: formData.firstName,\r\n            lastName: formData.lastName,\r\n            personalPhone: formData.personalPhone,\r\n            personalEmail: formData.personalEmail,\r\n          });\r\n\r\n          // Then check if email already exists\r\n          try {\r\n            // Debug API URL configuration\r\n            // console.log('Check-email API URL config:', {\r\n            //   apiUrl: config.apiUrl,\r\n            //   apiBaseUrl: config.apiBaseUrl,\r\n            //   isDevelopment: config.isDevelopment,\r\n            //   fullUrl: `${config.apiUrl || ''}/api/auth/check-email?email=${encodeURIComponent(formData.personalEmail)}`\r\n            // });\r\n            \r\n            // eslint-disable-next-line no-restricted-globals, no-restricted-syntax -- Isolated onboarding check, API client refactor planned\r\n            const response = await fetch(`${config.apiUrl || ''}/api/auth/check-email?email=${encodeURIComponent(formData.personalEmail)}`);\r\n            \r\n            if (!response.ok) {\r\n              throw new Error(`Email check failed: ${response.status} ${response.statusText}`);\r\n            }\r\n            \r\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- Response typing improvement planned\r\n            const result = await response.json();\r\n            \r\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access -- Response typing improvement planned\r\n            if (result.exists) {\r\n              setErrors({ personalEmail: 'An account with this email already exists' });\r\n              return false;\r\n            }\r\n          } catch (emailCheckError) {\r\n            console.error('Error checking email:', emailCheckError);\r\n            // Show a warning but allow them to proceed\r\n            setErrors({ personalEmail: 'Unable to verify email availability. You can still proceed - duplicates will be caught during signup.' });\r\n            // Don't block the user, just warn them\r\n          }\r\n          \r\n          return true;\r\n        }\r\n\r\n        case 2:\r\n          businessInfoSchema.parse({\r\n            businessName: formData.businessName,\r\n            businessPhone: formData.businessPhone,\r\n            businessEmail: formData.businessEmail,\r\n            businessAddress: formData.businessAddress,\r\n            industry: formData.industry,\r\n          });\r\n          return true;\r\n\r\n        case 3:\r\n          return true;\r\n\r\n        default:\r\n          return false;\r\n      }\r\n    } catch (error: unknown) {\r\n      const newErrors: Record<string, string> = {};\r\n      if (error && typeof error === 'object' && 'errors' in error) {\r\n        const zodError = error as { errors: Array<{ path: string[]; message: string }> };\r\n        zodError.errors.forEach((err) => {\r\n          const field = err.path.join('.');\r\n          newErrors[field] = err.message;\r\n        });\r\n      }\r\n      setErrors(newErrors);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const goToNextStep = async () => {\r\n    const isValid = await validateStep(currentStep);\r\n    if (isValid) {\r\n      const nextStep = currentStep + 1;\r\n      setFormData((prev) => ({ ...prev, step: nextStep }));\r\n      setCurrentStep(nextStep);\r\n      window.scrollTo({ top: 0, behavior: 'smooth' });\r\n    }\r\n  };\r\n\r\n  const goToPreviousStep = () => {\r\n    if (currentStep > 0) {\r\n      const prevStep = currentStep - 1;\r\n      setFormData((prev) => ({ ...prev, step: prevStep }));\r\n      setCurrentStep(prevStep);\r\n      window.scrollTo({ top: 0, behavior: 'smooth' });\r\n    }\r\n  };\r\n\r\n  const handlePaymentSuccess = (data: { slug: string; websiteUrl: string; dashboardUrl: string }) => {\r\n    // Store the new tenant information for the success page\r\n    sessionStorage.setItem('newTenantSlug', data.slug);\r\n    sessionStorage.setItem('newTenantWebsiteUrl', data.websiteUrl);\r\n    sessionStorage.setItem('newTenantDashboardUrl', data.dashboardUrl);\r\n\r\n    clearSavedData();\r\n    setIsSuccess(true);\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    // For payment step, the payment processing is handled by PaymentSection\r\n    if (currentStep === 3) {\r\n      return; // Payment is handled by the payment component\r\n    }\r\n\r\n    const isValid = await validateStep(currentStep);\r\n    if (!isValid) {\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      // Load industry-specific defaults for non-payment steps\r\n      if (currentStep === 2) { // Business info step\r\n        const industry = (formData.industry || 'mobile-detailing') as IndustrySlug;\r\n        const defaults = await loadDefaults(industry);\r\n        setFormData(prev => ({ ...prev, defaults }));\r\n      }\r\n\r\n      // Move to next step\r\n      const nextStep = currentStep + 1;\r\n      setFormData((prev) => ({ ...prev, step: nextStep }));\r\n      setCurrentStep(nextStep);\r\n      window.scrollTo({ top: 0, behavior: 'smooth' });\r\n\r\n    } catch (error) {\r\n      console.error('Step validation error:', error);\r\n      const errorMessage = error instanceof Error ? error.message : 'Failed to proceed. Please try again.';\r\n      alert(errorMessage);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  if (isSuccess) {\r\n    return <SuccessPage />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-stone-900 text-white\">\r\n      <ApplicationHeader />\r\n\r\n      <div className=\"pt-16 sm:pt-20\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n          <StepProgress steps={STEPS} currentStep={currentStep} />\r\n\r\n          <form onSubmit={(e) => { void handleSubmit(e); }} className=\"pb-6\">\r\n            <div className=\"min-h-[400px] flex items-center justify-center\">\r\n              {currentStep === 0 && (\r\n                <PlanSelectionSection\r\n                  selectedPlan={formData.selectedPlan}\r\n                  onSelectPlan={handlePlanSelect}\r\n                />\r\n              )}\r\n\r\n              {currentStep === 1 && (\r\n                <PersonalInformationSection\r\n                  formData={formData}\r\n                  handleInputChange={handleFieldChange}\r\n                  errors={errors}\r\n                />\r\n              )}\r\n\r\n              {currentStep === 2 && (\r\n                <BusinessInformationSection\r\n                  formData={formData}\r\n                  handleInputChange={handleFieldChange}\r\n                  handleAddressChange={(field, value) => {\r\n                    handleAddressChange('businessAddress', field, value);\r\n                  }}\r\n                />\r\n              )}\r\n\r\n              {currentStep === 3 && (\r\n                <Elements stripe={stripePromise}>\r\n                  <PaymentSection\r\n                    formData={formData}\r\n                    businessAddress={formData.businessAddress}\r\n                    onAddressChange={(field, value) => {\r\n                      handleAddressChange('billingAddress', field, value);\r\n                    }}\r\n                    onToggleSameAddress={handleToggleSameAddress}\r\n                    onPaymentSuccess={handlePaymentSuccess}\r\n                    errors={errors}\r\n                    setErrors={setErrors}\r\n                  />\r\n                </Elements>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"max-w-2xl mx-auto mt-8 px-4\">\r\n              <div className=\"flex flex-col-reverse sm:flex-row justify-center gap-3 sm:gap-4\">\r\n                {currentStep > 0 && (\r\n                  <Button\r\n                    type=\"button\"\r\n                    onClick={goToPreviousStep}\r\n                    variant=\"outline\"\r\n                    size=\"lg\"\r\n                    className=\"flex items-center justify-center gap-2\"\r\n                  >\r\n                    <ChevronLeft className=\"w-4 h-4\" />\r\n                    Back\r\n                  </Button>\r\n                )}\r\n\r\n                {currentStep < STEPS.length - 1 ? (\r\n                  <Button\r\n                    type=\"button\"\r\n                    onClick={() => { void goToNextStep(); }}\r\n                    variant=\"primary\"\r\n                    size=\"lg\"\r\n                    className={currentStep === 0 ? 'w-full' : ''}\r\n                    disabled={currentStep === 0 && !formData.selectedPlan}\r\n                  >\r\n                    {currentStep === 0 ? 'Get Started' : 'Continue'}\r\n                  </Button>\r\n                ) : currentStep !== 3 ? (\r\n                  <Button\r\n                    type=\"submit\"\r\n                    variant=\"primary\"\r\n                    size=\"lg\"\r\n                    disabled={isSubmitting}\r\n                    className=\"min-w-[200px]\"\r\n                  >\r\n                    {isSubmitting ? 'Processing...' : 'Complete Purchase'}\r\n                  </Button>\r\n                ) : null}\r\n              </div>\r\n\r\n              {currentStep > 0 && (\r\n                <p className=\"text-center text-xs text-gray-500 mt-4\">\r\n                  Your progress is automatically saved\r\n                </p>\r\n              )}\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TenantApplicationPage;\r\n","import { useParams } from 'react-router-dom';\r\n\r\nimport { ServiceData } from '@/features/services/types/service.types';\r\n\r\nimport { useServices } from './useServices';\r\n\r\nexport const useServicePage = () => {\r\n  const { serviceType } = useParams<{ serviceType: string }>();\r\n  const { getAutoDetailingData, getMarineDetailingData, getRvDetailingData, getCeramicCoatingData, getPaintCorrectionData, getPpfData } = useServices();\r\n  \r\n  \r\n  // Load the appropriate service data based on serviceType\r\n  const getServiceData = (): ServiceData | null => {\r\n    switch (serviceType) {\r\n      case 'auto-detailing':\r\n        return getAutoDetailingData();\r\n      case 'marine-detailing':\r\n        return getMarineDetailingData();\r\n      case 'rv-detailing':\r\n        return getRvDetailingData();\r\n      case 'ceramic-coating':\r\n        return getCeramicCoatingData();\r\n      case 'paint-correction':\r\n        return getPaintCorrectionData();\r\n      case 'paint-protection-film':\r\n      case 'ppf-installation':\r\n        return getPpfData();\r\n      case 'aircraft-detailing':\r\n        // Aircraft detailing not implemented yet, fallback to auto-detailing\r\n        return getAutoDetailingData();\r\n      // Add other services as you create their JSON files\r\n      default:\r\n        // Fallback to auto-detailing for unknown services\r\n        return getAutoDetailingData();\r\n    }\r\n  };\r\n\r\n  const serviceData = getServiceData();\r\n\r\n  return {\r\n    serviceType,\r\n    serviceData,\r\n    isLoading: false,\r\n    error: null\r\n  };\r\n};\r\n","import React, { useState } from 'react';\r\nimport { useSearchParams } from 'react-router-dom';\r\n\r\nimport { DataProvider, Header } from '@/features/header';\r\nimport { PreviewCTAButton, PreviewDataProvider, usePreviewParams } from '@/features/preview';\r\nimport { LazyRequestQuoteModal } from '@/features/quotes';\r\nimport { Process, Results, ServiceCTA, ServiceHero, WhatItIs } from '@/features/services';\r\nimport { useServicePage } from '@/features/services/hooks/useServicePage';\r\n\r\ninterface ServicePageProps {\r\n  onRequestQuote?: () => void;\r\n}\r\n\r\nconst ServicePage: React.FC<ServicePageProps> = ({ onRequestQuote }) => {\r\n  const { serviceData } = useServicePage();\r\n  const [searchParams] = useSearchParams();\r\n  const token = searchParams.get('t');\r\n  \r\n  // If token is present, we're in preview mode\r\n  const { payload } = usePreviewParams();\r\n  \r\n  // Quote modal state for preview mode\r\n  const [isQuoteModalOpen, setIsQuoteModalOpen] = useState(false);\r\n\r\n  const handleOpenQuoteModal = () => {\r\n    if (onRequestQuote) {\r\n      onRequestQuote();\r\n    } else {\r\n      setIsQuoteModalOpen(true);\r\n    }\r\n  };\r\n  \r\n  const handleCloseQuoteModal = () => {\r\n    setIsQuoteModalOpen(false);\r\n  };\r\n\r\n\r\n  if (!serviceData) {\r\n    return (\r\n      <main className=\"bg-stone-900 text-white min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <h1 className=\"text-2xl font-bold text-white mb-4\">Service Not Found</h1>\r\n          <p className=\"text-slate-300\">The requested service could not be found.</p>\r\n        </div>\r\n      </main>\r\n    );\r\n  }\r\n\r\n  // Render with preview context if token is present\r\n  if (token && payload) {\r\n    return (\r\n      <PreviewDataProvider payload={payload}>\r\n        {/* Fixed \"Get This Site\" buttons in both corners */}\r\n        <PreviewCTAButton position=\"left\" />\r\n        <PreviewCTAButton position=\"right\" />\r\n        \r\n        <main className=\"bg-stone-900 text-white\">\r\n          <Header />\r\n          <ServiceHero serviceData={serviceData} onRequestQuote={handleOpenQuoteModal} />\r\n          <WhatItIs serviceData={serviceData} />\r\n          <Process serviceData={serviceData} />\r\n          <Results serviceData={serviceData} />\r\n          <ServiceCTA serviceData={serviceData} onRequestQuote={handleOpenQuoteModal} />\r\n        </main>\r\n        \r\n        {/* Quote Modal */}\r\n        {isQuoteModalOpen && (\r\n          <LazyRequestQuoteModal \r\n            isOpen={isQuoteModalOpen} \r\n            onClose={handleCloseQuoteModal} \r\n          />\r\n        )}\r\n      </PreviewDataProvider>\r\n    );\r\n  }\r\n\r\n  // Regular tenant mode\r\n  return (\r\n    <DataProvider>\r\n      <main className=\"bg-stone-900 text-white\">\r\n        <Header />\r\n        <ServiceHero serviceData={serviceData} {...(onRequestQuote && { onRequestQuote })} />\r\n        <WhatItIs serviceData={serviceData} />\r\n        <Process serviceData={serviceData} />\r\n        <Results serviceData={serviceData} />\r\n        <ServiceCTA serviceData={serviceData} {...(onRequestQuote && { onRequestQuote })} />\r\n      </main>\r\n    </DataProvider>\r\n  );\r\n};\r\n\r\nexport default ServicePage;\r\n","import { lazy, Suspense, useState } from 'react';\r\nimport { Navigate, Route, Routes } from 'react-router-dom';\r\n\r\nimport { DataProvider, TenantPage } from '@/features/header';\r\nimport { LazyRequestQuoteModal } from '@/features/quotes';\r\nimport { DashboardPage } from '@/features/tenantDashboard';\r\nimport { TenantApplicationPage } from '@/features/tenantOnboarding';\r\nimport { LoginPage, ProtectedRoute } from '@/shared/ui';\r\n\r\nimport HomePage from '../app/pages/HomePage';\r\nimport ServicePage from '../app/pages/ServicePage';\r\n\r\n// Heavy modules are NOT imported here - they stay out of the initial bundle\r\nconst Booking = lazy(() => import('../features/booking/BookingApp'));\r\n\r\nexport default function TenantApp() {\r\n  const [isQuoteModalOpen, setIsQuoteModalOpen] = useState(false);\r\n\r\n  const handleOpenQuoteModal = () => {\r\n    setIsQuoteModalOpen(true);\r\n  };\r\n  const handleCloseQuoteModal = () => {\r\n    setIsQuoteModalOpen(false);\r\n  };\r\n\r\n  const routes = (\r\n    <Suspense fallback={<div className=\"p-8 text-white\">Loading…</div>}>\r\n      <Routes>\r\n        {/* Root path - show tenant page */}\r\n        <Route path=\"/\" element={<TenantPage />} />\r\n        \r\n        {/* Login route */}\r\n        <Route path=\"/login\" element={<LoginPage />} />\r\n        \r\n        {/* Tenant Dashboard - protected route */}\r\n        <Route path=\"/dashboard\" element={\r\n          <ProtectedRoute requiredRole={['admin', 'tenant']} fallbackPath=\"/\">\r\n            <DashboardPage />\r\n          </ProtectedRoute>\r\n        } />\r\n        \r\n        {/* Tenant Application */}\r\n        <Route path=\"/tenant-onboarding\" element={<TenantApplicationPage />} />\r\n        \r\n        {/* Booking route */}\r\n        <Route path=\"/booking\" element={<Booking />} />\r\n        \r\n        {/* Redirect old service routes to tenant-based structure */}\r\n        <Route path=\"/services/:serviceType\" element={<Navigate to=\"/services/:serviceType\" replace />} />\r\n        \r\n        {/* Service routes - must come before generic businessSlug route */}\r\n        <Route path=\"/:businessSlug/services/:serviceType\" element={<ServicePage />} />\r\n        \r\n        <Route path=\"/:businessSlug/dashboard\" element={\r\n          <div style={{ padding: '20px', background: 'red', color: 'white' }}>\r\n            <h1>DASHBOARD ROUTE MATCHED!</h1>\r\n            <p>Business Slug: {window.location.pathname.split('/')[1]}</p>\r\n            <ProtectedRoute requiredRole={['admin', 'tenant']} fallbackPath=\"/\">\r\n                <DashboardPage />\r\n            </ProtectedRoute>\r\n          </div>\r\n        } />\r\n        <Route path=\"/:businessSlug/booking\" element={<Booking />} />\r\n        \r\n        {/* Tenant-specific routes */}\r\n        <Route path=\"/:businessSlug\" element={<HomePage />} />\r\n        \r\n        {/* Catch all - redirect to root */}\r\n        <Route path=\"*\" element={<Navigate to=\"/\" replace />} />\r\n      </Routes>\r\n    </Suspense>\r\n  );\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-900\">\r\n      {routes}\r\n      \r\n      {/* Quote Modal */}\r\n      <LazyRequestQuoteModal \r\n        isOpen={isQuoteModalOpen}\r\n        onClose={handleCloseQuoteModal}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { createRoot } from 'react-dom/client';\r\nimport { BrowserRouter } from 'react-router-dom';\r\n\r\nimport { Providers } from '../app/providers';\r\nimport TenantApp from './TenantApp';\r\n\r\nconst container = document.getElementById('root');\r\nif (!container) {\r\n  throw new Error('Root element not found');\r\n}\r\n\r\nconst root = createRoot(container);\r\n\r\nroot.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <Providers>\r\n        <TenantApp />\r\n      </Providers>\r\n    </BrowserRouter>\r\n  </React.StrictMode>\r\n);\r\n"],"file":"assets/tenant-C3UGH-dU.js"}